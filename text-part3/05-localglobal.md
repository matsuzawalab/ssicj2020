# ローカル変数とグローバル変数
本章では，ローカル変数とグローバル変数について学びます．

## ローカル変数

関数(function)内に定義された変数(var)が関数内でのみ有効であることは，第１部の教材「変数のスコープ」で学習しました．関数の中に定義した変数は関数ブロック内で有効なので，関数ブロックの外で変数を参照することはできません．

ここでは，次のようなプログラムで，ボタンが何度も押され，関数がその都度呼ばれる場面を考えてみましょう．

<div code src='5-1'></div>

buttonAPressed()関数内に変数xを定義し，0で初期化します．
```
var x = 0;
```

関数内で定義されたローカル変数（局所変数）は，関数の呼び出し毎に毎回保存領域が確保され，初期化され，関数が終わると消滅する呼び出し１回限り有効な変数です．したがって，ボタンを何度も押し，関数を何度実行しても，表示されるのは１のままです．

## グローバル変数

関数(function)の外側に定義された変数(var)は，すべての関数で有効なグローバル変数（広域変数）となります．
グローバル変数はどの関数からもその値を読み書きすることができます．プログラムが読み込まれると同時に初期化されて，プログラムが終了するまで値を保持し続けます．

<div code src='5-2'></div>

今度のプログラムでは，ボタンを何度押しても，前回の値が保存されているので，１ずつカウントアップするプログラムを作ることができました．

## グローバル変数（２）

グローバル変数は関数間で値を共有し，どの関数からもその値を読み書きすることができます．

<div code src='5-3'></div>

もう一つの関数を用意して，カウントをリセットするボタンを作ることができました．


### tips {.unnumbered}

このように，大変便利に見えるグローバル変数ですが，プログラムの保守という観点からは問題が多いので，極力控えてプログラムを作ることが推奨されています．簡単に説明すると，バグが起こったときに，ローカル変数ならばバグの範囲が限定しやすいのですが，グローバル変数が多いと，影響を与える関数（プログラム）の範囲が広大になってしまい，デバッグする範囲も広域に及びます．
