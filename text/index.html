<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="社会情報学部" />
  <title>コンピューティング実習 2020</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="cj.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">コンピューティング実習 2020</h1>
<p class="author">社会情報学部</p>
<p class="date">version 1.0</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#開発環境sumatraの説明"><span class="toc-section-number">0</span> 開発環境(sumatra)の説明</a></li>
<li><a href="#初めてのjavascriptタートルプログラミング"><span class="toc-section-number">1</span> 初めてのJavascriptタートルプログラミング</a></li>
<li><a href="#コンピュータに情報を記憶させてみよう変数"><span class="toc-section-number">2</span> コンピュータに情報を記憶させてみよう（変数）</a></li>
<li><a href="#プログラムに知性を条件分岐"><span class="toc-section-number">3</span> プログラムに知性を(条件分岐)</a></li>
<li><a href="#コンピュータの得意な仕事繰り返し"><span class="toc-section-number">4</span> コンピュータの得意な仕事(繰り返し)</a></li>
<li><a href="#ブロックの入れ子構造"><span class="toc-section-number">5</span> ブロックの入れ子構造</a></li>
<li><a href="#命令をつくる１関数引数付関数"><span class="toc-section-number">6</span> 命令をつくる（１）：関数．引数付関数</a></li>
<li><a href="#命令をつくる２戻り値付き関数"><span class="toc-section-number">7</span> 命令をつくる（２）：戻り値付き関数</a></li>
<li><a href="#挑戦関数の再帰呼び出しとフラクタル図形"><span class="toc-section-number">8</span> 挑戦：関数の再帰呼び出しとフラクタル図形</a></li>
</ul>
</nav>
<script>
    function copycode(idstr){
        document.getSelection().selectAllChildren(document.getElementById(idstr).querySelector('code')); 
        document.execCommand('copy');
    }
</script>
<section id="開発環境sumatraの説明" data-number="1">
<h1 data-number="0"><span class="header-section-number">0</span> 開発環境(sumatra)の説明</h1>
<p>第５週目までは，初学者用Javascript開発環境(pikeplace - sumatra)を使って学習を進めます． ここでは，簡単に使い方を説明します．</p>
<section id="ブラウザ" data-number="1.1">
<h2 data-number="0.1"><span class="header-section-number">0.1</span> ブラウザ</h2>
<p>ブラウザはChromeを使用してください．Chrome以外のブラウザでも動作する可能性はありますが，テストはしておりません．</p>
</section>
<section id="ユーザ登録" data-number="1.2">
<h2 data-number="0.2"><span class="header-section-number">0.2</span> ユーザ登録</h2>
<p>ユーザ登録の必要はありません．GSuiteアカウントを使って認証してください．</p>
<!-- ![](img/chapter00/registration.png) -->
<!-- 初回はユーザ登録が必要です．ユーザ名は学生番号（半角で！），メールアドレスは青山メールを，パスワードは任意のものを入力してください．ユーザ名（学生番号）が間違っていると，採点されない可能性がありますので注意ください． -->
</section>
<section id="起動時の画面" data-number="1.3">
<h2 data-number="0.3"><span class="header-section-number">0.3</span> 起動時の画面</h2>
<p>ユーザ認証を済ませると，以下のような画面が起動します． <img src="img/chapter00/opened.png" /></p>
</section>
<section id="ファイルの作成" data-number="1.4">
<h2 data-number="0.4"><span class="header-section-number">0.4</span> ファイルの作成</h2>
<p>それでは，はじめのプログラムのためのファイルを作ってみましょう．</p>
<p>左上の <img src="img/chapter00/openfiletreebutton.png" /> ボタンをクリックし，ファイルツリーを開きます（下図）</p>
<p><img src="img/chapter00/filetreeopened.png" /></p>
<p>Project1フォルダは最初から作られています． ファイルツリービューの操作アイコンとして，左から，</p>
<ul>
<li>ファイルの作成: <img src="img/chapter00/icon_f_newfile.png" /></li>
<li>プロジェクトの作成: <img src="img/chapter00/icon_f_newproject.png" /></li>
<li>ファイル名の編集: <img src="img/chapter00/icon_f_edit.png" /></li>
<li>ファイルの削除: <img src="img/chapter00/icon_f_delete.png" /></li>
</ul>
<p>ボタンが表示されています．</p>
<p>Project1フォルダは最初から作られていますので，その「Project1」フォルダを選択し，ファイルの作成アイコンを押すことで，「hello.js」という名前のファイルを作成してみましょう．</p>
</section>
<section id="プログラムの作成実行" data-number="1.5">
<h2 data-number="0.5"><span class="header-section-number">0.5</span> プログラムの作成，実行</h2>
<p>「hello.js」ファイルができたら，もう一度ファイルツリーボタンを押してファイルツリーを消し，プログラムを書いてみましょう．（コピペできませんので，打ち込んでください．）</p>
<p><img src="img/chapter00/hello.png" /></p>
<p>プログラムの内容は後から勉強していただくとして，プログラムができたら， <img src="img/chapter00/icon_play.png" />ボタンを押し，実行してみましょう．右の画面に亀が表示され３０歩進むアニメーションが表示され，consoleにhello, world!という文字がでが出現したら成功です．右側に変数が表示されています．</p>
</section>
<section id="プログラムのステップ実行" data-number="1.6">
<h2 data-number="0.6"><span class="header-section-number">0.6</span> プログラムのステップ実行</h2>
<p>プログラムを全部実行するるのではなくて，１行ずつ実行することもできます． <img src="img/chapter00/icon_reload.png" />ボタンを１回押してリセットをした後，<img src="img/chapter00/icon_step.png" />ボタンを押すごとに，１行ずつステップ実行することができます．</p>
</section>
<section id="プログラムの保存" data-number="1.7">
<h2 data-number="0.7"><span class="header-section-number">0.7</span> プログラムの保存</h2>
<p>プログラムは，実行するたびに自動的に保存されます．保存だけしたい場合はリロードボタン<img src="img/chapter00/icon_reload.png" />を押下してください．</p>
</section>
<section id="そのほか" data-number="1.8">
<h2 data-number="0.8"><span class="header-section-number">0.8</span> そのほか</h2>
<section id="アニメーションの速度調整" data-number="1.8.1">
<h3 data-number="0.8.1"><span class="header-section-number">0.8.1</span> アニメーションの速度調整</h3>
<ul>
<li>Turtleゲージでタートルグラフィックスのアニメーションの速度が変更できます．</li>
<li>Programゲージで変数表示アニメーションの速度を変更できます．</li>
</ul>
</section>
<section id="ソースエディタ" data-number="1.8.2">
<h3 data-number="0.8.2"><span class="header-section-number">0.8.2</span> ソースエディタ</h3>
<ul>
<li>ソースエディタのフォントの変更ができます．</li>
<li>Ctrl-s　でソースコードの整形ができます．</li>
</ul>
</section>
</section>
</section>
<section id="初めてのjavascriptタートルプログラミング" data-number="2">
<h1 data-number="1"><span class="header-section-number">1</span> 初めてのJavascriptタートルプログラミング</h1>
<section id="学習目標" data-number="2.1">
<h2 data-number="1.1"><span class="header-section-number">1.1</span> 学習目標</h2>
<ul>
<li>タートルの基本的な命令を使いこなし，タートルで図形が描けるようになる</li>
</ul>
</section>
<section id="最初のタートルプログラム" data-number="2.2">
<h2 data-number="1.2"><span class="header-section-number">1.2</span> 最初のタートルプログラム</h2>
<p>最初の例題として､「家を描くサンプルプログラム」を解説します．</p>
<p>家を書くサンプルプログラム</p>
<div class="sourceCode" id="lst:1-1" data-caption="家を書くサンプルプログラム"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:1-1-1"><a href="#lst:1-1-1"></a><span class="co">//　タートルを生成する</span></span>
<span id="lst:1-1-2"><a href="#lst:1-1-2"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:1-1-3"><a href="#lst:1-1-3"></a></span>
<span id="lst:1-1-4"><a href="#lst:1-1-4"></a><span class="co">// 屋根を書く</span></span>
<span id="lst:1-1-5"><a href="#lst:1-1-5"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span><span class="co">// 30度右を向く</span></span>
<span id="lst:1-1-6"><a href="#lst:1-1-6"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span><span class="co">// 50歩前に進む</span></span>
<span id="lst:1-1-7"><a href="#lst:1-1-7"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:1-1-8"><a href="#lst:1-1-8"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:1-1-9"><a href="#lst:1-1-9"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:1-1-10"><a href="#lst:1-1-10"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:1-1-11"><a href="#lst:1-1-11"></a></span>
<span id="lst:1-1-12"><a href="#lst:1-1-12"></a><span class="co">// 本体を書く</span></span>
<span id="lst:1-1-13"><a href="#lst:1-1-13"></a>t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:1-1-14"><a href="#lst:1-1-14"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:1-1-15"><a href="#lst:1-1-15"></a>t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:1-1-16"><a href="#lst:1-1-16"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:1-1-17"><a href="#lst:1-1-17"></a>t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:1-1-18"><a href="#lst:1-1-18"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:1-1-19"><a href="#lst:1-1-19"></a>t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:1-1-20"><a href="#lst:1-1-20"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span></code></pre></div>
</section>
<section id="タートルの命令の解説" data-number="2.3">
<h2 data-number="1.3"><span class="header-section-number">1.3</span> タートルの命令の解説</h2>
<section id="タートルの生成" data-number="2.3.1">
<h3 data-number="1.3.1"><span class="header-section-number">1.3.1</span> タートルの生成</h3>
<p>コンピュータ実習の授業では，しばらくタートルグラフィックスライブラリを使って演習を行っていきます．タートル（亀）を動かすことでアルゴリズムの基礎とJavascriptを使ったプログラムの基礎を学んでいきましょう．</p>
<p>タートルグラフィックスライブラリを使うための最初の命令が <code>var t = createTurtle();</code> という行です． 右辺の<code>createTurtle()</code>関数を呼び出してタートルを一つ作成し， <code>var t</code>で，tという名前の変数を一つ作成し，作成したタートルへの参照を代入します．</p>
<p>と説明しても難しいでしょうから，まずは，これは「おまじない」だと思って，タートルグラフィックスを扱うプログラムでは最初に記述しておいておいてください．</p>
</section>
<section id="タートルの命令" data-number="2.3.2">
<h3 data-number="1.3.2"><span class="header-section-number">1.3.2</span> タートルの命令</h3>
<p>t.rt(30)やt.fd(60)がタートルに指示する命令です． 書かれた命令は， 必ず上から順番に実行されます． 以下にタートルに指示できる命令の一覧を示します．</p>
<dl>
<dt><code>rt([角度の指定])</code></dt>
<dd>タートルを指定した角度だけ右に回す．
</dd>
<dt><code>lt([角度の指定])</code></dt>
<dd>タートルを指定した角度だけ左に回す．
</dd>
<dt><code>fd([長さの指定])</code></dt>
<dd>タートルを指定した長さだけ進める．
</dd>
<dt><code>bk([長さの指定)</code></dt>
<dd>タートルを指定した長さだけ後ろに進める．
</dd>
<dt><code>up()</code></dt>
<dd>タートルがペンを上げる(軌跡がかかれなくなる)．
</dd>
<dt><code>down()</code></dt>
<dd>タートルがペンを下げる(軌跡がかかれるようになる)．
</dd>
<dt><code>color([色の指定])</code></dt>
<dd>タートルがペンの色を変える．（色の指定には’red’や,’blue’などを入れてください）
</dd>
</dl>
</section>
<section id="命令の区切り" data-number="2.3.3">
<h3 data-number="1.3.3"><span class="header-section-number">1.3.3</span> 命令の区切り</h3>
<p>Javascriptのプログラムでは命令と命令の区切りに「;」（セミコロン）を入れます．セミコロンが入っていれば，複数の命令を次のように同じ行に書いてもＯＫです．</p>
<pre><code>t.fd(100); t.rt(90);</code></pre>
<p>Javascriptのプログラムでは，セミコロンを書かなくても，異なる行に記述すれば，異なる命令として扱われます．</p>
<pre><code>t.fd(100) 
t.rt(90)</code></pre>
</section>
<section id="コメント" data-number="2.3.4">
<h3 data-number="1.3.4"><span class="header-section-number">1.3.4</span> コメント</h3>
<p>コメントはプログラム（命令）としては考慮されず，読み飛ばされます． しかし，人間が読めないとメンテナンスにこまるためにコメントをつけておきます．ファイルの先頭には，プログラムのタイトル，開発者の氏名や日付を入れておきます．</p>
<dl>
<dt>範囲指定コメント</dt>
<dd><code>/*</code>から<code>*/</code>までコメントになります．
</dd>
<dt>行コメント</dt>
<dd><code>//</code>から先，行の終わりまでコメントになります．
</dd>
</dl>
</section>
</section>
<section id="プログラムミスと対処" data-number="2.4">
<h2 data-number="1.4"><span class="header-section-number">1.4</span> プログラムミスと対処</h2>
<section id="構文エラー" data-number="2.4.1">
<h3 data-number="1.4.1"><span class="header-section-number">1.4.1</span> 構文エラー</h3>
<p>プログラムの書きかたを間違えると，実行した時に構文エラーになります．</p>
<!-- 例えば，コマンドの区切りでセミコロンを忘れると，次のようなエラーがでます．

図 2.4.1.1 コンパイルエラー
>javac House.java House.java:13: ';' がありません． rt(120)
^ エラー 1 個 > -->
<p>構文エラーがでたら，実行することはできないので，ソースを直して，再実行するしかありません．どうしても原因が分からない時は，ＴＡなどに相談してください．</p>
</section>
<section id="バグ" data-number="2.4.2">
<h3 data-number="1.4.2"><span class="header-section-number">1.4.2</span> バグ</h3>
<p>構文があっていても，プログラムが間違っていて，意図した通りに動作しないことをバグといいます． コンピュータは，必ず 命令した通りに動作します．</p>
<p>バグがあったら，修正しましょう．バグを修正することをデバッグといいます．</p>
<p>プロでも，最初から意図したプログラムを書くのは難しいものです． プログラム上達の早道は，一回で動かそうとせずに， 早くバグを見つけて，修正できるようになるようになるように心がけることです．</p>
</section>
</section>
<section id="練習問題" data-number="2.5">
<h2 data-number="1.5"><span class="header-section-number">1.5</span> 練習問題</h2>
<section id="正五角形を描くプログラム" data-number="2.5.1">
<h3 data-number="1.5.1"><span class="header-section-number">1.5.1</span> 正五角形を描くプログラム</h3>
<p>進める（fd）命令や，回す（rt）命令を使って，正五角形を描くプログラムを作りましょう．</p>
<p><img src="img/chapter01/pentagon.png" alt="正五角形" /> ファイル名は「pentagon.js」とすること．</p>
</section>
<section id="星を描くプログラム" data-number="2.5.2">
<h3 data-number="1.5.2"><span class="header-section-number">1.5.2</span> 星を描くプログラム</h3>
<p>進める（fd）命令や，回す（rt）命令を使って，星を描くプログラムを作りましょう．</p>
<p><img src="img/chapter01/star.png" alt="星" /> ファイル名は「star.js」とすること．</p>
</section>
<section id="こんぺいとうを描くプログラム" data-number="2.5.3">
<h3 data-number="1.5.3"><span class="header-section-number">1.5.3</span> こんぺいとうを描くプログラム</h3>
<p>進める（fd）命令や，回す（rt）命令を使って，こんぺいとうを描くプログラムを作りましょう．</p>
<p><img src="img/chapter01/confetti.png" alt="こんぺいとう" /> ファイル名は「confetti.js」とすること．</p>
</section>
<section id="トライフォースを描くプログラム" data-number="2.5.4">
<h3 data-number="1.5.4"><span class="header-section-number">1.5.4</span> トライフォースを描くプログラム</h3>
<p>進める（fd）命令や，回す（rt）命令を使って，トライフォースを描くプログラムを作りましょう．</p>
<p><img src="img/chapter01/triforce.png" alt="トライフォース" /> ファイル名は「triforce.js」とすること．</p>
</section>
<section id="好きな図形を描くプログラム" data-number="2.5.5">
<h3 data-number="1.5.5"><span class="header-section-number">1.5.5</span> 好きな図形を描くプログラム</h3>
<p>タートルを使って，好きな絵を描くプログラムを作りましょう．</p>
<p>ファイル名は「myfavorite.js」とすること．</p>
</section>
</section>
</section>
<section id="コンピュータに情報を記憶させてみよう変数" data-number="3">
<h1 data-number="2"><span class="header-section-number">2</span> コンピュータに情報を記憶させてみよう（変数）</h1>
<section id="学習目標-1" data-number="3.1">
<h2 data-number="2.1"><span class="header-section-number">2.1</span> 学習目標</h2>
<ul>
<li>変数の作成（宣言），書き込み（代入），読み込み（評価と値）が使えるようになる</li>
<li>複数の変数（変数名による区別をしつつ）が使えるようになる</li>
<li>計算式（四則演算＋剰余計算）が使えるようになる <!-- - ＣＵＩを使ってユーザ対話をするプログラムが作れるようになる --></li>
</ul>
</section>
<section id="変数" data-number="3.2">
<h2 data-number="2.2"><span class="header-section-number">2.2</span> 変数</h2>
<p>今回新しく“変数”が登場します．家の大きさを変更できる次のプログラムをみてみましょう． 次のプログラムを見てみましょう．</p>
<div class="sourceCode" id="lst:2-1" data-caption="家を書くサンプルプログラム"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:2-1-1"><a href="#lst:2-1-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span> <span class="co">//　タートルを生成する</span></span>
<span id="lst:2-1-2"><a href="#lst:2-1-2"></a></span>
<span id="lst:2-1-3"><a href="#lst:2-1-3"></a><span class="kw">var</span> x<span class="op">;</span> <span class="co">// 変数xを宣言する</span></span>
<span id="lst:2-1-4"><a href="#lst:2-1-4"></a>x <span class="op">=</span> <span class="dv">50</span><span class="op">;</span> <span class="co">// 変数xに値50を代入する</span></span>
<span id="lst:2-1-5"><a href="#lst:2-1-5"></a></span>
<span id="lst:2-1-6"><a href="#lst:2-1-6"></a><span class="co">// 屋根を書く</span></span>
<span id="lst:2-1-7"><a href="#lst:2-1-7"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span> <span class="co">// 30度右に回る</span></span>
<span id="lst:2-1-8"><a href="#lst:2-1-8"></a>t<span class="op">.</span><span class="fu">fd</span>(x)<span class="op">;</span> <span class="co">// x歩前に進む</span></span>
<span id="lst:2-1-9"><a href="#lst:2-1-9"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:2-1-10"><a href="#lst:2-1-10"></a>t<span class="op">.</span><span class="fu">fd</span>(x)<span class="op">;</span></span>
<span id="lst:2-1-11"><a href="#lst:2-1-11"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:2-1-12"><a href="#lst:2-1-12"></a>t<span class="op">.</span><span class="fu">fd</span>(x)<span class="op">;</span></span>
<span id="lst:2-1-13"><a href="#lst:2-1-13"></a></span>
<span id="lst:2-1-14"><a href="#lst:2-1-14"></a><span class="co">// 本体を書く</span></span>
<span id="lst:2-1-15"><a href="#lst:2-1-15"></a>t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:2-1-16"><a href="#lst:2-1-16"></a>t<span class="op">.</span><span class="fu">fd</span>(x)<span class="op">;</span></span>
<span id="lst:2-1-17"><a href="#lst:2-1-17"></a>t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:2-1-18"><a href="#lst:2-1-18"></a>t<span class="op">.</span><span class="fu">fd</span>(x)<span class="op">;</span></span>
<span id="lst:2-1-19"><a href="#lst:2-1-19"></a>t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:2-1-20"><a href="#lst:2-1-20"></a>t<span class="op">.</span><span class="fu">fd</span>(x)<span class="op">;</span></span>
<span id="lst:2-1-21"><a href="#lst:2-1-21"></a>t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:2-1-22"><a href="#lst:2-1-22"></a>t<span class="op">.</span><span class="fu">fd</span>(x)<span class="op">;</span></span></code></pre></div>
<section id="変数と値" data-number="3.2.1">
<h3 data-number="2.2.1"><span class="header-section-number">2.2.1</span> 変数と値</h3>
<p>変数はデータを格納しておく場所のことです． プログラムでは，「メモリ」の許す限り，データを格納しておくことが出来ます．</p>
<p>格納する場所を一つにつき，一つの名前をつけることが出来ます．</p>
<p>実際に格納されるデータのことを「値」といいます．</p>
<figure>
<img src="img/chapter02/table_model_value.gif" alt="" /><figcaption>変数と値</figcaption>
</figure>
</section>
<section id="変数を使ったプログラムの実行" data-number="3.2.2">
<h3 data-number="2.2.2"><span class="header-section-number">2.2.2</span> 変数を使ったプログラムの実行</h3>
<p>プログラムの実行過程と変数を見ていきましょう．</p>
<ol type="1">
<li>変数の宣言
<div class="CJPicture">
<p><br><img src="img/chapter02/table_model_x_01.png" alt="変数の宣言" /></p>
</div></li>
<li>変数へ値を代入する
<div class="CJPicture">
<p><br><img src="img/chapter02/table_model_x_02.png" alt="変数へ値を代入する" /></p>
</div></li>
<li>変数を評価して値にする
<div class="CJPicture">
<p><br><img src="img/chapter02/table_model_x_03.png" alt="変数を評価して値にする" /></p>
</div></li>
</ol>
</section>
<section id="複数の変数と変数名" data-number="3.2.3">
<h3 data-number="2.2.3"><span class="header-section-number">2.2.3</span> 複数の変数と変数名</h3>
<p>変数はいくつでも使うことが出来ます．</p>
<p>区別するために，変数には異なる名前をつけなければなりません．異なる名前ならば基本的には好きな名前をつけることが出来ます．ただし，次のような名前は使えません．</p>
<ul>
<li>数字から始まる名前 (01XXなど)</li>
<li>予約語 (var, for, ifなど，プログラムで使用する名前)</li>
<li>特殊記号は アンダーバー(_), ドル（$）が使用可能，それ以外はNG</li>
</ul>
<section id="複数の変数と変数名-1" data-number="3.2.3.1">
<h4 data-number="2.2.3.1"><span class="header-section-number">2.2.3.1</span> 複数の変数と変数名</h4>
<div class="sourceCode" id="lst:2-1" data-caption="家を書くサンプルプログラム"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:2-1-1"><a href="#lst:2-1-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span> <span class="co">//　タートルを生成する</span></span>
<span id="lst:2-1-2"><a href="#lst:2-1-2"></a></span>
<span id="lst:2-1-3"><a href="#lst:2-1-3"></a><span class="kw">var</span> length<span class="op">;</span><span class="co">// 1辺の長さ</span></span>
<span id="lst:2-1-4"><a href="#lst:2-1-4"></a><span class="kw">var</span> rightAngle<span class="op">;</span><span class="co">// 直角</span></span>
<span id="lst:2-1-5"><a href="#lst:2-1-5"></a></span>
<span id="lst:2-1-6"><a href="#lst:2-1-6"></a>length <span class="op">=</span> <span class="dv">50</span><span class="op">;</span><span class="co">// 1辺の長さを50に設定する</span></span>
<span id="lst:2-1-7"><a href="#lst:2-1-7"></a>rightAngle <span class="op">=</span> <span class="dv">90</span><span class="op">;</span><span class="co">// 直角を90度に設定する</span></span>
<span id="lst:2-1-8"><a href="#lst:2-1-8"></a></span>
<span id="lst:2-1-9"><a href="#lst:2-1-9"></a><span class="co">// 屋根を書く</span></span>
<span id="lst:2-1-10"><a href="#lst:2-1-10"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span> <span class="co">// 30度右に回る</span></span>
<span id="lst:2-1-11"><a href="#lst:2-1-11"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span> <span class="co">// x歩前に進む</span></span>
<span id="lst:2-1-12"><a href="#lst:2-1-12"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:2-1-13"><a href="#lst:2-1-13"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-14"><a href="#lst:2-1-14"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:2-1-15"><a href="#lst:2-1-15"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-16"><a href="#lst:2-1-16"></a></span>
<span id="lst:2-1-17"><a href="#lst:2-1-17"></a><span class="co">// 本体を書く</span></span>
<span id="lst:2-1-18"><a href="#lst:2-1-18"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-19"><a href="#lst:2-1-19"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-20"><a href="#lst:2-1-20"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-21"><a href="#lst:2-1-21"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-22"><a href="#lst:2-1-22"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-23"><a href="#lst:2-1-23"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-24"><a href="#lst:2-1-24"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-25"><a href="#lst:2-1-25"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span></code></pre></div>
</section>
<section id="プログラムの実行過程" data-number="3.2.3.2">
<h4 data-number="2.2.3.2"><span class="header-section-number">2.2.3.2</span> プログラムの実行過程</h4>
<p>プログラムの実行過程を追ってみましょう．</p>
<ol type="1">
<li>変数の宣言
<div class="CJPicture">
<p><br><img src="img/chapter02/table_model_name_01.png" /></p>
</div></li>
<li>変数の宣言
<div class="CJPicture">
<p><br><img src="img/chapter02/table_model_name_02.png" /></p>
</div></li>
<li>変数への値の代入
<div class="CJPicture">
<p><br><img src="img/chapter02/table_model_name_03.png" /></p>
</div></li>
<li>変数への値の代入
<div class="CJPicture">
<p><br><img src="img/chapter02/table_model_name_04.png" /></p>
</div></li>
<li>変数を評価して値にする
<div class="CJPicture">
<p><br><img src="img/chapter02/table_model_name_05.png" /></p>
</div></li>
</ol>
</section>
</section>
</section>
<section id="コンピュータに計算をさせる" data-number="3.3">
<h2 data-number="2.3"><span class="header-section-number">2.3</span> コンピュータに計算をさせる</h2>
<section id="計算式を使ったプログラム" data-number="3.3.1">
<h3 data-number="2.3.1"><span class="header-section-number">2.3.1</span> 計算式を使ったプログラム</h3>
<div class="sourceCode" id="lst:2-1" data-caption="家を書くサンプルプログラム"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:2-1-1"><a href="#lst:2-1-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span> <span class="co">//　タートルを生成する</span></span>
<span id="lst:2-1-2"><a href="#lst:2-1-2"></a></span>
<span id="lst:2-1-3"><a href="#lst:2-1-3"></a><span class="kw">var</span> length <span class="op">=</span> <span class="dv">100</span><span class="op">;</span><span class="co">// 1辺の長さ</span></span>
<span id="lst:2-1-4"><a href="#lst:2-1-4"></a><span class="kw">var</span> smallHouseLength<span class="op">;</span><span class="co">// 小さい家の1辺の長さ</span></span>
<span id="lst:2-1-5"><a href="#lst:2-1-5"></a><span class="kw">var</span> rightAngle <span class="op">=</span> <span class="dv">90</span><span class="op">;</span><span class="co">// 直角</span></span>
<span id="lst:2-1-6"><a href="#lst:2-1-6"></a>smallHouseLength <span class="op">=</span> length <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="lst:2-1-7"><a href="#lst:2-1-7"></a></span>
<span id="lst:2-1-8"><a href="#lst:2-1-8"></a>canvasSize(<span class="dv">400</span><span class="op">,</span><span class="dv">300</span>)<span class="op">;</span><span class="co">// Canvasのサイズを大きくする</span></span>
<span id="lst:2-1-9"><a href="#lst:2-1-9"></a></span>
<span id="lst:2-1-10"><a href="#lst:2-1-10"></a><span class="co">// 屋根を書く</span></span>
<span id="lst:2-1-11"><a href="#lst:2-1-11"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span> <span class="co">// 30度右に回る</span></span>
<span id="lst:2-1-12"><a href="#lst:2-1-12"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span> <span class="co">// x歩前に進む</span></span>
<span id="lst:2-1-13"><a href="#lst:2-1-13"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:2-1-14"><a href="#lst:2-1-14"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-15"><a href="#lst:2-1-15"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:2-1-16"><a href="#lst:2-1-16"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-17"><a href="#lst:2-1-17"></a></span>
<span id="lst:2-1-18"><a href="#lst:2-1-18"></a><span class="co">// 本体を書く</span></span>
<span id="lst:2-1-19"><a href="#lst:2-1-19"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-20"><a href="#lst:2-1-20"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-21"><a href="#lst:2-1-21"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-22"><a href="#lst:2-1-22"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-23"><a href="#lst:2-1-23"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-24"><a href="#lst:2-1-24"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-25"><a href="#lst:2-1-25"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-26"><a href="#lst:2-1-26"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-27"><a href="#lst:2-1-27"></a></span>
<span id="lst:2-1-28"><a href="#lst:2-1-28"></a><span class="co">// 小さい家を書く位置まで移動する</span></span>
<span id="lst:2-1-29"><a href="#lst:2-1-29"></a>t<span class="op">.</span><span class="fu">up</span>()<span class="op">;</span></span>
<span id="lst:2-1-30"><a href="#lst:2-1-30"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle <span class="op">*</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:2-1-31"><a href="#lst:2-1-31"></a>t<span class="op">.</span><span class="fu">fd</span>(length <span class="op">*</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:2-1-32"><a href="#lst:2-1-32"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-33"><a href="#lst:2-1-33"></a>t<span class="op">.</span><span class="fu">down</span>()<span class="op">;</span></span>
<span id="lst:2-1-34"><a href="#lst:2-1-34"></a></span>
<span id="lst:2-1-35"><a href="#lst:2-1-35"></a><span class="co">// 小さい家の屋根を書く</span></span>
<span id="lst:2-1-36"><a href="#lst:2-1-36"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:2-1-37"><a href="#lst:2-1-37"></a>t<span class="op">.</span><span class="fu">fd</span>(smallHouseLength)<span class="op">;</span></span>
<span id="lst:2-1-38"><a href="#lst:2-1-38"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:2-1-39"><a href="#lst:2-1-39"></a>t<span class="op">.</span><span class="fu">fd</span>(smallHouseLength)<span class="op">;</span></span>
<span id="lst:2-1-40"><a href="#lst:2-1-40"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:2-1-41"><a href="#lst:2-1-41"></a>t<span class="op">.</span><span class="fu">fd</span>(smallHouseLength)<span class="op">;</span></span>
<span id="lst:2-1-42"><a href="#lst:2-1-42"></a></span>
<span id="lst:2-1-43"><a href="#lst:2-1-43"></a><span class="co">// 小さい家の本体を書く</span></span>
<span id="lst:2-1-44"><a href="#lst:2-1-44"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-45"><a href="#lst:2-1-45"></a>t<span class="op">.</span><span class="fu">fd</span>(smallHouseLength)<span class="op">;</span></span>
<span id="lst:2-1-46"><a href="#lst:2-1-46"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-47"><a href="#lst:2-1-47"></a>t<span class="op">.</span><span class="fu">fd</span>(smallHouseLength)<span class="op">;</span></span>
<span id="lst:2-1-48"><a href="#lst:2-1-48"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-49"><a href="#lst:2-1-49"></a>t<span class="op">.</span><span class="fu">fd</span>(smallHouseLength)<span class="op">;</span></span>
<span id="lst:2-1-50"><a href="#lst:2-1-50"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-51"><a href="#lst:2-1-51"></a>t<span class="op">.</span><span class="fu">fd</span>(smallHouseLength)<span class="op">;</span></span></code></pre></div>
<p>コンピュータは計算機ですから，計算をさせることが出来ます．例えば，次のように書くと</p>
<p><code>rightAngle * 2</code></p>
<p>掛け算を行うことが出来ます．</p>
<p>このような，計算を行う書法のことを「式」といいます．</p>
<p>Javascriptで使うことが出来る基本的な計算命令を以下に示します．</p>
<p><code>+</code> :足し算をします</p>
<p><code>-</code> :引き算をします</p>
<p><code>*</code> :掛け算をします</p>
<p><code>/</code> :割り算をします</p>
<p><code>%</code> :割り算の余りを求めます</p>
</section>
<section id="計算式を使ったプログラムの実行" data-number="3.3.2">
<h3 data-number="2.3.2"><span class="header-section-number">2.3.2</span> 計算式を使ったプログラムの実行</h3>
<p>次のように評価（計算）されて，具体的な値になり，プログラムが動きます．</p>
<section id="計算式と代入文を使ったプログラムの実行変数の宣言" data-number="3.3.2.1">
<h4 data-number="2.3.2.1"><span class="header-section-number">2.3.2.1</span> 計算式と代入文を使ったプログラムの実行変数の宣言</h4>
<div class="CJPicture">
<figure>
<img src="img/chapter02/table_model_expression_01.png" alt="" /><figcaption>図. 計算式と代入文を使ったプログラムの実行変数の宣言</figcaption>
</figure>
</div>
<p>計算式があっても，右辺から評価されるのは一緒です．</p>
</section>
<section id="変数の宣言" data-number="3.3.2.2">
<h4 data-number="2.3.2.2"><span class="header-section-number">2.3.2.2</span> 変数の宣言</h4>
<div class="CJPicture">
<figure>
<img src="img/chapter02/table_model_expression_02.png" alt="" /><figcaption>図. 変数の宣言</figcaption>
</figure>
</div>
</section>
</section>
</section>
<section id="考えてみよう" class="unnumbered" data-number="">
<h2 class="unnumbered" data-number="-1">考えてみよう</h2>
<p>次のようなプログラムが動かない（構文エラーとなる）のは何故ですか？考えてみましょう．</p>
<p><code>length / 2  = smallHouseLength;</code></p>
</section>
<section id="ユーザと対話するインタラクティブなプログラム" data-number="3.4">
<h2 data-number="2.4"><span class="header-section-number">2.4</span> ユーザと対話する（インタラクティブ）なプログラム</h2>
<section id="入力を受け付ける" data-number="3.4.1">
<h3 data-number="2.4.1"><span class="header-section-number">2.4.1</span> 入力を受け付ける</h3>
<div class="sourceCode" id="lst:2-1" data-caption="家を書くサンプルプログラム"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:2-1-1"><a href="#lst:2-1-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span> <span class="co">//　タートルを生成する</span></span>
<span id="lst:2-1-2"><a href="#lst:2-1-2"></a></span>
<span id="lst:2-1-3"><a href="#lst:2-1-3"></a><span class="kw">var</span> length<span class="op">;</span><span class="co">// 1辺の長さ</span></span>
<span id="lst:2-1-4"><a href="#lst:2-1-4"></a><span class="kw">var</span> rightAngle <span class="op">=</span> <span class="dv">90</span><span class="op">;</span><span class="co">// 直角</span></span>
<span id="lst:2-1-5"><a href="#lst:2-1-5"></a></span>
<span id="lst:2-1-6"><a href="#lst:2-1-6"></a>length <span class="op">=</span> input(<span class="st">&#39;1辺の長さを入力してください&#39;</span>)<span class="op">;</span><span class="co">// 1辺の長さを入力値に設定する</span></span>
<span id="lst:2-1-7"><a href="#lst:2-1-7"></a></span>
<span id="lst:2-1-8"><a href="#lst:2-1-8"></a><span class="co">// 屋根を書く</span></span>
<span id="lst:2-1-9"><a href="#lst:2-1-9"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span> <span class="co">// 30度右に回る</span></span>
<span id="lst:2-1-10"><a href="#lst:2-1-10"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span> <span class="co">// x歩前に進む</span></span>
<span id="lst:2-1-11"><a href="#lst:2-1-11"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:2-1-12"><a href="#lst:2-1-12"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-13"><a href="#lst:2-1-13"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:2-1-14"><a href="#lst:2-1-14"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-15"><a href="#lst:2-1-15"></a></span>
<span id="lst:2-1-16"><a href="#lst:2-1-16"></a><span class="co">// 本体を書く</span></span>
<span id="lst:2-1-17"><a href="#lst:2-1-17"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-18"><a href="#lst:2-1-18"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-19"><a href="#lst:2-1-19"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-20"><a href="#lst:2-1-20"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-21"><a href="#lst:2-1-21"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-22"><a href="#lst:2-1-22"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-23"><a href="#lst:2-1-23"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-24"><a href="#lst:2-1-24"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span></code></pre></div>
<p>ユーザから入力を受け付けるには</p>
<p><code>input()</code> または， <code>input('ここに出したいメッセージを書く')</code></p>
<p>命令を使います．引数にメッセージを指定した場合は，ダイアログに指定したメッセージが表示されます．</p>
</section>
<section id="ユーザにメッセージを出す" data-number="3.4.2">
<h3 data-number="2.4.2"><span class="header-section-number">2.4.2</span> ユーザにメッセージを出す</h3>
<div class="sourceCode" id="lst:2-1" data-caption="オウム返し"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:2-1-1"><a href="#lst:2-1-1"></a><span class="kw">var</span> message<span class="op">;</span></span>
<span id="lst:2-1-2"><a href="#lst:2-1-2"></a></span>
<span id="lst:2-1-3"><a href="#lst:2-1-3"></a>message <span class="op">=</span> input(<span class="st">&#39;メッセージをどうぞ&#39;</span>)<span class="op">;</span></span>
<span id="lst:2-1-4"><a href="#lst:2-1-4"></a>println(message)<span class="op">;</span></span></code></pre></div>
<p>ユーザにメッセージを出すには</p>
<p><code>print('ここに出したいメッセージを書く')</code> または， <code>println('ここに出したいメッセージを書く')</code></p>
<p>命令を使います．</p>
<p>print命令はメッセージを出力し，println命令はメッセージを出力した後改行をします． メッセージはConsole欄に表示されます．</p>
</section>
<section id="文字列" data-number="3.4.3">
<h3 data-number="2.4.3"><span class="header-section-number">2.4.3</span> 文字列</h3>
<p>どちらの命令を使う場合も，出したいメッセージを<code>"</code>（ダブルクォーテーション）または，<code>'</code> （シングルクォーテーション）と中括弧で囲んだ，プログラムでは「文字列」と呼ばれる要素を中括弧の中に入れることで指定してください．</p>
</section>
</section>
<section id="入力-処理-出力" data-number="3.5">
<h2 data-number="2.5"><span class="header-section-number">2.5</span> 入力-処理-出力</h2>
<p>本章で説明した，入力と出力，そして計算を組み合わせて，情報処理システムの基本形である入力ー処理ー出力」の応用プログラムを作ることができます．下記のプログラムは消費税込みの価格を計算するプログラムで，税抜価格と税率の入力をユーザから受け付け，四捨五入した消費税込みの価格を求め，コンソールに出力します．</p>
<div class="sourceCode" id="lst:2-1" data-caption="消費税計算"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:2-1-1"><a href="#lst:2-1-1"></a><span class="co">/* 消費税込みの価格を計算するプログラム */</span></span>
<span id="lst:2-1-2"><a href="#lst:2-1-2"></a></span>
<span id="lst:2-1-3"><a href="#lst:2-1-3"></a><span class="co">//入力</span></span>
<span id="lst:2-1-4"><a href="#lst:2-1-4"></a><span class="kw">var</span> price <span class="op">=</span> input(<span class="st">&#39;税抜価格は?&#39;</span>)<span class="op">;</span></span>
<span id="lst:2-1-5"><a href="#lst:2-1-5"></a><span class="kw">var</span> taxrate <span class="op">=</span> input(<span class="st">&#39;税率(%)は？&#39;</span>)<span class="op">;</span></span>
<span id="lst:2-1-6"><a href="#lst:2-1-6"></a></span>
<span id="lst:2-1-7"><a href="#lst:2-1-7"></a><span class="co">//処理</span></span>
<span id="lst:2-1-8"><a href="#lst:2-1-8"></a><span class="kw">var</span> priceB <span class="op">=</span> price <span class="op">+</span> price <span class="op">*</span> taxrate <span class="op">/</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="lst:2-1-9"><a href="#lst:2-1-9"></a>priceB <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(priceB)<span class="op">;</span><span class="co">//四捨五入する</span></span>
<span id="lst:2-1-10"><a href="#lst:2-1-10"></a></span>
<span id="lst:2-1-11"><a href="#lst:2-1-11"></a><span class="co">//出力</span></span>
<span id="lst:2-1-12"><a href="#lst:2-1-12"></a>println(<span class="st">&#39;税込価格は&#39;</span> <span class="op">+</span> priceB <span class="op">+</span> <span class="st">&#39;円です&#39;</span>)<span class="op">;</span></span></code></pre></div>
<section id="四捨五入" data-number="3.5.1">
<h3 data-number="2.5.1"><span class="header-section-number">2.5.1</span> 四捨五入</h3>
<p><code>priceB = Math.round(priceB);</code>では，<code>Math.round()</code>という四捨五入をする関数を使い，税率をかけたpriceBに対して，四捨五入した結果をpriceBに書き戻しています．</p>
<p>数字を四捨五入，切り上げ，切り捨てする関数は以下の通りです．</p>
<dl>
<dt><code>Math.ceil([数字（変数でもOK）])</code></dt>
<dd>数字を切り上げます．
</dd>
<dt><code>Math.round([数字（変数でもOK）])</code></dt>
<dd>数字を四捨五入します．
</dd>
<dt><code>Math.floor([数字（変数でもOK）])</code></dt>
<dd>数字を切り捨てます．
</dd>
</dl>
</section>
<section id="文字列の連結" data-number="3.5.2">
<h3 data-number="2.5.2"><span class="header-section-number">2.5.2</span> 文字列の連結</h3>
<p>文字列を数字などと連結して出力するには，<code>+</code>記号を使います． <code>'税込価格は' + priceB + '円です'</code>などと，と文字列の間に変数を入れて連結することができます．</p>
</section>
</section>
<section id="乱数" data-number="3.6">
<h2 data-number="2.6"><span class="header-section-number">2.6</span> 乱数</h2>
<section id="命令を呼び出す度に毎回変わる値" data-number="3.6.1">
<h3 data-number="2.6.1"><span class="header-section-number">2.6.1</span> 命令を呼び出す度に毎回変わる値</h3>
<div class="sourceCode" id="lst:2-1" data-caption="家を書くサンプルプログラム"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:2-1-1"><a href="#lst:2-1-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span><span class="co">// タートルを生成する</span></span>
<span id="lst:2-1-2"><a href="#lst:2-1-2"></a></span>
<span id="lst:2-1-3"><a href="#lst:2-1-3"></a><span class="kw">var</span> length<span class="op">;</span><span class="co">// 1辺の長さ</span></span>
<span id="lst:2-1-4"><a href="#lst:2-1-4"></a><span class="kw">var</span> rightAngle <span class="op">=</span> <span class="dv">90</span><span class="op">;</span><span class="co">// 直角</span></span>
<span id="lst:2-1-5"><a href="#lst:2-1-5"></a></span>
<span id="lst:2-1-6"><a href="#lst:2-1-6"></a>length <span class="op">=</span> random(<span class="dv">100</span>)<span class="op">;</span><span class="co">// 1辺の長さを0-99までのランダム値に設定する</span></span>
<span id="lst:2-1-7"><a href="#lst:2-1-7"></a></span>
<span id="lst:2-1-8"><a href="#lst:2-1-8"></a><span class="co">// 屋根を書く</span></span>
<span id="lst:2-1-9"><a href="#lst:2-1-9"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span> <span class="co">// 30度右に回る</span></span>
<span id="lst:2-1-10"><a href="#lst:2-1-10"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span> <span class="co">// x歩前に進む</span></span>
<span id="lst:2-1-11"><a href="#lst:2-1-11"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:2-1-12"><a href="#lst:2-1-12"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-13"><a href="#lst:2-1-13"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:2-1-14"><a href="#lst:2-1-14"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-15"><a href="#lst:2-1-15"></a></span>
<span id="lst:2-1-16"><a href="#lst:2-1-16"></a><span class="co">// 本体を書く</span></span>
<span id="lst:2-1-17"><a href="#lst:2-1-17"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-18"><a href="#lst:2-1-18"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-19"><a href="#lst:2-1-19"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-20"><a href="#lst:2-1-20"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-21"><a href="#lst:2-1-21"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-22"><a href="#lst:2-1-22"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:2-1-23"><a href="#lst:2-1-23"></a>t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:2-1-24"><a href="#lst:2-1-24"></a>t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span></code></pre></div>
<p>乱数値を（命令毎に毎回変わる値）に取得するには</p>
<p><code>random([数字（変数でもOK）])</code></p>
<p>命令を使います．</p>
<p>実行されるごとに異なる値が自動的に選択されます．</p>
<p>「０」から「数の所に書いた数」未満のどれかの数字が選択されます．</p>
<p>（例：random(10)のとき，0から9までの１０種類のどれかの数が選択されます）</p>
</section>
</section>
<section id="練習問題-1" data-number="3.7">
<h2 data-number="2.7"><span class="header-section-number">2.7</span> 練習問題</h2>
<section id="与えられた大きさの正五角形を描くプログラム" data-number="3.7.1">
<h3 data-number="2.7.1"><span class="header-section-number">2.7.1</span> 与えられた大きさの正五角形を描くプログラム</h3>
<p>ユーザの入力を受け取り，その長さを一辺の長さとして正五角形を描くプログラムを作ってください．</p>
<p>ファイル名は「pentagon2.js」とすること．</p>
</section>
<section id="乱数を使って星を描くプログラム" data-number="3.7.2">
<h3 data-number="2.7.2"><span class="header-section-number">2.7.2</span> 乱数を使って星を描くプログラム</h3>
<p>長さに乱数を使い，実行するたびに大きさが変わる星を描くプログラムを作ってください． 乱数は50以上100未満の間になるようにすること．(難しければ，0以上100未満になるように作ってください)</p>
<p>ファイル名は「star2.js」とすること．</p>
</section>
<section id="割り算プログラム" data-number="3.7.3">
<h3 data-number="2.7.3"><span class="header-section-number">2.7.3</span> 割り算プログラム</h3>
<p>ユーザから２つの数，a, bを受け取り，以下のような出力をするプログラムを作ってください．</p>
<pre><code>a / b の商(整数部分)は [答え] です．
a / b の余りは [答え] です．</code></pre>
<p>出力例</p>
<pre><code>13 / 5 の商(整数部分)は 2 です．
13 / 5 の余りは 3 です．</code></pre>
<p>ファイル名は「division.js」とすること．</p>
</section>
<section id="入力ー処理ー出力のプログラム" data-number="3.7.4">
<h3 data-number="2.7.4"><span class="header-section-number">2.7.4</span> 入力ー処理ー出力のプログラム</h3>
<p>例題の消費税計算プログラムのように，なにかシンプル処理をする入力ー処理ー出力の形のプログラムを作ってください．</p>
<p>ファイル名は「simpleio.js」とすること．</p>
</section>
</section>
</section>
<section id="プログラムに知性を条件分岐" data-number="4">
<h1 data-number="3"><span class="header-section-number">3</span> プログラムに知性を(条件分岐)</h1>
<section id="学習目標-2" data-number="4.1">
<h2 data-number="3.1"><span class="header-section-number">3.1</span> 学習目標</h2>
<ul>
<li>条件分岐のあるプログラムの実行順序を理解し，応用してプログラムが書けるようになる</li>
<li>比較演算子，論理演算子をつかって条件式を記述することができるようになる</li>
<li>変数の有効範囲について，ブロックという言葉を用いて説明できるようになる</li>
</ul>
</section>
<section id="条件分岐を使う" data-number="4.2">
<h2 data-number="3.2"><span class="header-section-number">3.2</span> 条件分岐を使う</h2>
<p>今回のテーマは条件に応じて動作が変化するプログラムを書くことです．</p>
<p>ユーザの入力に応じた絵を書かせてみましょう．</p>
<section id="条件分岐" data-number="4.2.1">
<h3 data-number="3.2.1"><span class="header-section-number">3.2.1</span> 条件分岐</h3>
<p>次のプログラムを見てみましょう．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:3-1&#39;)">c</span></p>
<div class="sourceCode" id="lst:3-1" data-caption="Condition"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:3-1-1"><a href="#lst:3-1-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:3-1-2"><a href="#lst:3-1-2"></a></span>
<span id="lst:3-1-3"><a href="#lst:3-1-3"></a><span class="kw">var</span> pictureNumber<span class="op">;</span><span class="co">// 絵の番号</span></span>
<span id="lst:3-1-4"><a href="#lst:3-1-4"></a></span>
<span id="lst:3-1-5"><a href="#lst:3-1-5"></a><span class="co">// ユーザから入力を受け取る</span></span>
<span id="lst:3-1-6"><a href="#lst:3-1-6"></a>pictureNumber <span class="op">=</span> input(<span class="st">&#39;書きたい絵の番号を入力してください．(1.家, 2.星)&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-1-7"><a href="#lst:3-1-7"></a></span>
<span id="lst:3-1-8"><a href="#lst:3-1-8"></a><span class="cf">if</span> (pictureNumber <span class="op">==</span> <span class="dv">1</span>) {<span class="co">// 入力された番号が1ならば家を書く</span></span>
<span id="lst:3-1-9"><a href="#lst:3-1-9"></a>    <span class="kw">var</span> length <span class="op">=</span> <span class="dv">50</span><span class="op">;</span><span class="co">// 1辺の長さ</span></span>
<span id="lst:3-1-10"><a href="#lst:3-1-10"></a>    <span class="kw">var</span> rightAngle <span class="op">=</span> <span class="dv">90</span><span class="op">;</span><span class="co">// 直角</span></span>
<span id="lst:3-1-11"><a href="#lst:3-1-11"></a></span>
<span id="lst:3-1-12"><a href="#lst:3-1-12"></a>    <span class="co">// 屋根を書く</span></span>
<span id="lst:3-1-13"><a href="#lst:3-1-13"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span> <span class="co">// 30度右に回る</span></span>
<span id="lst:3-1-14"><a href="#lst:3-1-14"></a>    t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span> <span class="co">// x歩前に進む</span></span>
<span id="lst:3-1-15"><a href="#lst:3-1-15"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:3-1-16"><a href="#lst:3-1-16"></a>    t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:3-1-17"><a href="#lst:3-1-17"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:3-1-18"><a href="#lst:3-1-18"></a>    t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:3-1-19"><a href="#lst:3-1-19"></a></span>
<span id="lst:3-1-20"><a href="#lst:3-1-20"></a>    <span class="co">// 本体を書く</span></span>
<span id="lst:3-1-21"><a href="#lst:3-1-21"></a>    t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:3-1-22"><a href="#lst:3-1-22"></a>    t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:3-1-23"><a href="#lst:3-1-23"></a>    t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:3-1-24"><a href="#lst:3-1-24"></a>    t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:3-1-25"><a href="#lst:3-1-25"></a>    t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:3-1-26"><a href="#lst:3-1-26"></a>    t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:3-1-27"><a href="#lst:3-1-27"></a>    t<span class="op">.</span><span class="fu">lt</span>(rightAngle)<span class="op">;</span></span>
<span id="lst:3-1-28"><a href="#lst:3-1-28"></a>    t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:3-1-29"><a href="#lst:3-1-29"></a></span>
<span id="lst:3-1-30"><a href="#lst:3-1-30"></a>} <span class="cf">else</span> {<span class="co">// 入力された番号が1以外ならば星を書く</span></span>
<span id="lst:3-1-31"><a href="#lst:3-1-31"></a></span>
<span id="lst:3-1-32"><a href="#lst:3-1-32"></a>    <span class="kw">var</span> length <span class="op">=</span> <span class="dv">100</span><span class="op">;</span><span class="co">// 1辺の長さ</span></span>
<span id="lst:3-1-33"><a href="#lst:3-1-33"></a>    <span class="kw">var</span> angle <span class="op">=</span> <span class="dv">144</span><span class="op">;</span><span class="co">// 星を書くときに曲がる角度</span></span>
<span id="lst:3-1-34"><a href="#lst:3-1-34"></a></span>
<span id="lst:3-1-35"><a href="#lst:3-1-35"></a>    <span class="co">// 星を書く</span></span>
<span id="lst:3-1-36"><a href="#lst:3-1-36"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">18</span>)<span class="op">;</span></span>
<span id="lst:3-1-37"><a href="#lst:3-1-37"></a>    t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:3-1-38"><a href="#lst:3-1-38"></a>    t<span class="op">.</span><span class="fu">rt</span>(angle)<span class="op">;</span></span>
<span id="lst:3-1-39"><a href="#lst:3-1-39"></a>    t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:3-1-40"><a href="#lst:3-1-40"></a>    t<span class="op">.</span><span class="fu">rt</span>(angle)<span class="op">;</span></span>
<span id="lst:3-1-41"><a href="#lst:3-1-41"></a>    t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:3-1-42"><a href="#lst:3-1-42"></a>    t<span class="op">.</span><span class="fu">rt</span>(angle)<span class="op">;</span></span>
<span id="lst:3-1-43"><a href="#lst:3-1-43"></a>    t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:3-1-44"><a href="#lst:3-1-44"></a>    t<span class="op">.</span><span class="fu">rt</span>(angle)<span class="op">;</span></span>
<span id="lst:3-1-45"><a href="#lst:3-1-45"></a>    t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:3-1-46"><a href="#lst:3-1-46"></a>}</span></code></pre></div>
<p>いままでのプログラムでは，処理（命令）が必ず上から順番に全て実行されていました． これを順次実行といいます．</p>
<p>今回登場する「条件分岐」を使うと，処理の実行される順番を変更，制御することができます．</p>
<p>条件分岐の一般的な形は次のとおりです．</p>
<pre><code>if( [条件式] ) {
    処理A
} else {
    処理B
}</code></pre>
<p>条件式が成立(true)のした場合には，処理Aが実行され，処理Bは実行されません．</p>
<p>逆に条件式が不成立(false)の場合には，処理Bが実行され，処理Aは実行されません．</p>
<p>これをフローチャートと呼ばれる図を用いて書くと，次のようになります．</p>
<figure>
<img src="img/chapter03/if_flow_chart.gif" alt="" /><figcaption>条件分岐のフローチャート</figcaption>
</figure>
</section>
<section id="ブロック" data-number="4.2.2">
<h3 data-number="3.2.2"><span class="header-section-number">3.2.2</span> ブロック</h3>
<p>条件分岐のプログラムなどに出てくる，中括弧で囲まれた部分をブロックと呼びます． ブロックの基本機能は，複数の処理（命令）をまとめて扱うことができる点で，例えば，</p>
<pre><code>{
    fd(100);
    rt(90);
}</code></pre>
<p>のように書くと，fd(100);とrt(90);の２つの処理をまとめて扱うことができるので，</p>
<pre><code>if(条件式){
    fd(100);
    rt(90);
}</code></pre>
<p>と書くことによって，条件式が成立した場合に，複数の処理のまとまりを実行する，というようなプログラムを書けるようになります．</p>
<p>プログラムは複数のブロックから構成されます．ブロックの中にブロックを入れる（入れ子にする）ことも出来ます．ブロックの入れ子については，第５章で説明します．</p>
</section>
<section id="インデント字下げ" data-number="4.2.3">
<h3 data-number="3.2.3"><span class="header-section-number">3.2.3</span> インデント（字下げ）</h3>
<p>ブロックを作成した場合には，プログラムを字下げ（インデントをつける）すると括弧の対応関係やブロックの範囲，ブロック内外の区別等が分かりやすくなります．</p>
<div class="CJPictureS">
<figure>
<img src="img/chapter05/indent.png" alt="" /><figcaption>インデント</figcaption>
</figure>
</div>
<p>プログラムがきちんとできていればインデントをつけていなくてもプログラムは動作しますが，インデントがができていないために構文エラーを見逃して，動かない場合が非常に多いので，プロも初学者も，インデントは必ずつけてください．</p>
<p>コンピューティング実習では，インデントがつけられていないプログラムは課題受理しません．</p>
<p>Sumatra環境では，<a href="Ctrlキーを押しながらsキーを押す">Ctrl-s</a>で，フォーマット（自動的に字下げをすること）ができます．</p>
<!-- 上記のプログラムの２つのブロックは，空ブロックといって，プログラムとしては必要はないのですが（実際に取り払ってもプログラムは動きます），人間がプログラムのまとまりを把握しやすいようにブロックを記述しています．カッコの対応があっていないと，構文エラーになりますので注意してください． -->
</section>
<section id="条件式の評価" data-number="4.2.4">
<h3 data-number="3.2.4"><span class="header-section-number">3.2.4</span> 条件式の評価</h3>
<p>条件式の評価の過程を見ていきましょう．</p>
<ol type="1">
<li>成立(true)する場合
<div class="CJPicture">
<p><br><img src="img/chapter03/condition_true.png" /></p>
</div></li>
<li>不成立(false)する場合
<div class="CJPicture">
<p><br><img src="img/chapter03/condition_false.png" /></p>
</div></li>
<li>注意すること</li>
</ol>
<p>注意することは，条件式で，同じかどうか調べるには「==」(イコールを2つ)にしなければならないことです． これに対して，「=」(イコール1つ)は代入ですので，注意してください．</p>
</section>
<section id="else節の省略" data-number="4.2.5">
<h3 data-number="3.2.5"><span class="header-section-number">3.2.5</span> else節の省略</h3>
<p>elseブロックは必要が無ければ省略できます．次のような形になります．</p>
<pre><code>if( [条件式] ) {
    処理A
}</code></pre>
<p>このように書くと，条件式が成立した時に処理Aが実行され，不成立の時には処理Aを飛ばします．</p>
</section>
<section id="複数の分岐" data-number="4.2.6">
<h3 data-number="3.2.6"><span class="header-section-number">3.2.6</span> 複数の分岐</h3>
<section id="じゃんけんプログラム" data-number="4.2.6.1">
<h4 data-number="3.2.6.1"><span class="header-section-number">3.2.6.1</span> じゃんけんプログラム</h4>
<p>複数に分岐するプログラムを書くこともできます．</p>
<p>次のじゃんけんプログラムを見てみましょう．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:3-2&#39;)">c</span></p>
<div class="sourceCode" id="lst:3-2" data-caption="Janken"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:3-2-1"><a href="#lst:3-2-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:3-2-2"><a href="#lst:3-2-2"></a></span>
<span id="lst:3-2-3"><a href="#lst:3-2-3"></a><span class="kw">var</span> handNumber<span class="op">;</span><span class="co">// じゃんけんの手</span></span>
<span id="lst:3-2-4"><a href="#lst:3-2-4"></a></span>
<span id="lst:3-2-5"><a href="#lst:3-2-5"></a><span class="co">// じゃんけんの手は　1をグー,2をチョキ,3をパーとする</span></span>
<span id="lst:3-2-6"><a href="#lst:3-2-6"></a>handNumber <span class="op">=</span> random(<span class="dv">3</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// random(3)は0から2までの値を発生するので1を足す</span></span>
<span id="lst:3-2-7"><a href="#lst:3-2-7"></a></span>
<span id="lst:3-2-8"><a href="#lst:3-2-8"></a><span class="cf">if</span> (handNumber <span class="op">==</span> <span class="dv">1</span>) {<span class="co">//グーを書く</span></span>
<span id="lst:3-2-9"><a href="#lst:3-2-9"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:3-2-10"><a href="#lst:3-2-10"></a>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">30</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">25</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">60</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">25</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">150</span>)<span class="op">;</span></span>
<span id="lst:3-2-11"><a href="#lst:3-2-11"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">30</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">180</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:3-2-12"><a href="#lst:3-2-12"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">5</span>)<span class="op">;</span></span>
<span id="lst:3-2-13"><a href="#lst:3-2-13"></a>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:3-2-14"><a href="#lst:3-2-14"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">5</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span></span>
<span id="lst:3-2-15"><a href="#lst:3-2-15"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:3-2-16"><a href="#lst:3-2-16"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">5</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span></span>
<span id="lst:3-2-17"><a href="#lst:3-2-17"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">65</span>)<span class="op">;</span></span>
<span id="lst:3-2-18"><a href="#lst:3-2-18"></a></span>
<span id="lst:3-2-19"><a href="#lst:3-2-19"></a>} <span class="cf">else</span> <span class="cf">if</span> (handNumber <span class="op">==</span> <span class="dv">2</span>) {<span class="co">//チョキを書く</span></span>
<span id="lst:3-2-20"><a href="#lst:3-2-20"></a></span>
<span id="lst:3-2-21"><a href="#lst:3-2-21"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">30</span>)<span class="op">;</span>    </span>
<span id="lst:3-2-22"><a href="#lst:3-2-22"></a>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">30</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">25</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">60</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">25</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">150</span>)<span class="op">;</span></span>
<span id="lst:3-2-23"><a href="#lst:3-2-23"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">30</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">180</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">30</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">15</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span></span>
<span id="lst:3-2-24"><a href="#lst:3-2-24"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">105</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">75</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">75</span>)<span class="op">;</span></span>
<span id="lst:3-2-25"><a href="#lst:3-2-25"></a>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">75</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">75</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span></span>
<span id="lst:3-2-26"><a href="#lst:3-2-26"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">105</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">105</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">5</span>)<span class="op">;</span></span>
<span id="lst:3-2-27"><a href="#lst:3-2-27"></a>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:3-2-28"><a href="#lst:3-2-28"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">5</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span></span>
<span id="lst:3-2-29"><a href="#lst:3-2-29"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">65</span>)<span class="op">;</span></span>
<span id="lst:3-2-30"><a href="#lst:3-2-30"></a></span>
<span id="lst:3-2-31"><a href="#lst:3-2-31"></a>} <span class="cf">else</span> <span class="cf">if</span> (handNumber <span class="op">==</span> <span class="dv">3</span>) {<span class="co">//パーを書く</span></span>
<span id="lst:3-2-32"><a href="#lst:3-2-32"></a></span>
<span id="lst:3-2-33"><a href="#lst:3-2-33"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:3-2-34"><a href="#lst:3-2-34"></a>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">30</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">60</span>)<span class="op">;</span></span>
<span id="lst:3-2-35"><a href="#lst:3-2-35"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">40</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">150</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">15</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:3-2-36"><a href="#lst:3-2-36"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">5</span>)<span class="op">;</span></span>
<span id="lst:3-2-37"><a href="#lst:3-2-37"></a>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:3-2-38"><a href="#lst:3-2-38"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">5</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span></span>
<span id="lst:3-2-39"><a href="#lst:3-2-39"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:3-2-40"><a href="#lst:3-2-40"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">5</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span></span>
<span id="lst:3-2-41"><a href="#lst:3-2-41"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">80</span>)<span class="op">;</span>      t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">75</span>)<span class="op">;</span></span>
<span id="lst:3-2-42"><a href="#lst:3-2-42"></a></span>
<span id="lst:3-2-43"><a href="#lst:3-2-43"></a>} <span class="cf">else</span> { <span class="co">// 1,2,3以外の場合</span></span>
<span id="lst:3-2-44"><a href="#lst:3-2-44"></a></span>
<span id="lst:3-2-45"><a href="#lst:3-2-45"></a>    println(<span class="st">&#39;不正な数です．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-2-46"><a href="#lst:3-2-46"></a></span>
<span id="lst:3-2-47"><a href="#lst:3-2-47"></a>}</span></code></pre></div>
</section>
<section id="じゃんけんの手のデータの扱いについて" data-number="4.2.6.2">
<h4 data-number="3.2.6.2"><span class="header-section-number">3.2.6.2</span> じゃんけんの手のデータの扱いについて</h4>
<p>じゃんけんプログラムのような現実問題を扱うときに問題となるのは， データ（グー，チョキ，パーの手）をどうコンピュータで扱えるようにするかです． コンピュータでは，そのままこの概念を表すことができないので， ここでは，1,2,3の数値で表すという方法で実現することを考えましょう．</p>
<figure>
<img src="img/chapter03/janken_data_model.gif" alt="" /><figcaption>じゃんけんのデータの表現</figcaption>
</figure>
</section>
<section id="じゃんけんの手をどのようにプログラムのデータとして扱うか" data-number="4.2.6.3">
<h4 data-number="3.2.6.3"><span class="header-section-number">3.2.6.3</span> じゃんけんの手をどのようにプログラムのデータとして扱うか</h4>
<p>このように，現実に即したプログラムを作成するためには， データをコンピュータが扱う形式に変換するという作業が必要になります． この作業のことをデータ構造の設計(モデル化)といいます．</p>
</section>
</section>
<section id="複数の条件分岐" data-number="4.2.7">
<h3 data-number="3.2.7"><span class="header-section-number">3.2.7</span> 複数の条件分岐</h3>
<p>else if 文を使うと，複数にわたる条件分岐を記述することができます．</p>
<p>記述例(書式)を以下に示します．ちなみに，一つのif文に対して，else if文はいくつでも書くことができます．</p>
<pre><code>if( [条件式] ) {
    処理A
} else if( [条件式] ) {
    処理B
} else{
    処理C
}</code></pre>
<p>この場合のフローチャートは次のようになります．</p>
<figure>
<img src="img/chapter03/ifelse_flow_chart.gif" alt="" /><figcaption>複数にわたる条件分岐のフローチャート</figcaption>
</figure>
</section>
</section>
<section id="いろいろな条件式" data-number="4.3">
<h2 data-number="3.3"><span class="header-section-number">3.3</span> いろいろな条件式</h2>
<section id="比較演算子" data-number="4.3.1">
<h3 data-number="3.3.1"><span class="header-section-number">3.3.1</span> 比較演算子</h3>
<p>次のプログラムを見てみましょう．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:3-3&#39;)">c</span></p>
<div class="sourceCode" id="lst:3-3" data-caption="Rohrer"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:3-3-1"><a href="#lst:3-3-1"></a><span class="kw">var</span> height<span class="op">;</span> <span class="co">// 身長</span></span>
<span id="lst:3-3-2"><a href="#lst:3-3-2"></a><span class="kw">var</span> weight<span class="op">;</span> <span class="co">// 体重</span></span>
<span id="lst:3-3-3"><a href="#lst:3-3-3"></a><span class="kw">var</span> rohrer<span class="op">;</span> <span class="co">// ローレル指数</span></span>
<span id="lst:3-3-4"><a href="#lst:3-3-4"></a></span>
<span id="lst:3-3-5"><a href="#lst:3-3-5"></a><span class="co">// ユーザの入力を受け取る</span></span>
<span id="lst:3-3-6"><a href="#lst:3-3-6"></a>height <span class="op">=</span> input(<span class="st">&#39;身長を入力してください&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-3-7"><a href="#lst:3-3-7"></a>weight <span class="op">=</span> input(<span class="st">&#39;体重を入力してください&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-3-8"><a href="#lst:3-3-8"></a></span>
<span id="lst:3-3-9"><a href="#lst:3-3-9"></a><span class="co">// ローレル指数を求める</span></span>
<span id="lst:3-3-10"><a href="#lst:3-3-10"></a>rohrer <span class="op">=</span> weight <span class="op">*</span> <span class="dv">10000000</span> <span class="op">/</span> height <span class="op">/</span> height <span class="op">/</span> height<span class="op">;</span></span>
<span id="lst:3-3-11"><a href="#lst:3-3-11"></a>println(<span class="st">&#39;ローレル指数は&#39;</span> <span class="op">+</span> rohrer <span class="op">+</span> <span class="st">&#39;です．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-3-12"><a href="#lst:3-3-12"></a></span>
<span id="lst:3-3-13"><a href="#lst:3-3-13"></a><span class="co">// 体型に対するコメントを提示する</span></span>
<span id="lst:3-3-14"><a href="#lst:3-3-14"></a><span class="cf">if</span> (rohrer <span class="op">&lt;</span> <span class="dv">100</span>) {</span>
<span id="lst:3-3-15"><a href="#lst:3-3-15"></a>    println(<span class="st">&#39;やせすぎですね．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-3-16"><a href="#lst:3-3-16"></a>} <span class="cf">else</span> <span class="cf">if</span> (rohrer <span class="op">&lt;</span> <span class="dv">115</span>) {</span>
<span id="lst:3-3-17"><a href="#lst:3-3-17"></a>    println(<span class="st">&#39;やせていますね．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-3-18"><a href="#lst:3-3-18"></a>} <span class="cf">else</span> <span class="cf">if</span> (rohrer <span class="op">&lt;</span> <span class="dv">145</span>) {</span>
<span id="lst:3-3-19"><a href="#lst:3-3-19"></a>    println(<span class="st">&#39;普通ですね．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-3-20"><a href="#lst:3-3-20"></a>} <span class="cf">else</span> <span class="cf">if</span> (rohrer <span class="op">&lt;</span> <span class="dv">160</span>) {</span>
<span id="lst:3-3-21"><a href="#lst:3-3-21"></a>    println(<span class="st">&#39;太っていますね．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-3-22"><a href="#lst:3-3-22"></a>} <span class="cf">else</span> {</span>
<span id="lst:3-3-23"><a href="#lst:3-3-23"></a>    println(<span class="st">&#39;太りすぎですね．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-3-24"><a href="#lst:3-3-24"></a>}</span></code></pre></div>
<p>今度のプログラムでは，ローレル指数の範囲に対応して，メッセージが変わっていますね． このように，プログラムでは，変数に入っている値が同じかどうかを調べるだけでなく， 大きさの大小を比較して，条件を判定することもできます．</p>
<p>表. Javascriptで使える数値の比較演算子</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">演算子</th>
<th style="text-align: center;">表記例</th>
<th style="text-align: right;">評価</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">==</td>
<td style="text-align: center;">A==B</td>
<td style="text-align: right;">AとBが同じ値の時成立(true)</td>
</tr>
<tr class="even">
<td style="text-align: center;">!=</td>
<td style="text-align: center;">A!=B</td>
<td style="text-align: right;">AとBが同じ値でない時成立(true)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">&gt;</td>
<td style="text-align: center;">A&gt;B</td>
<td style="text-align: right;">AがBより大きい時成立(true)</td>
</tr>
<tr class="even">
<td style="text-align: center;">&lt;</td>
<td style="text-align: center;">A&lt;B</td>
<td style="text-align: right;">AがBより小さい時成立(true)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">&gt;=</td>
<td style="text-align: center;">A&gt;=B</td>
<td style="text-align: right;">AがB以上の時成立(true)</td>
</tr>
<tr class="even">
<td style="text-align: center;">&lt;=</td>
<td style="text-align: center;">A&lt;=B</td>
<td style="text-align: right;">AがB以下の時成立(true)</td>
</tr>
</tbody>
</table>
</section>
<section id="論理演算子" data-number="4.3.2">
<h3 data-number="3.3.2"><span class="header-section-number">3.3.2</span> 論理演算子</h3>
<p>次のプログラムを見てみましょう．</p>
<section id="rohrer2" data-number="4.3.2.1">
<h4 data-number="3.3.2.1"><span class="header-section-number">3.3.2.1</span> Rohrer2</h4>
<p><span class="CopyButton" onclick="copycode(&#39;lst:3-4&#39;)">c</span></p>
<div class="sourceCode" id="lst:3-4" data-caption="Rohrer2"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:3-4-1"><a href="#lst:3-4-1"></a><span class="kw">var</span> height<span class="op">;</span> <span class="co">// 身長</span></span>
<span id="lst:3-4-2"><a href="#lst:3-4-2"></a><span class="kw">var</span> weight<span class="op">;</span> <span class="co">// 体重</span></span>
<span id="lst:3-4-3"><a href="#lst:3-4-3"></a><span class="kw">var</span> rohrer<span class="op">;</span> <span class="co">// ローレル指数</span></span>
<span id="lst:3-4-4"><a href="#lst:3-4-4"></a></span>
<span id="lst:3-4-5"><a href="#lst:3-4-5"></a><span class="co">// ユーザの入力を受け取る</span></span>
<span id="lst:3-4-6"><a href="#lst:3-4-6"></a>height <span class="op">=</span> input(<span class="st">&#39;身長を入力してください&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-4-7"><a href="#lst:3-4-7"></a>weight <span class="op">=</span> input(<span class="st">&#39;体重を入力してください&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-4-8"><a href="#lst:3-4-8"></a></span>
<span id="lst:3-4-9"><a href="#lst:3-4-9"></a><span class="co">// ローレル指数を求める</span></span>
<span id="lst:3-4-10"><a href="#lst:3-4-10"></a>rohrer <span class="op">=</span> weight <span class="op">*</span> <span class="dv">10000000</span> <span class="op">/</span> height <span class="op">/</span> height <span class="op">/</span> height<span class="op">;</span></span>
<span id="lst:3-4-11"><a href="#lst:3-4-11"></a>println(<span class="st">&#39;ローレル指数は&#39;</span> <span class="op">+</span> rohrer <span class="op">+</span> <span class="st">&#39;です．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-4-12"><a href="#lst:3-4-12"></a></span>
<span id="lst:3-4-13"><a href="#lst:3-4-13"></a><span class="co">// 体型に対するコメントを提示する</span></span>
<span id="lst:3-4-14"><a href="#lst:3-4-14"></a><span class="cf">if</span> (rohrer <span class="op">&lt;</span> <span class="dv">100</span>) {</span>
<span id="lst:3-4-15"><a href="#lst:3-4-15"></a>    println(<span class="st">&#39;やせすぎですね．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-4-16"><a href="#lst:3-4-16"></a>}</span>
<span id="lst:3-4-17"><a href="#lst:3-4-17"></a><span class="cf">if</span> (rohrer <span class="op">&gt;=</span> <span class="dv">100</span> <span class="op">&amp;&amp;</span> rohrer <span class="op">&lt;</span> <span class="dv">115</span>) {</span>
<span id="lst:3-4-18"><a href="#lst:3-4-18"></a>    println(<span class="st">&#39;やせていますね．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-4-19"><a href="#lst:3-4-19"></a>}</span>
<span id="lst:3-4-20"><a href="#lst:3-4-20"></a><span class="cf">if</span> (rohrer <span class="op">&gt;=</span> <span class="dv">115</span> <span class="op">&amp;&amp;</span> rohrer <span class="op">&lt;</span> <span class="dv">145</span>) {</span>
<span id="lst:3-4-21"><a href="#lst:3-4-21"></a>    println(<span class="st">&#39;普通ですね．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-4-22"><a href="#lst:3-4-22"></a>}</span>
<span id="lst:3-4-23"><a href="#lst:3-4-23"></a><span class="cf">if</span> (rohrer <span class="op">&gt;=</span> <span class="dv">145</span> <span class="op">&amp;&amp;</span> rohrer <span class="op">&lt;</span> <span class="dv">160</span>) {</span>
<span id="lst:3-4-24"><a href="#lst:3-4-24"></a>    println(<span class="st">&#39;太っていますね．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-4-25"><a href="#lst:3-4-25"></a>}</span>
<span id="lst:3-4-26"><a href="#lst:3-4-26"></a><span class="cf">if</span> (rohrer <span class="op">&gt;=</span> <span class="dv">160</span>) {</span>
<span id="lst:3-4-27"><a href="#lst:3-4-27"></a>    println(<span class="st">&#39;太りすぎですね．&#39;</span>)<span class="op">;</span></span>
<span id="lst:3-4-28"><a href="#lst:3-4-28"></a>}</span></code></pre></div>
<p>今度のプログラムも，前例とやっていることは同じなのですが，条件文がちょっと異なっていますね．</p>
<p>論理演算子を使うと，2つの条件式を使って，それらの条件が両方とも(And)もしくは， どちらか(Or)が成立した時のように，組み合わされた条件式全体の条件を判定することができます．</p>
<p>表 Javascriptで使える論理演算子</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">演算子</th>
<th style="text-align: center;">表記例</th>
<th style="text-align: right;">意味</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>&amp;&amp;</code></td>
<td style="text-align: center;">A&amp;&amp;B</td>
<td style="text-align: right;">AとB両方ともtrueの時true</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>||</code></td>
<td style="text-align: center;">A||B</td>
<td style="text-align: right;">AもしくはBがtrueの時true</td>
</tr>
</tbody>
</table>
</section>
<section id="論理演算子の評価の過程" data-number="4.3.2.2">
<h4 data-number="3.3.2.2"><span class="header-section-number">3.3.2.2</span> 論理演算子の評価の過程</h4>
<p>論理演算子の評価の過程を見ていきましょう．</p>
<ol type="1">
<li>And演算子が成立(true)する場合
<div class="CJPicture">
<p><br><img src="img/chapter03/condition_logic_and_true.png" /></p>
</div></li>
<li>And演算子が不成立(false)する場合
<div class="CJPicture">
<p><br><img src="img/chapter03/condition_logic_and_false.png" /></p>
</div></li>
</ol>
</section>
</section>
</section>
<section id="コラム条件式の誤り" class="unnumbered" data-number="">
<h2 class="unnumbered" data-number="-1">コラム：条件式の誤り</h2>
<p>初学者が間違えやすい条件式の誤りを紹介します．特に複数の条件を指定するときには，上記の論理演算子を使うようにして，独自の記法を使わないでください．</p>
<ul>
<li>カンマを使った複数条件指定はできません</li>
</ul>
<p>＜誤＞</p>
<pre><code>if(a === 1, 2)</code></pre>
<pre><code>if(a === 1, a === 2)</code></pre>
<p>＜正＞</p>
<pre><code>if(a === 1 || a === 2)</code></pre>
<p>この場合は，1か2を指定したかったのでしょうから，ORで条件を指定します．</p>
<ul>
<li>複数の条件をまとめて書くことはできません．</li>
</ul>
<p>＜誤＞</p>
<pre><code>if(1 &lt; a &lt; 100)</code></pre>
<p>＜正＞</p>
<pre><code>if(1 &lt; a &amp;&amp; a &lt; 100)</code></pre>
<p>複数の条件も一つ一つ分けて，論理演算子でつなぐようにしてください．</p>
</section>
<section id="変数のスコープ有効範囲" data-number="4.4">
<h2 data-number="3.4"><span class="header-section-number">3.4</span> 変数のスコープ（有効範囲）</h2>
<p>変数には有効範囲（スコープといいます）があります．Javascriptでは基本的に，宣言した変数のブロック内(「{}」で囲まれた範囲)がスコープになります．</p>
<p>例えば，次のような例の場合の各変数のスコープは下表のようになります．</p>
<pre><code>var z;
    
if( [条件式] ) {

    var x;
    処理A
    
} else {

    var y;
    処理B
    
}</code></pre>
<p>表. 変数のスコープ</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">変数名</th>
<th style="text-align: right;">処理A</th>
<th style="text-align: right;">処理B</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">x</td>
<td style="text-align: right;">有効</td>
<td style="text-align: right;">無効</td>
</tr>
<tr class="even">
<td style="text-align: center;">y</td>
<td style="text-align: right;">無効</td>
<td style="text-align: right;">有効</td>
</tr>
<tr class="odd">
<td style="text-align: center;">z</td>
<td style="text-align: right;">有効</td>
<td style="text-align: right;">有効</td>
</tr>
</tbody>
</table>
<p>スコープ外で変数を呼び出そうとすると，エラーが出ます．</p>
<p>スコープ外なら同じ変数名を使うことができます． その場合，それぞれの変数が違う値を持つことになります．</p>
</section>
<section id="練習問題-2" data-number="4.5">
<h2 data-number="3.5"><span class="header-section-number">3.5</span> 練習問題</h2>
<section id="絵の描き分けプログラム" data-number="4.5.1">
<h3 data-number="3.5.1"><span class="header-section-number">3.5.1</span> 絵の描き分けプログラム</h3>
<p>前回作ったプログラムを改造して，条件式を使って， ユーザの入力に応じて，タートルの書く絵を変えるプログラムを書いてください． 余裕がある人は，条件文を駆使して実用的なプログラムに挑戦してみてください．</p>
<p>ファイル名は「figureshop.js」とすること．</p>
</section>
<section id="評点グレード変換プログラム" data-number="4.5.2">
<h3 data-number="3.5.2"><span class="header-section-number">3.5.2</span> 評点グレード変換プログラム</h3>
<p>入力と条件分岐を使って，「秀」「優」「良」「可」「不可」を表示するプログラムを作りましょう． ユーザが評点を入力すると，それに応じたグレードが表示されるようにプログラムを書いてください．ただし，90点以上が秀，80点以上が優，70点以上が良，60点以上が可，それ以外は不可とする．</p>
<p>ファイル名は「grade.js」とすること．</p>
</section>
<section id="おみくじプログラム" data-number="4.5.3">
<h3 data-number="3.5.3"><span class="header-section-number">3.5.3</span> おみくじプログラム</h3>
<p>乱数と条件分岐を使って，「大吉」「中吉」「小吉」「凶」を表示するプログラムを作りましょう．結果は大吉20%, 中吉30%, 小吉30%, 凶20%の確率で出るようにしてください．</p>
<p>ファイル名は「omikuji.js」とすること．</p>
</section>
<section id="入力ー処理ー出力条件付きのプログラム" data-number="4.5.4">
<h3 data-number="3.5.4"><span class="header-section-number">3.5.4</span> 入力ー処理ー出力（条件付き）のプログラム</h3>
<p>評点グレード変換プログラムのように，なにかシンプルな条件分岐を伴う処理をする入力ー処理ー出力の形のプログラムを作ってください．</p>
<p>ファイル名は「simpleio2.js」とすること．</p>
</section>
</section>
</section>
<section id="コンピュータの得意な仕事繰り返し" data-number="5">
<h1 data-number="4"><span class="header-section-number">4</span> コンピュータの得意な仕事(繰り返し)</h1>
<section id="学習目標-3" data-number="5.1">
<h2 data-number="4.1"><span class="header-section-number">4.1</span> 学習目標</h2>
<ul>
<li>繰り返しのあるプログラムの実行順序を理解し，応用してプログラムが書けるようになる</li>
</ul>
</section>
<section id="繰り返し" data-number="5.2">
<h2 data-number="4.2"><span class="header-section-number">4.2</span> 繰り返し</h2>
<p>今回のテーマは同じ命令を何度も書かずに，コンピュータに繰り返しさせることです．</p>
<p>繰り返しプログラムを見ていく前に，何を繰り返すか考えていきましょう．</p>
<section id="何を繰り返すのか" data-number="5.2.1">
<h3 data-number="4.2.1"><span class="header-section-number">4.2.1</span> 何を繰り返すのか</h3>
<p>何回も出てきた，家のプログラムを見てみましょう．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:4-1&#39;)">c</span></p>
<div class="sourceCode" id="lst:4-1" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:4-1-1"><a href="#lst:4-1-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:4-1-2"><a href="#lst:4-1-2"></a><span class="co">// 屋根を書く</span></span>
<span id="lst:4-1-3"><a href="#lst:4-1-3"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:4-1-4"><a href="#lst:4-1-4"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:4-1-5"><a href="#lst:4-1-5"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:4-1-6"><a href="#lst:4-1-6"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:4-1-7"><a href="#lst:4-1-7"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:4-1-8"><a href="#lst:4-1-8"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:4-1-9"><a href="#lst:4-1-9"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:4-1-10"><a href="#lst:4-1-10"></a>t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:4-1-11"><a href="#lst:4-1-11"></a></span>
<span id="lst:4-1-12"><a href="#lst:4-1-12"></a></span>
<span id="lst:4-1-13"><a href="#lst:4-1-13"></a><span class="co">// 本体を書く</span></span>
<span id="lst:4-1-14"><a href="#lst:4-1-14"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:4-1-15"><a href="#lst:4-1-15"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:4-1-16"><a href="#lst:4-1-16"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:4-1-17"><a href="#lst:4-1-17"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:4-1-18"><a href="#lst:4-1-18"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:4-1-19"><a href="#lst:4-1-19"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:4-1-20"><a href="#lst:4-1-20"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:4-1-21"><a href="#lst:4-1-21"></a>t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span></code></pre></div>
<p>このプログラム，何度も同じことを書いている個所が2箇所ありますね．どこが同じか考えてみましょう．</p>
</section>
<section id="繰り返しを使ったプログラム" data-number="5.2.2">
<h3 data-number="4.2.2"><span class="header-section-number">4.2.2</span> 繰り返しを使ったプログラム</h3>
<p>繰り返しを使って，すっきりとしたプログラムにしてみましょう．</p>
<!-- リスト 5.2.2.1 WhileHouse.java -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:4-2&#39;)">c</span></p>
<div class="sourceCode" id="lst:4-2" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:4-2-1"><a href="#lst:4-2-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:4-2-2"><a href="#lst:4-2-2"></a></span>
<span id="lst:4-2-3"><a href="#lst:4-2-3"></a><span class="co">// 屋根を書く</span></span>
<span id="lst:4-2-4"><a href="#lst:4-2-4"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:4-2-5"><a href="#lst:4-2-5"></a><span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst:4-2-6"><a href="#lst:4-2-6"></a><span class="cf">while</span> (i <span class="op">&lt;=</span> <span class="dv">3</span>) {</span>
<span id="lst:4-2-7"><a href="#lst:4-2-7"></a>  t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:4-2-8"><a href="#lst:4-2-8"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:4-2-9"><a href="#lst:4-2-9"></a>  i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst:4-2-10"><a href="#lst:4-2-10"></a>}</span>
<span id="lst:4-2-11"><a href="#lst:4-2-11"></a>t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">30</span>)<span class="op">;</span><span class="co">// 上向きに戻す</span></span>
<span id="lst:4-2-12"><a href="#lst:4-2-12"></a></span>
<span id="lst:4-2-13"><a href="#lst:4-2-13"></a><span class="co">// 本体を書く</span></span>
<span id="lst:4-2-14"><a href="#lst:4-2-14"></a><span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst:4-2-15"><a href="#lst:4-2-15"></a><span class="cf">while</span> (i <span class="op">&lt;=</span> <span class="dv">4</span>) {</span>
<span id="lst:4-2-16"><a href="#lst:4-2-16"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:4-2-17"><a href="#lst:4-2-17"></a>  t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:4-2-18"><a href="#lst:4-2-18"></a>  i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst:4-2-19"><a href="#lst:4-2-19"></a>}</span></code></pre></div>
<p>今回登場した「繰り返し」を使うと，プログラムを繰り返すことができます．</p>
<p>繰り返しの一般的な形は次のとおりです．</p>
<pre><code>while( [条件式] ) {
    処理
}</code></pre>
<p>条件式は前回の条件分岐によるプログラムで学習した書式と同じ書式が使えます．</p>
<p>条件式が成立(true)のした場合には，処理が実行されます．不成立(false)の場合は処理を飛ばします．処理が実行し終わると，もう一度条件式を評価します．これを，条件式が不成立(false)になるまで繰り返します．</p>
<p>これをフローチャートを用いて書くと，次のようになります．</p>
<section id="繰り返しのフローチャート" data-number="5.2.2.1">
<h4 data-number="4.2.2.1"><span class="header-section-number">4.2.2.1</span> 繰り返しのフローチャート</h4>
<p><img src="img/chapter04/while_flow_chart.gif" /></p>
<p>繰り返しを止めるために，変数を使います．この変数には，「今何回繰り返したか」といった情報を格納しておきます．</p>
</section>
<section id="プログラムのフローチャート" data-number="5.2.2.2">
<h4 data-number="4.2.2.2"><span class="header-section-number">4.2.2.2</span> プログラムのフローチャート</h4>
<p><img src="img/chapter04/while_flow_chart_concrete.gif" /></p>
</section>
</section>
<section id="繰り返しを使ったプログラムの実行過程" data-number="5.2.3">
<h3 data-number="4.2.3"><span class="header-section-number">4.2.3</span> 繰り返しを使ったプログラムの実行過程</h3>
<p>プログラムの実行過程と変数の値の変化を見ていきましょう．</p>
<ol type="1">
<li>変数の宣言
<div class="CJPicture">
<p><img src="img/chapter04/table_model_i_01.png" /></p>
</div></li>
<li>変数を初期化する(1を代入)
<div class="CJPicture">
<p><img src="img/chapter04/table_model_i_02.png" /></p>
</div></li>
<li>変数を評価して条件を判定する
<div class="CJPicture">
<p><img src="img/chapter04/table_model_i_03.png" /></p>
</div></li>
<li>変数に1を加える
<div class="CJPicture">
<p><img src="img/chapter04/table_model_i_04.png" /></p>
</div></li>
</ol>
<p>変数が，5になったときに条件式が不成立(false)になるので，繰り返しが終ります． これで4回繰り返されるのが分かるでしょうか？</p>
</section>
</section>
<section id="コラムwhileの後にはつけないで" class="unnumbered" data-number="">
<h2 class="unnumbered" data-number="-1">コラム：while()の後に;はつけないで!</h2>
<p>命令の区切りとして「;（セミコロン）」記号をつける必要があります(Javascriptでは１行１命令のときは省略できる） しかし，while文の後に;をつけてはいけません．whileの後にセミコロンを付けた次のようなプログラム</p>
<pre><code>while ([条件式]) ; {
  [繰り返したい処理]
}</code></pre>
<p>は，次のように解釈されます．</p>
<pre><code>while ([条件式]) 
  (空命令);
  
{
  [繰り返したい処理]
}</code></pre>
<p>つまり，空命令（なにもしない処理）を繰り返し，繰り返しが終わった後に，繰り返したかった処理が１回実行するプログラムとして解釈されるということです．</p>
<p>このプログラムでは，空命令が繰り返されてしまい，コンピュータは空命令を実行し続けて，プログラムが止まらなくなります．このような，プログラムミスでループを抜けることができなくなったプログラムの状態ことを，「無限ループ」と表現することもあります．無限ループに陥ると，CPUの負荷が高くなり，コンピュータの動作が重くなったり，動作しなくなったりする可能性があります．この状態を回復するには，ブラウザを再起動したり，OSを再起動する必要がある場合もあります．</p>
<p>if文やfor文の場合にも同様ですので，注意してください．</p>
</section>
<section id="応用円を書くプログラム" data-number="5.3">
<h2 data-number="4.3"><span class="header-section-number">4.3</span> 応用：円を書くプログラム</h2>
<p>繰り返しを使うと，円を簡単に書くことができます．次のプログラムを実行してみましょう．</p>
<section id="円を書きつづけるプログラム" data-number="5.3.1">
<h3 data-number="4.3.1"><span class="header-section-number">4.3.1</span> 円を書きつづけるプログラム</h3>
<!-- リスト 5.3.1.1 Circle.java -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:4-3&#39;)">c</span></p>
<div class="sourceCode" id="lst:4-3" data-caption="Circle"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:4-3-1"><a href="#lst:4-3-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:4-3-2"><a href="#lst:4-3-2"></a></span>
<span id="lst:4-3-3"><a href="#lst:4-3-3"></a><span class="co">// 円を書く</span></span>
<span id="lst:4-3-4"><a href="#lst:4-3-4"></a><span class="cf">while</span> (<span class="kw">true</span>) {</span>
<span id="lst:4-3-5"><a href="#lst:4-3-5"></a>  t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:4-3-6"><a href="#lst:4-3-6"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:4-3-7"><a href="#lst:4-3-7"></a>}</span></code></pre></div>
</section>
<section id="円を描くプログラムの改良" data-number="5.3.2">
<h3 data-number="4.3.2"><span class="header-section-number">4.3.2</span> 円を描くプログラムの改良</h3>
<p>上記の円を描くプログラムは，条件が無い(常に成立(true))ので止まりません． 変数をつけ，適切な条件式を考えて，一周したらプログラムを止めるように改良しましょう．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:4-4&#39;)">c</span></p>
<div class="sourceCode" id="lst:4-4" data-caption="Circle"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:4-4-1"><a href="#lst:4-4-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:4-4-2"><a href="#lst:4-4-2"></a></span>
<span id="lst:4-4-3"><a href="#lst:4-4-3"></a><span class="co">// 円を書く</span></span>
<span id="lst:4-4-4"><a href="#lst:4-4-4"></a><span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">//繰り返しをカウントする変数</span></span>
<span id="lst:4-4-5"><a href="#lst:4-4-5"></a><span class="cf">while</span> (i <span class="op">&lt;=</span> <span class="dv">360</span> <span class="co">/* 条件--iが360以下の間 */</span> ) {</span>
<span id="lst:4-4-6"><a href="#lst:4-4-6"></a>  t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:4-4-7"><a href="#lst:4-4-7"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:4-4-8"><a href="#lst:4-4-8"></a>  i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="co">//繰り返しカウントを一つ増やす</span></span>
<span id="lst:4-4-9"><a href="#lst:4-4-9"></a>}</span></code></pre></div>
</section>
</section>
<section id="for文" data-number="5.4">
<h2 data-number="4.4"><span class="header-section-number">4.4</span> for文</h2>
<p>繰り返しの基本はwhile文を使った繰り返しですが，指定した回数繰り返すというのはよくあるパターンで，その場合には， 1. 繰り返しをカウントする変数を作る 1. while文の条件の間 1. 繰り返しの処理をする 1. 繰り返しカウントを一つ増やす という，処理パターンを記述することになります． この処理パターンはよく書くので，簡略化して書ける構文（糖衣構文）である「for文」が用意されています．</p>
<p>for文を使うと，while文よりも短く書くことができます．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:4-5&#39;)">c</span></p>
<div class="sourceCode" id="lst:4-5" data-caption="Circle"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:4-5-1"><a href="#lst:4-5-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:4-5-2"><a href="#lst:4-5-2"></a></span>
<span id="lst:4-5-3"><a href="#lst:4-5-3"></a><span class="co">// 円を書く</span></span>
<span id="lst:4-5-4"><a href="#lst:4-5-4"></a><span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">360</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span>) {</span>
<span id="lst:4-5-5"><a href="#lst:4-5-5"></a>  t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:4-5-6"><a href="#lst:4-5-6"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:4-5-7"><a href="#lst:4-5-7"></a>}</span></code></pre></div>
<p>for文の一般型は以下の形です．</p>
<pre><code>for([初期処理] ;[条件式] ;[一回の繰返しの終了処理] ) {
    [繰り返す処理]
}</code></pre>
<!-- for文の()の中の命令は，それぞれwhile文と以下のように対応しています．

![while文とfor文](img/chapter04/while_and_for.png) -->
<p>さらに，変数に１を加える，というのもよく行われる処理なので，糖衣構文が用意されています． <code>i = i + 1</code> は <code>i++</code> と書くことができます．</p>
<p>したがって，円を書くプログラムは次のように書けます．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:4-6&#39;)">c</span></p>
<div class="sourceCode" id="lst:4-6" data-caption="Circle"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:4-6-1"><a href="#lst:4-6-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:4-6-2"><a href="#lst:4-6-2"></a></span>
<span id="lst:4-6-3"><a href="#lst:4-6-3"></a><span class="co">// 円を書く</span></span>
<span id="lst:4-6-4"><a href="#lst:4-6-4"></a><span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">360</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:4-6-5"><a href="#lst:4-6-5"></a>  t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:4-6-6"><a href="#lst:4-6-6"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:4-6-7"><a href="#lst:4-6-7"></a>}</span></code></pre></div>
</section>
<section id="コラムカウントは0から1から" class="unnumbered" data-number="">
<h2 class="unnumbered" data-number="-1">コラム：カウントは0から？1から?</h2>
<p>先程のプログラムでは，iを1からカウントして，360以内の時，つまり，361になった時にループから抜けて，プログラムを止めていました． 以下のように，iを0からカウントして，360より小さい，つまり360になった時にループから抜けて，プログラムを止めても同じことができます．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:4-7&#39;)">c</span></p>
<div class="sourceCode" id="lst:4-7" data-caption="Circle"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:4-7-1"><a href="#lst:4-7-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:4-7-2"><a href="#lst:4-7-2"></a></span>
<span id="lst:4-7-3"><a href="#lst:4-7-3"></a><span class="co">// 円を書く</span></span>
<span id="lst:4-7-4"><a href="#lst:4-7-4"></a><span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">360</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:4-7-5"><a href="#lst:4-7-5"></a>  t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:4-7-6"><a href="#lst:4-7-6"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:4-7-7"><a href="#lst:4-7-7"></a>}</span></code></pre></div>
</section>
<section id="練習問題-3" data-number="5.5">
<h2 data-number="4.5"><span class="header-section-number">4.5</span> 練習問題</h2>
<!-- ### 円を描くプログラムを改良しよう
最後に出てきた円を描くプログラムは，条件が無い(常に成立(true))ので止まりません． 変数をつけ，適切な条件式を考えて，一周したらプログラムを止めるように改良して下さい．

ファイル名は「Circle.java」とすること． -->
<section id="while文からfor文への書き換え" data-number="5.5.1">
<h3 data-number="4.5.1"><span class="header-section-number">4.5.1</span> while文からfor文への書き換え</h3>
<p>「4.2.2 家を描くプログラム（while文書き換え版）」をfor文に書き換えてください．</p>
<p>ファイル名は「housefor.js」とすること．</p>
</section>
<section id="円の描かれ方についての考察" data-number="5.5.2">
<h3 data-number="4.5.2"><span class="header-section-number">4.5.2</span> 円の描かれ方についての考察</h3>
<p>一回の繰り返しで動く大きさ(fd(1))と，角度(rt(1))の数字を変更すと，円の大きさを変えることができます． いろいろ数字を変えて，どのようにすると自分の思った円がかけるか，考察してください．</p>
<p>ヒント: 大きさと角度を入力できるようにすると，大きさや角度を変える時にプログラムを書き換える必要がないので，実験しやすくなります．</p>
</section>
<section id="四角形を描くプログラム繰り返しを使って" data-number="5.5.3">
<h3 data-number="4.5.3"><span class="header-section-number">4.5.3</span> 四角形を描くプログラム（繰り返しを使って）</h3>
<p>四角形を描くプログラムを繰り返しを使って書き直してください．</p>
<p>ファイル名は「box.js」とすること．</p>
</section>
<section id="五角形を描くプログラム繰り返しを使って" data-number="5.5.4">
<h3 data-number="4.5.4"><span class="header-section-number">4.5.4</span> 五角形を描くプログラム（繰り返しを使って）</h3>
<p>五角形を描くプログラムを繰り返しを使って書き直してください．</p>
<p>ファイル名は「pentagon3.js」とすること．</p>
</section>
<section id="星を描くプログラム繰り返しを使って" data-number="5.5.5">
<h3 data-number="4.5.5"><span class="header-section-number">4.5.5</span> 星を描くプログラム（繰り返しを使って）</h3>
<p>星を描くプログラムを繰り返しを使って書き直してください．</p>
<p>ファイル名は「star3.js」とすること．</p>
</section>
<section id="アスタリスクを描くプログラム繰り返しを使って" data-number="5.5.6">
<h3 data-number="4.5.6"><span class="header-section-number">4.5.6</span> アスタリスクを描くプログラム（繰り返しを使って）</h3>
<p>アスタリスクを描くプログラムを繰り返しを使って書いてください．</p>
<figure>
<img src="img/chapter04/q_asterisk.jpg" alt="" /><figcaption>アスタリスク</figcaption>
</figure>
<p>ファイル名は「asterisk.js」とすること．</p>
</section>
<section id="階段を描くプログラム" data-number="5.5.7">
<h3 data-number="4.5.7"><span class="header-section-number">4.5.7</span> 階段を描くプログラム</h3>
<p>ユーザーの入力を受け取り(input命令を使う)，入力された数をNとして，N段の階段（下図は，N=5の例） を描くプログラムを作ってください．</p>
<figure>
<img src="img/chapter04/q_stair.png" alt="" /><figcaption>階段</figcaption>
</figure>
<p>ファイル名は「stair.js」とすること．</p>
</section>
<section id="正n角形を描くプログラム" data-number="5.5.8">
<h3 data-number="4.5.8"><span class="header-section-number">4.5.8</span> 正N角形を描くプログラム</h3>
<p>ユーザーの入力を受け取り，入力された数をNとして，正N角形を描くプログラムを作ってください．</p>
<p>ファイル名は「regularpolygon.js」とすること．</p>
</section>
<section id="繰り返しを使った作品制作" data-number="5.5.9">
<h3 data-number="4.5.9"><span class="header-section-number">4.5.9</span> 繰り返しを使った作品制作</h3>
<p>10回以上の繰り返しを含む，作品を作ってください．</p>
<p>ファイル名は「myrepeat.js」とすること．</p>
</section>
</section>
</section>
<section id="ブロックの入れ子構造" data-number="6">
<h1 data-number="5"><span class="header-section-number">5</span> ブロックの入れ子構造</h1>
<section id="学習目標-4" data-number="6.1">
<h2 data-number="5.1"><span class="header-section-number">5.1</span> 学習目標</h2>
<ul>
<li>繰り返しや分岐を入れ子にして，目的のプログラムが書けるようになる</li>
<li>剰余演算子を使って，一定の周期をもつプログラムが書けるようになる</li>
</ul>
</section>
<section id="繰り返しの入れ子" data-number="6.2">
<h2 data-number="5.2"><span class="header-section-number">5.2</span> 繰り返しの入れ子</h2>
<p>今回は繰り返しの入れ子（繰り返しの中に繰り返しがあること）に挑戦してみましょう．</p>
<section id="窓を描く４つの四角形を描くプログラム" data-number="6.2.1">
<h3 data-number="5.2.1"><span class="header-section-number">5.2.1</span> 窓を描く（４つの四角形を描く）プログラム</h3>
<p>次のプログラムを見てみましょう．</p>
<!-- リスト 6.2.1.1 FourSquares.java -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:5-1&#39;)">c</span></p>
<div class="sourceCode" id="lst:5-1" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:5-1-1"><a href="#lst:5-1-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:5-1-2"><a href="#lst:5-1-2"></a></span>
<span id="lst:5-1-3"><a href="#lst:5-1-3"></a><span class="co">// 窓を描く</span></span>
<span id="lst:5-1-4"><a href="#lst:5-1-4"></a><span class="cf">for</span> (<span class="kw">var</span> j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">4</span><span class="op">;</span> j<span class="op">++</span>) { </span>
<span id="lst:5-1-5"><a href="#lst:5-1-5"></a>  <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++</span>) {<span class="co">// 四角形を描く</span></span>
<span id="lst:5-1-6"><a href="#lst:5-1-6"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:5-1-7"><a href="#lst:5-1-7"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:5-1-8"><a href="#lst:5-1-8"></a>  }</span>
<span id="lst:5-1-9"><a href="#lst:5-1-9"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:5-1-10"><a href="#lst:5-1-10"></a>}</span></code></pre></div>
<figure>
<img src="img/chapter05/foursquares.jpg" alt="" /><figcaption>窓を描くプログラム</figcaption>
</figure>
<p>前回，四角形を描くには繰り返しを使うことを習いました．今回は，さらにその四角形を何個も描くために， もう一つ外側に繰り返しを作って，「繰り返しを繰り返す」ということをやっています．</p>
<p>入れ子の様子はフローチャートで示すとよく分かります．</p>
<figure>
<img src="img/chapter05/flowchart.jpg" alt="" /><figcaption>窓を描くプログラムのフローチャート</figcaption>
</figure>
</section>
<section id="ブロックの入れ子" data-number="6.2.2">
<h3 data-number="5.2.2"><span class="header-section-number">5.2.2</span> ブロックの入れ子</h3>
<p>ブロックは中括弧({})で囲まれた部分のことを言います．</p>
<p>下図のように，プログラムのifブロックやwhileブロック, forブロックなどはいくつでも入れ子にすることができます．</p>
<div class="CJPicture">
<figure>
<img src="img/chapter05/blocknest.png" alt="" /><figcaption>ブロックの入れ子</figcaption>
</figure>
</div>
<!-- ### コンパイルエラーに注意{.nunumbered}
ブロックを示す中括弧は必ず対応していなくてはなりません． 開き括弧が余ったり，閉じ括弧が余ったりすると，コンパイルエラーとなります． 
括弧違いの場合，コンピュータはブロックを勘違いしてしまうので， よけいなコンパイルエラーが（たくさん）でます． たくさんのコンパイルエラーが一気にでたら，まず括弧の対応関係を確かめましょう．-->
</section>
<section id="カッコの対応エラーに注意" class="unnumbered" data-number="">
<h3 class="unnumbered" data-number="-1">カッコの対応エラーに注意</h3>
<p>ブロックを示す中括弧は開きカッコと閉じカッコが必ず対応していなくてはなりません． 開き括弧が余ったり，閉じ括弧が余ったりすると，構文エラーとなります．</p>
<p>ブロックの入れ子を作り始めると，第3章で説明した「インデント」がより重要になります． 「インデント」項をもう一度確認してください．</p>
</section>
</section>
<section id="入れ子と並列の違いの考察花を描くプログラム" data-number="6.3">
<h2 data-number="5.3"><span class="header-section-number">5.3</span> 入れ子と並列の違いの考察：花を描くプログラム</h2>
<p>入れ子の応用として，花を描くプログラムを考えてみましょう．</p>
<figure>
<img src="img/chapter05/flower.gif" alt="" /><figcaption>花を書くプログラム</figcaption>
</figure>
<section id="花びらを描く" data-number="6.3.1">
<h3 data-number="5.3.1"><span class="header-section-number">5.3.1</span> 花びらを描く</h3>
<p>花を描くには，まず花びらをかいて，それを繰り返す必要があります．</p>
<figure>
<img src="img/chapter05/petal.gif" alt="" /><figcaption>花びらを書くプログラム</figcaption>
</figure>
<!-- リスト 6.3.1.1 Petal.java -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:5-2&#39;)">c</span></p>
<div class="sourceCode" id="lst:5-2" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:5-2-1"><a href="#lst:5-2-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:5-2-2"><a href="#lst:5-2-2"></a></span>
<span id="lst:5-2-3"><a href="#lst:5-2-3"></a><span class="co">// 花びらを描く</span></span>
<span id="lst:5-2-4"><a href="#lst:5-2-4"></a><span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">120</span><span class="op">;</span> i<span class="op">++</span>) { <span class="co">// 円弧を描く</span></span>
<span id="lst:5-2-5"><a href="#lst:5-2-5"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-2-6"><a href="#lst:5-2-6"></a>  t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-2-7"><a href="#lst:5-2-7"></a>}</span>
<span id="lst:5-2-8"><a href="#lst:5-2-8"></a></span>
<span id="lst:5-2-9"><a href="#lst:5-2-9"></a><span class="co">// 次の円弧の角度へ</span></span>
<span id="lst:5-2-10"><a href="#lst:5-2-10"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">60</span>)<span class="op">;</span></span>
<span id="lst:5-2-11"><a href="#lst:5-2-11"></a></span>
<span id="lst:5-2-12"><a href="#lst:5-2-12"></a><span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">120</span><span class="op">;</span> i<span class="op">++</span>) { <span class="co">// 円弧を描く</span></span>
<span id="lst:5-2-13"><a href="#lst:5-2-13"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-2-14"><a href="#lst:5-2-14"></a>  t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-2-15"><a href="#lst:5-2-15"></a>}</span></code></pre></div>
</section>
<section id="花を描く" data-number="6.3.2">
<h3 data-number="5.3.2"><span class="header-section-number">5.3.2</span> 花を描く</h3>
<p>花びらを描くには繰り返しが必要で，花を描くにはさらにそれを繰り返す必要があります． 以下のように，繰り返しの入れ子を使います．</p>
<!-- リスト 6.3.2.1 Flower.java -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:5-3&#39;)">c</span></p>
<div class="sourceCode" id="lst:5-3" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:5-3-1"><a href="#lst:5-3-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:5-3-2"><a href="#lst:5-3-2"></a></span>
<span id="lst:5-3-3"><a href="#lst:5-3-3"></a><span class="co">// 花をかく（6枚の花びらを書く）</span></span>
<span id="lst:5-3-4"><a href="#lst:5-3-4"></a><span class="cf">for</span> (<span class="kw">var</span> j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">6</span><span class="op">;</span> j<span class="op">++</span>) {</span>
<span id="lst:5-3-5"><a href="#lst:5-3-5"></a>  <span class="co">// 花びらを描く</span></span>
<span id="lst:5-3-6"><a href="#lst:5-3-6"></a>  <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">120</span><span class="op">;</span> i<span class="op">++</span>) { <span class="co">// 円弧を描く</span></span>
<span id="lst:5-3-7"><a href="#lst:5-3-7"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-3-8"><a href="#lst:5-3-8"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-3-9"><a href="#lst:5-3-9"></a>  }</span>
<span id="lst:5-3-10"><a href="#lst:5-3-10"></a></span>
<span id="lst:5-3-11"><a href="#lst:5-3-11"></a>  <span class="co">// 次の円弧の角度へ</span></span>
<span id="lst:5-3-12"><a href="#lst:5-3-12"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">60</span>)<span class="op">;</span></span>
<span id="lst:5-3-13"><a href="#lst:5-3-13"></a></span>
<span id="lst:5-3-14"><a href="#lst:5-3-14"></a>  <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">120</span><span class="op">;</span> i<span class="op">++</span>) { <span class="co">// 円弧を描く</span></span>
<span id="lst:5-3-15"><a href="#lst:5-3-15"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-3-16"><a href="#lst:5-3-16"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-3-17"><a href="#lst:5-3-17"></a>  }</span>
<span id="lst:5-3-18"><a href="#lst:5-3-18"></a>  </span>
<span id="lst:5-3-19"><a href="#lst:5-3-19"></a>}</span></code></pre></div>
<p>ポイントは，花びらを書くループの外側にそれを6回繰り返すループをつくる （つまりループを入れ子にする）ことです． 「繰り返しを繰り返す」ためには，繰り返す繰り返しの外側に繰り返しループ を書く必要がありました．構造は以下のようになります．</p>
<div class="CJPicture">
<figure>
<img src="img/chapter05/flowerblock.png" alt="" /><figcaption>花を書くプログラムの構造</figcaption>
</figure>
</div>
</section>
<section id="花を描く間違い" data-number="6.3.3">
<h3 data-number="5.3.3"><span class="header-section-number">5.3.3</span> 花を描く（間違い）</h3>
<p>以下に，よくある間違いの例を示します．</p>
<!-- リスト 6.3.3.1 BadFlower.java -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:5-4&#39;)">c</span></p>
<div class="sourceCode" id="lst:5-4" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:5-4-1"><a href="#lst:5-4-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:5-4-2"><a href="#lst:5-4-2"></a></span>
<span id="lst:5-4-3"><a href="#lst:5-4-3"></a><span class="co">// 花をかく（6枚の花びらを書く）</span></span>
<span id="lst:5-4-4"><a href="#lst:5-4-4"></a><span class="cf">for</span> (<span class="kw">var</span> j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">6</span><span class="op">;</span> j<span class="op">++</span>) {</span>
<span id="lst:5-4-5"><a href="#lst:5-4-5"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-4-6"><a href="#lst:5-4-6"></a>  t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-4-7"><a href="#lst:5-4-7"></a>}</span>
<span id="lst:5-4-8"><a href="#lst:5-4-8"></a></span>
<span id="lst:5-4-9"><a href="#lst:5-4-9"></a></span>
<span id="lst:5-4-10"><a href="#lst:5-4-10"></a><span class="co">// 花びらを描く</span></span>
<span id="lst:5-4-11"><a href="#lst:5-4-11"></a><span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">120</span><span class="op">;</span> i<span class="op">++</span>) { <span class="co">// 円弧を描く</span></span>
<span id="lst:5-4-12"><a href="#lst:5-4-12"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-4-13"><a href="#lst:5-4-13"></a>  t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-4-14"><a href="#lst:5-4-14"></a>}</span>
<span id="lst:5-4-15"><a href="#lst:5-4-15"></a></span>
<span id="lst:5-4-16"><a href="#lst:5-4-16"></a><span class="co">// 次の円弧の角度へ</span></span>
<span id="lst:5-4-17"><a href="#lst:5-4-17"></a>t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">60</span>)<span class="op">;</span></span>
<span id="lst:5-4-18"><a href="#lst:5-4-18"></a></span>
<span id="lst:5-4-19"><a href="#lst:5-4-19"></a><span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">120</span><span class="op">;</span> i<span class="op">++</span>) { <span class="co">// 円弧を描く</span></span>
<span id="lst:5-4-20"><a href="#lst:5-4-20"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-4-21"><a href="#lst:5-4-21"></a>  t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-4-22"><a href="#lst:5-4-22"></a>}</span></code></pre></div>
<p>これがうまくいかない理由が説明できるでしょうか？ 以下に，このプログラムの構造を示しますので， うまくいく方と比較してみましょう．</p>
<div class="CJPicture">
<figure>
<img src="img/chapter05/flowerblockinvalid.png" alt="" /><figcaption>うまくいかない花を書くプログラムの構造</figcaption>
</figure>
</div>
<p>このように，入れ子を作る時には，｛｝の位置に注意する必要があります．</p>
</section>
</section>
<section id="繰り返し変数の利用" data-number="6.4">
<h2 data-number="5.4"><span class="header-section-number">5.4</span> 繰り返し変数の利用</h2>
<section id="目玉を描くプログラム" data-number="6.4.1">
<h3 data-number="5.4.1"><span class="header-section-number">5.4.1</span> 目玉を描くプログラム</h3>
<p>次のプログラムを見てみましょう．</p>
<!-- リスト 6.4.1.1 MultiCircle.java -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:5-5&#39;)">c</span></p>
<div class="sourceCode" id="lst:5-5" data-caption="MultiCircle"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:5-5-1"><a href="#lst:5-5-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:5-5-2"><a href="#lst:5-5-2"></a></span>
<span id="lst:5-5-3"><a href="#lst:5-5-3"></a><span class="cf">for</span> (<span class="kw">var</span> j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">10</span><span class="op">;</span> j<span class="op">++</span>) { <span class="co">// （円を）10個描く</span></span>
<span id="lst:5-5-4"><a href="#lst:5-5-4"></a></span>
<span id="lst:5-5-5"><a href="#lst:5-5-5"></a>  <span class="co">// 円を描く</span></span>
<span id="lst:5-5-6"><a href="#lst:5-5-6"></a>  <span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst:5-5-7"><a href="#lst:5-5-7"></a>  <span class="cf">while</span> (i <span class="op">&lt;=</span> <span class="dv">360</span>) {</span>
<span id="lst:5-5-8"><a href="#lst:5-5-8"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:5-5-9"><a href="#lst:5-5-9"></a>    t<span class="op">.</span><span class="fu">rt</span>(j)<span class="op">;</span></span>
<span id="lst:5-5-10"><a href="#lst:5-5-10"></a>    i <span class="op">=</span> i <span class="op">+</span> j<span class="op">;</span></span>
<span id="lst:5-5-11"><a href="#lst:5-5-11"></a>  }</span>
<span id="lst:5-5-12"><a href="#lst:5-5-12"></a> </span>
<span id="lst:5-5-13"><a href="#lst:5-5-13"></a>}</span></code></pre></div>
<figure>
<img src="img/chapter05/multicircle.gif" alt="" /><figcaption>たくさんの円を書くプログラム</figcaption>
</figure>
<p>「「円を描く繰り返し」を繰り返す」という入れ子のループになっています．ただし，単に10回円を描くのではなく， j回目のループの時にj度だけ回りながら円を作っています．つまり，繰り返しの回数を記憶しておくjという変数を利用して， 繰り返しの回数で円の大きさを変化させようとしているのです．</p>
</section>
<section id="奇数と偶数を判定する" data-number="6.4.2">
<h3 data-number="5.4.2"><span class="header-section-number">5.4.2</span> 奇数と偶数を判定する</h3>
<p>剰余演算子(%)を使うと，割り算のあまりを求めることができます． これを使うと，例えば奇数と偶数を判定することができます．</p>
<!-- リスト 6.4.2.1 SquareAndTriangle.java -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:5-6&#39;)">c</span></p>
<div class="sourceCode" id="lst:5-6" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:5-6-1"><a href="#lst:5-6-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:5-6-2"><a href="#lst:5-6-2"></a></span>
<span id="lst:5-6-3"><a href="#lst:5-6-3"></a><span class="kw">var</span> length <span class="op">=</span> <span class="dv">50</span><span class="op">;</span> <span class="co">// １辺の長さ</span></span>
<span id="lst:5-6-4"><a href="#lst:5-6-4"></a></span>
<span id="lst:5-6-5"><a href="#lst:5-6-5"></a><span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">8</span><span class="op">;</span> i<span class="op">++</span>) { <span class="co">// 図形を描く（8回繰り返す）</span></span>
<span id="lst:5-6-6"><a href="#lst:5-6-6"></a></span>
<span id="lst:5-6-7"><a href="#lst:5-6-7"></a>  <span class="cf">if</span> (i <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>) { <span class="co">// 偶数なら</span></span>
<span id="lst:5-6-8"><a href="#lst:5-6-8"></a>    <span class="cf">for</span> (<span class="kw">var</span> j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">4</span><span class="op">;</span> j<span class="op">++</span>) { <span class="co">// 四角形を書く</span></span>
<span id="lst:5-6-9"><a href="#lst:5-6-9"></a>      t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:5-6-10"><a href="#lst:5-6-10"></a>      t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:5-6-11"><a href="#lst:5-6-11"></a>    }</span>
<span id="lst:5-6-12"><a href="#lst:5-6-12"></a>  } <span class="cf">else</span> { <span class="co">// 奇数なら</span></span>
<span id="lst:5-6-13"><a href="#lst:5-6-13"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span>  </span>
<span id="lst:5-6-14"><a href="#lst:5-6-14"></a>    <span class="cf">for</span> (<span class="kw">var</span> j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">3</span><span class="op">;</span> j<span class="op">++</span>) { <span class="co">// 三角形を書く</span></span>
<span id="lst:5-6-15"><a href="#lst:5-6-15"></a>      t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:5-6-16"><a href="#lst:5-6-16"></a>      t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:5-6-17"><a href="#lst:5-6-17"></a>    }</span>
<span id="lst:5-6-18"><a href="#lst:5-6-18"></a>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:5-6-19"><a href="#lst:5-6-19"></a>  }</span>
<span id="lst:5-6-20"><a href="#lst:5-6-20"></a></span>
<span id="lst:5-6-21"><a href="#lst:5-6-21"></a>  <span class="co">// 次の図形を書く位置に移動する</span></span>
<span id="lst:5-6-22"><a href="#lst:5-6-22"></a>  t<span class="op">.</span><span class="fu">up</span>()<span class="op">;</span></span>
<span id="lst:5-6-23"><a href="#lst:5-6-23"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:5-6-24"><a href="#lst:5-6-24"></a>  t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:5-6-25"><a href="#lst:5-6-25"></a>  t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">45</span>)<span class="op">;</span></span>
<span id="lst:5-6-26"><a href="#lst:5-6-26"></a>  t<span class="op">.</span><span class="fu">down</span>()<span class="op">;</span></span>
<span id="lst:5-6-27"><a href="#lst:5-6-27"></a>  </span>
<span id="lst:5-6-28"><a href="#lst:5-6-28"></a>}</span></code></pre></div>
<figure>
<img src="img/chapter05/square_and_triangle.gif" alt="" /><figcaption>三角形と四角形を交互に書くプログラム</figcaption>
</figure>
<p>このプログラムでは，剰余演算子と，先ほど説明した繰り返しの変数を利用して， 繰り返した数が偶数なら四角，奇数なら三角を描くようにプログラムされています．</p>
<!-- ## コラム：warp命令{.unnumbered}
上記のプログラムでは，初期位置を決めるのにwarp命令を使用しています．x座標とy座標を指定して，タートルを指定の場所に移動することができます．

便利ではあるのですが，教育的な観点から，使用しなくても構いませんし，使用するときも初期位置を決めるときにのみ使用してください． -->
</section>
</section>
<section id="練習問題-4" data-number="6.5">
<h2 data-number="5.5"><span class="header-section-number">5.5</span> 練習問題</h2>
<section id="四角形を10個描くプログラム" data-number="6.5.1">
<h3 data-number="5.5.1"><span class="header-section-number">5.5.1</span> 四角形を10個描くプログラム</h3>
<p>四角形を横に並べて１０個描くプログラムを作ってみよう</p>
<figure>
<img src="img/chapter05/q_tenboxes.jpg" alt="" /><figcaption>10個描くプログラム</figcaption>
</figure>
<p>ファイル名は「tenboxes.js」とすること．</p>
</section>
<section id="四角形を100個描くプログラム" data-number="6.5.2">
<h3 data-number="5.5.2"><span class="header-section-number">5.5.2</span> 四角形を100個描くプログラム</h3>
<p>四角形を１００個を１０ｘ１０に並べて描くプログラムを作ってみよう</p>
<figure>
<img src="img/chapter05/q_hundredboxes.jpg" alt="" /><figcaption>四角形を100個描くプログラム</figcaption>
</figure>
<p>ファイル名は「hundredboxes.js」とすること．</p>
</section>
<section id="四角形と三角形を交互に100個描くプログラム" data-number="6.5.3">
<h3 data-number="5.5.3"><span class="header-section-number">5.5.3</span> 四角形と三角形を交互に100個描くプログラム</h3>
<figure>
<img src="img/chapter05/q_hundredboxes2.jpg" alt="" /><figcaption>四角形と三角形を交互に100個描くプログラム</figcaption>
</figure>
<p>ファイル名は「hundredboxes2.js」とすること．</p>
</section>
<section id="貝殻を描くプログラム" data-number="6.5.4">
<h3 data-number="5.5.4"><span class="header-section-number">5.5.4</span> 貝殻を描くプログラム</h3>
<figure>
<img src="img/chapter05/q_shell.jpg" alt="" /><figcaption>貝殻を描くプログラム</figcaption>
</figure>
<p>ヒント１：まず以下のプログラムを作ってみよう．</p>
<figure>
<img src="img/chapter05/q_shell_hint.jpg" alt="" /><figcaption>貝殻を描くプログラムのヒント</figcaption>
</figure>
<p>ヒント２：ヒント１が出来たら，四角の大きさを指定するとき，上位ループの繰返しの変数を利用する．</p>
<p>ファイル名は「shell.js」とすること．</p>
</section>
<section id="タイヤを描くプログラム" data-number="6.5.5">
<h3 data-number="5.5.5"><span class="header-section-number">5.5.5</span> タイヤを描くプログラム</h3>
<figure>
<img src="img/chapter05/q_tire.gif" alt="" /><figcaption>タイヤを描くプログラム</figcaption>
</figure>
<p>ヒント：ずらす角度は8度, 四角の１辺は10歩にするとうまくいく． 真ん中の円は多少ずれていても構わない．</p>
<p>ファイル名は「tire.js」とすること．</p>
</section>
<section id="ドラえもんを描くプログラム" data-number="6.5.6">
<h3 data-number="5.5.6"><span class="header-section-number">5.5.6</span> ドラえもんを描くプログラム</h3>
<figure>
<img src="img/chapter05/q_doraemon.gif" alt="" /><figcaption>ドラえもんを描くプログラム</figcaption>
</figure>
<p>ファイル名は「doraemon.js」とすること．</p>
</section>
<section id="キーボードを描くプログラム" data-number="6.5.7">
<h3 data-number="5.5.7"><span class="header-section-number">5.5.7</span> キーボードを描くプログラム</h3>
<figure>
<img src="img/chapter05/q_keyboard.png" alt="" /><figcaption>キーボードを描くプログラム</figcaption>
</figure>
<p>ファイル名は「keyboard.js」とすること．</p>
</section>
</section>
</section>
<section id="命令をつくる１関数引数付関数" data-number="7">
<h1 data-number="6"><span class="header-section-number">6</span> 命令をつくる（１）：関数．引数付関数</h1>
<section id="学習目標-5" data-number="7.1">
<h2 data-number="6.1"><span class="header-section-number">6.1</span> 学習目標</h2>
<ul>
<li>関数を使ったプログラムを作れるようになる</li>
<li>引数付関数を使ったプログラムを作れるようになる</li>
</ul>
</section>
<section id="関数" data-number="7.2">
<h2 data-number="6.2"><span class="header-section-number">6.2</span> 関数</h2>
<section id="関数とその目的" data-number="7.2.1">
<h3 data-number="6.2.1"><span class="header-section-number">6.2.1</span> 関数とその目的</h3>
<p>関数は，複数の命令のまとまりに名前をつけて，一つの命令として扱うことが出来る仕組みです．</p>
<p>関数を作ることで，</p>
<ul>
<li>プログラムを構造化して，全体の複雑度を下げる（人間にとって理解しやすいプログラムにする）</li>
<li>プログラムを再利用しやすくする</li>
</ul>
<p>というメリットがあります．</p>
</section>
<section id="関数定義と関数呼び出し" data-number="7.2.2">
<h3 data-number="6.2.2"><span class="header-section-number">6.2.2</span> 関数定義と関数呼び出し</h3>
<p>以下のプログラムは，関数を使って四角形を描くプログラムです．</p>
<!-- リスト 12.2.2.1 DrawRectangleMethod.js -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:6-1&#39;)">c</span></p>
<div class="sourceCode" id="lst:6-1" data-caption="DrawRectangleMethod"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:6-1-1"><a href="#lst:6-1-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:6-1-2"><a href="#lst:6-1-2"></a></span>
<span id="lst:6-1-3"><a href="#lst:6-1-3"></a>drawRectangle()<span class="op">;</span></span>
<span id="lst:6-1-4"><a href="#lst:6-1-4"></a></span>
<span id="lst:6-1-5"><a href="#lst:6-1-5"></a><span class="co">// 四角形を描く</span></span>
<span id="lst:6-1-6"><a href="#lst:6-1-6"></a><span class="kw">function</span> <span class="fu">drawRectangle</span>() {</span>
<span id="lst:6-1-7"><a href="#lst:6-1-7"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:6-1-8"><a href="#lst:6-1-8"></a>        t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:6-1-9"><a href="#lst:6-1-9"></a>        t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-1-10"><a href="#lst:6-1-10"></a>    }</span>
<span id="lst:6-1-11"><a href="#lst:6-1-11"></a>}</span></code></pre></div>
<p>関数を使うためには，関数を定義し，その関数を呼び出す必要があります．</p>
<p>関数は一度定義すれば，同じ関数を何度も呼び出して使うことができます．</p>
<p>このプログラムでは6行目から11行目で関数を定義し，3行目でそれを呼び出しています．</p>
<p>引数．戻り値なしの関数定義の一般形は以下の通りです</p>
<pre><code>function [関数名](){

}</code></pre>
<p>関数呼び出しの一般形は以下のとおりです．</p>
<pre><code>[関数名]();</code></pre>
</section>
</section>
<section id="命名規則" data-number="7.3">
<h2 data-number="6.3"><span class="header-section-number">6.3</span> 命名規則</h2>
<p>関数，変数には好きな名前をつけることができます．ただし，数字から始まる名前や予約語は使用できません．</p>
<p>ルールから逸脱していなければ自由に命名することができ，プログラムは動作するのですが，プログラムは自分だけが読むものではありません（皆さんのプログラムもチェックする先生，TASAさんが読んでいます）．したがって，皆が分かりやすくなるような作法（ガイドライン）を理解して，守っていただけると助かります．</p>
<p>Javascriptのガイドラインとして有名なものには，googleのガイドがあります．</p>
<ul>
<li>https://google.github.io/styleguide/jsguide.html#naming</li>
</ul>
<p>ここで，本テキストでのガイドラインを紹介すると，</p>
<ul>
<li>大原則：分かりやすい名前をつける
<ul>
<li>a, b, cなどの変数名，１文字変数名はお控えください．繰り返し変数のi, j, k，座標のx, yは例外です．</li>
<li>短いほうが良いのですが，わかりにくくなるようでしたら，ある程度長くなっても仕方がありません．</li>
</ul></li>
<li>複数語を含めた命名規則（lower camel case，といいます．下記参照）
<ul>
<li>「draw rectangle」のように複数の単語から構成される名前をつけたい場合には，</li>
<li>キャメルケース
<ul>
<li>単語の最初の文字を大文字にして繋げる方法です．大文字の部分がラクダのコブように見えます．最初の文字を小文字にするlower camel caseと，最初の文字を大文字にするupper camel caseがあります．</li>
<li>lower camel case 例) height, drawHundredHouses(), calculateConsumptionTax()</li>
<li>upper camel case 例) Height, DrawHundredHouses(), CalculateConsumptionTax()</li>
</ul></li>
<li>スネークケース
<ul>
<li>単語を「_」アンダーバーで繋げる方法です．全体として蛇のように見えます．全部の文字を小文字にするlower snake caseと全部の文字を大文字にするupper snake caseがあります．</li>
<li>lower snake case 例）height, draw_hundred_houses(), calculate_consumption_tax()</li>
<li>upper snake case 例）HEIGHT, DRAW_HUNDRED_HOUSES(), CALCULATE_CONSUMPTION_TAX()</li>
</ul></li>
</ul></li>
<li>そのほか
<ul>
<li>日本語，ローマ字でも結構です．例) 家を描く(); ie-wo-kaku();</li>
<li>英語の場合は，動詞を先に，例) drawRectangle</li>
</ul></li>
</ul>
<p>本テキストでは，小文字から始めるキャメルケース（lower camel case）で統一しています．</p>
<section id="関数の処理の順序" data-number="7.3.1">
<h3 data-number="6.3.1"><span class="header-section-number">6.3.1</span> 関数の処理の順序</h3>
<p>以下のプログラムは，四角形を描く関数を作って（定義して），四角形を３つ描くプログラムです．</p>
<!-- リスト 12.2.3.1 DrawThreeRectanglesMethod.js -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:6-2&#39;)">c</span></p>
<div class="sourceCode" id="lst:6-2" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:6-2-1"><a href="#lst:6-2-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:6-2-2"><a href="#lst:6-2-2"></a></span>
<span id="lst:6-2-3"><a href="#lst:6-2-3"></a>main()<span class="op">;</span></span>
<span id="lst:6-2-4"><a href="#lst:6-2-4"></a></span>
<span id="lst:6-2-5"><a href="#lst:6-2-5"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:6-2-6"><a href="#lst:6-2-6"></a>    <span class="co">// 四角形を３つ描く</span></span>
<span id="lst:6-2-7"><a href="#lst:6-2-7"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:6-2-8"><a href="#lst:6-2-8"></a>        drawRectangle()<span class="op">;</span><span class="co">// 四角形を描く</span></span>
<span id="lst:6-2-9"><a href="#lst:6-2-9"></a>        move()<span class="op">;</span><span class="co">// 次の四角形を描く位置まで移動する</span></span>
<span id="lst:6-2-10"><a href="#lst:6-2-10"></a>    }</span>
<span id="lst:6-2-11"><a href="#lst:6-2-11"></a>}</span>
<span id="lst:6-2-12"><a href="#lst:6-2-12"></a></span>
<span id="lst:6-2-13"><a href="#lst:6-2-13"></a><span class="co">// 四角形を描く</span></span>
<span id="lst:6-2-14"><a href="#lst:6-2-14"></a><span class="kw">function</span> <span class="fu">drawRectangle</span>() {</span>
<span id="lst:6-2-15"><a href="#lst:6-2-15"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:6-2-16"><a href="#lst:6-2-16"></a>        t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:6-2-17"><a href="#lst:6-2-17"></a>        t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-2-18"><a href="#lst:6-2-18"></a>    }</span>
<span id="lst:6-2-19"><a href="#lst:6-2-19"></a>}</span>
<span id="lst:6-2-20"><a href="#lst:6-2-20"></a></span>
<span id="lst:6-2-21"><a href="#lst:6-2-21"></a><span class="co">// 次の描く位置まで移動する</span></span>
<span id="lst:6-2-22"><a href="#lst:6-2-22"></a><span class="kw">function</span> <span class="fu">move</span>() {</span>
<span id="lst:6-2-23"><a href="#lst:6-2-23"></a>    t<span class="op">.</span><span class="fu">up</span>()<span class="op">;</span></span>
<span id="lst:6-2-24"><a href="#lst:6-2-24"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-2-25"><a href="#lst:6-2-25"></a>    t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">60</span>)<span class="op">;</span></span>
<span id="lst:6-2-26"><a href="#lst:6-2-26"></a>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-2-27"><a href="#lst:6-2-27"></a>    t<span class="op">.</span><span class="fu">down</span>()<span class="op">;</span></span>
<span id="lst:6-2-28"><a href="#lst:6-2-28"></a>}</span></code></pre></div>
<p>関数が呼び出されると，プログラムの処理はその関数の処理に飛びます． そして，関数が終了すると，関数呼び出し位置に返ってきます．</p>
<div class="CJPictureL">
<figure>
<img src="img/chapter06/functionflow.png" alt="" /><figcaption>関数の処理の順序</figcaption>
</figure>
</div>
<p>このプログラムでは，mainという関数を定義して，3行目でmain関数を呼び出しています．</p>
<p>main関数中の四角形を３つ描くプログラムでは，まず，四角形を描く関数を呼び， 四角形を描き終わったら，次の描く位置まで移動する関数を呼び， 移動し終わったら，再び四角形を描く関数を呼び…という処理を３回繰り返しています．</p>
<!-- ### 関数の定義位置の注意点
次のプログラムは，四角形を描くプログラムを書こうとして，失敗した例です．

リスト 12.2.4.1 DrawRectangleMethodError.js

このプログラムを実行しようとすると，以下のようなエラーが出ます．

DrawRectangleMethodError.js:22: 式の開始が不正です．
        void drawRectangle(){
        ^
DrawRectangleMethodError.js:22: ';' がありません．
        void drawRectangle(){
                          ^
エラー 2 個 
                    
これは，関数の中に関数を定義しているためです． このプログラムでは，start関数の中に，drawRectangle関数を定義しています．

図 12.2.4.1 関数定義のミス
Javaでは，関数の中に関数を定義することはできません．（ 2章「プログラムの要素」参照 ） 関数は，クラスブロックの中に書く必要があります． 正しい関数定義は以下のとおりです．

図 12.2.4.2 正しい関数定義

-->
<p>このように，関数をつくると自分で命令を作り，プログラムを部品に分解することができます．反面，いままでプログラムは上から順番に実行されていましたが，関数呼び出しによりいろいろな場所へ飛ぶ可能性が出てきます．実行順序に気をつける必要が出てきます．（なお，関数の中では，上から順番に実行されます．）</p>
</section>
</section>
<section id="引数付関数" data-number="7.4">
<h2 data-number="6.4"><span class="header-section-number">6.4</span> 引数付関数</h2>
<section id="引数とその目的" data-number="7.4.1">
<h3 data-number="6.4.1"><span class="header-section-number">6.4.1</span> 引数とその目的</h3>
<p>関数ブロック内で宣言された変数は，関数ブロック内でしか有効ではありません． しかし，ある関数から他の関数を呼ぶときに，データを受け渡したいことがあります． 引数とは，関数ブロック外と，関数ブロック内でデータをやり取りする仕組みです． 引数を使うことで，関数ブロック外から，関数ブロック内にデータを受け取ることができます．</p>
</section>
<section id="引数を用いた四角形を描く関数の抽象化" data-number="7.4.2">
<h3 data-number="6.4.2"><span class="header-section-number">6.4.2</span> 引数を用いた，四角形を描く関数の抽象化</h3>
<p>引数が使えない場合，次のように大きさが違う四角形を書きたい場合も， 2つの関数を作る必要があります．</p>
<div class="CJPicture">
<figure>
<img src="img/chapter06/design1-1.png" alt="" /><figcaption>関数の設計</figcaption>
</figure>
</div>
<!-- リスト 12.3.2.1 DrawTwoRectangles1.js -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:6-3&#39;)">c</span></p>
<div class="sourceCode" id="lst:6-3" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:6-3-1"><a href="#lst:6-3-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:6-3-2"><a href="#lst:6-3-2"></a></span>
<span id="lst:6-3-3"><a href="#lst:6-3-3"></a>main()<span class="op">;</span></span>
<span id="lst:6-3-4"><a href="#lst:6-3-4"></a></span>
<span id="lst:6-3-5"><a href="#lst:6-3-5"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:6-3-6"><a href="#lst:6-3-6"></a>    drawBigRectangle()<span class="op">;</span></span>
<span id="lst:6-3-7"><a href="#lst:6-3-7"></a>    drawSmallRectangle()<span class="op">;</span></span>
<span id="lst:6-3-8"><a href="#lst:6-3-8"></a>}</span>
<span id="lst:6-3-9"><a href="#lst:6-3-9"></a></span>
<span id="lst:6-3-10"><a href="#lst:6-3-10"></a><span class="co">// 一辺100の大きな四角形を書く</span></span>
<span id="lst:6-3-11"><a href="#lst:6-3-11"></a><span class="kw">function</span> <span class="fu">drawBigRectangle</span>() {</span>
<span id="lst:6-3-12"><a href="#lst:6-3-12"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:6-3-13"><a href="#lst:6-3-13"></a>        t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">100</span>)<span class="op">;</span></span>
<span id="lst:6-3-14"><a href="#lst:6-3-14"></a>        t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-3-15"><a href="#lst:6-3-15"></a>    }</span>
<span id="lst:6-3-16"><a href="#lst:6-3-16"></a>}</span>
<span id="lst:6-3-17"><a href="#lst:6-3-17"></a></span>
<span id="lst:6-3-18"><a href="#lst:6-3-18"></a><span class="co">// 一辺20の小さな四角形を書く</span></span>
<span id="lst:6-3-19"><a href="#lst:6-3-19"></a><span class="kw">function</span> <span class="fu">drawSmallRectangle</span>() {</span>
<span id="lst:6-3-20"><a href="#lst:6-3-20"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:6-3-21"><a href="#lst:6-3-21"></a>        t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">20</span>)<span class="op">;</span></span>
<span id="lst:6-3-22"><a href="#lst:6-3-22"></a>        t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-3-23"><a href="#lst:6-3-23"></a>    }</span>
<span id="lst:6-3-24"><a href="#lst:6-3-24"></a>}</span></code></pre></div>
<p>次のプログラムでは，引数を使って大きさを指定し，大きい四角形と小さな四角形を「四角形を描く」という ひとつの関数で描けるようにしています．</p>
<div class="CJPicture">
<figure>
<img src="img/chapter06/design1-2.png" alt="" /><figcaption>関数の設計</figcaption>
</figure>
</div>
<!-- リスト 12.3.2.2 DrawTwoRectangles2.js -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:6-4&#39;)">c</span></p>
<div class="sourceCode" id="lst:6-4" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:6-4-1"><a href="#lst:6-4-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:6-4-2"><a href="#lst:6-4-2"></a></span>
<span id="lst:6-4-3"><a href="#lst:6-4-3"></a>main()<span class="op">;</span></span>
<span id="lst:6-4-4"><a href="#lst:6-4-4"></a></span>
<span id="lst:6-4-5"><a href="#lst:6-4-5"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:6-4-6"><a href="#lst:6-4-6"></a>    drawRectangle(<span class="dv">100</span>)<span class="op">;</span></span>
<span id="lst:6-4-7"><a href="#lst:6-4-7"></a>    drawRectangle(<span class="dv">20</span>)<span class="op">;</span></span>
<span id="lst:6-4-8"><a href="#lst:6-4-8"></a>}</span>
<span id="lst:6-4-9"><a href="#lst:6-4-9"></a></span>
<span id="lst:6-4-10"><a href="#lst:6-4-10"></a><span class="co">// 一辺がsizeの四角形を書く</span></span>
<span id="lst:6-4-11"><a href="#lst:6-4-11"></a><span class="kw">function</span> <span class="fu">drawRectangle</span>(size) {</span>
<span id="lst:6-4-12"><a href="#lst:6-4-12"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:6-4-13"><a href="#lst:6-4-13"></a>        t<span class="op">.</span><span class="fu">fd</span>(size)<span class="op">;</span></span>
<span id="lst:6-4-14"><a href="#lst:6-4-14"></a>        t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-4-15"><a href="#lst:6-4-15"></a>    }</span>
<span id="lst:6-4-16"><a href="#lst:6-4-16"></a>}</span></code></pre></div>
<p>引数付関数を使うためには，引数付関数を定義し，その関数を引数付で呼び出します． 一般形は以下の通りです．</p>
<pre><code>function [関数名]([仮引数名]){

}</code></pre>
<pre><code>[関数名]([実引数]);</code></pre>
<p>呼び出し部分の引数を実引数，宣言部分の引数を仮引数と呼びます．実引数（関数ブロック外にあるデータ）が， 仮引数（関数ブロック内で使える変数）に代入され，関数ブロック内でその変数の値が使えるようになります．</p>
<div class="CJPictureL">
<figure>
<img src="img/chapter06/design_argument.png" alt="" /><figcaption>実引数と仮引数</figcaption>
</figure>
</div>
</section>
<section id="引数を用いた多角形を描く関数の抽象化" data-number="7.4.3">
<h3 data-number="6.4.3"><span class="header-section-number">6.4.3</span> 引数を用いた，多角形を描く関数の抽象化</h3>
<p>家を書くプログラムでは，三角形と四角形を書くために， 2つの関数を作る必要があります．</p>
<div class="CJPicture">
<figure>
<img src="img/chapter06/design2-1.png" alt="" /><figcaption>関数の設計</figcaption>
</figure>
</div>
<!-- リスト 12.3.3.1 NewHouse1.js -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:6-5&#39;)">c</span></p>
<div class="sourceCode" id="lst:6-5" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:6-5-1"><a href="#lst:6-5-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:6-5-2"><a href="#lst:6-5-2"></a></span>
<span id="lst:6-5-3"><a href="#lst:6-5-3"></a>main()<span class="op">;</span></span>
<span id="lst:6-5-4"><a href="#lst:6-5-4"></a></span>
<span id="lst:6-5-5"><a href="#lst:6-5-5"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:6-5-6"><a href="#lst:6-5-6"></a>    drawTriangle(<span class="dv">100</span>)<span class="op">;</span></span>
<span id="lst:6-5-7"><a href="#lst:6-5-7"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-5-8"><a href="#lst:6-5-8"></a>    drawRectangle(<span class="dv">100</span>)<span class="op">;</span></span>
<span id="lst:6-5-9"><a href="#lst:6-5-9"></a>}</span>
<span id="lst:6-5-10"><a href="#lst:6-5-10"></a></span>
<span id="lst:6-5-11"><a href="#lst:6-5-11"></a><span class="co">// 三角形を書く</span></span>
<span id="lst:6-5-12"><a href="#lst:6-5-12"></a><span class="kw">function</span> <span class="fu">drawTriangle</span>(size) {</span>
<span id="lst:6-5-13"><a href="#lst:6-5-13"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:6-5-14"><a href="#lst:6-5-14"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:6-5-15"><a href="#lst:6-5-15"></a>        t<span class="op">.</span><span class="fu">fd</span>(size)<span class="op">;</span></span>
<span id="lst:6-5-16"><a href="#lst:6-5-16"></a>        t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">120</span>)<span class="op">;</span></span>
<span id="lst:6-5-17"><a href="#lst:6-5-17"></a>    }</span>
<span id="lst:6-5-18"><a href="#lst:6-5-18"></a>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:6-5-19"><a href="#lst:6-5-19"></a>}</span>
<span id="lst:6-5-20"><a href="#lst:6-5-20"></a></span>
<span id="lst:6-5-21"><a href="#lst:6-5-21"></a><span class="co">// 四角形を書く</span></span>
<span id="lst:6-5-22"><a href="#lst:6-5-22"></a><span class="kw">function</span> <span class="fu">drawRectangle</span>(size) {</span>
<span id="lst:6-5-23"><a href="#lst:6-5-23"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:6-5-24"><a href="#lst:6-5-24"></a>        t<span class="op">.</span><span class="fu">fd</span>(size)<span class="op">;</span></span>
<span id="lst:6-5-25"><a href="#lst:6-5-25"></a>        t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-5-26"><a href="#lst:6-5-26"></a>    }</span>
<span id="lst:6-5-27"><a href="#lst:6-5-27"></a>}</span></code></pre></div>
<p>次のプログラムでは「屋根を描く」処理で使っていた三角形と，「壁を描く」処理で使っていた四角形を 「多角形を描く」というひとつの関数で描けるようにしています．</p>
<div class="CJPicture">
<figure>
<img src="img/chapter06/design2-2.png" alt="" /><figcaption>関数の設計</figcaption>
</figure>
</div>
<!-- リスト 12.3.3.2 NewHouse2.js -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:6-6&#39;)">c</span></p>
<div class="sourceCode" id="lst:6-6" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:6-6-1"><a href="#lst:6-6-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:6-6-2"><a href="#lst:6-6-2"></a></span>
<span id="lst:6-6-3"><a href="#lst:6-6-3"></a>main()<span class="op">;</span></span>
<span id="lst:6-6-4"><a href="#lst:6-6-4"></a></span>
<span id="lst:6-6-5"><a href="#lst:6-6-5"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:6-6-6"><a href="#lst:6-6-6"></a>    drawRegularPolygon(<span class="dv">3</span><span class="op">,</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="lst:6-6-7"><a href="#lst:6-6-7"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-6-8"><a href="#lst:6-6-8"></a>    drawRegularPolygon(<span class="dv">4</span><span class="op">,</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="lst:6-6-9"><a href="#lst:6-6-9"></a>}</span>
<span id="lst:6-6-10"><a href="#lst:6-6-10"></a></span>
<span id="lst:6-6-11"><a href="#lst:6-6-11"></a><span class="co">// 指定された角数の正多角形を描く</span></span>
<span id="lst:6-6-12"><a href="#lst:6-6-12"></a><span class="kw">function</span> <span class="fu">drawRegularPolygon</span>(n<span class="op">,</span> size) {</span>
<span id="lst:6-6-13"><a href="#lst:6-6-13"></a>    <span class="co">// 向きを調節する</span></span>
<span id="lst:6-6-14"><a href="#lst:6-6-14"></a>    <span class="kw">var</span> angle <span class="op">=</span> <span class="dv">360</span> <span class="op">/</span> n<span class="op">;</span></span>
<span id="lst:6-6-15"><a href="#lst:6-6-15"></a>    t<span class="op">.</span><span class="fu">rt</span>(angle <span class="op">-</span> <span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-6-16"><a href="#lst:6-6-16"></a></span>
<span id="lst:6-6-17"><a href="#lst:6-6-17"></a>    <span class="co">// 多角形を描く</span></span>
<span id="lst:6-6-18"><a href="#lst:6-6-18"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:6-6-19"><a href="#lst:6-6-19"></a>        t<span class="op">.</span><span class="fu">fd</span>(size)<span class="op">;</span></span>
<span id="lst:6-6-20"><a href="#lst:6-6-20"></a>        t<span class="op">.</span><span class="fu">rt</span>(angle)<span class="op">;</span></span>
<span id="lst:6-6-21"><a href="#lst:6-6-21"></a>    }</span>
<span id="lst:6-6-22"><a href="#lst:6-6-22"></a></span>
<span id="lst:6-6-23"><a href="#lst:6-6-23"></a>    <span class="co">// 向きを上向きに戻す</span></span>
<span id="lst:6-6-24"><a href="#lst:6-6-24"></a>    t<span class="op">.</span><span class="fu">lt</span>(angle <span class="op">-</span> <span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-6-25"><a href="#lst:6-6-25"></a>}</span></code></pre></div>
</section>
</section>
<section id="変数の有効範囲と引数" data-number="7.5">
<h2 data-number="6.5"><span class="header-section-number">6.5</span> 変数の有効範囲と引数</h2>
<section id="変数の有効範囲" data-number="7.5.1">
<h3 data-number="6.5.1"><span class="header-section-number">6.5.1</span> 変数の有効範囲</h3>
<p>次のプログラムは，一辺の長さを指定して四角形を描くプログラムを書こうとして，失敗した例です．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:6-7&#39;)">c</span></p>
<div class="sourceCode" id="lst:6-7" data-caption="ScopeError"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:6-7-1"><a href="#lst:6-7-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:6-7-2"><a href="#lst:6-7-2"></a></span>
<span id="lst:6-7-3"><a href="#lst:6-7-3"></a>main()<span class="op">;</span></span>
<span id="lst:6-7-4"><a href="#lst:6-7-4"></a></span>
<span id="lst:6-7-5"><a href="#lst:6-7-5"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:6-7-6"><a href="#lst:6-7-6"></a>    <span class="kw">var</span> length <span class="op">=</span> input(<span class="st">&#39;一辺の長さ？&#39;</span>)<span class="op">;</span></span>
<span id="lst:6-7-7"><a href="#lst:6-7-7"></a>    drawRectangle()<span class="op">;</span></span>
<span id="lst:6-7-8"><a href="#lst:6-7-8"></a>}</span>
<span id="lst:6-7-9"><a href="#lst:6-7-9"></a></span>
<span id="lst:6-7-10"><a href="#lst:6-7-10"></a><span class="kw">function</span> <span class="fu">drawRectangle</span>(){</span>
<span id="lst:6-7-11"><a href="#lst:6-7-11"></a>    <span class="cf">for</span>(<span class="kw">var</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span><span class="dv">4</span><span class="op">;</span>i<span class="op">++</span>){</span>
<span id="lst:6-7-12"><a href="#lst:6-7-12"></a>        t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:6-7-13"><a href="#lst:6-7-13"></a>        t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-7-14"><a href="#lst:6-7-14"></a>    }</span>
<span id="lst:6-7-15"><a href="#lst:6-7-15"></a>}</span></code></pre></div>
<p>上記のプログラムを実行しても，入力した大きさの四角形が描かれず，大きさ0の四角形が描かれます．</p>
<p>これは，t.fd(length)のlengthという変数が参照できず，0と置き換えられてしまうための動作です．lengthという変数が参照できないのは，drawRectangle()関数の内部（{と}で囲われた部分）が，lengthという変数の有効範囲外であるためです．</p>
<!-- ![変数の有効範囲](img/chapter06/scope.png) -->
</section>
<section id="引数付関数定義と関数呼び出し" data-number="7.5.2">
<h3 data-number="6.5.2"><span class="header-section-number">6.5.2</span> 引数付関数定義と関数呼び出し</h3>
<p>以下のプログラムは，引数を使って，関数の有効範囲外から四角形の長さを渡せるようにしたプログラムです．</p>
<p>入力された長さのlength（実引数）を，関数にlength（仮引数）として渡し，四角形を描いています．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:6-8&#39;)">c</span></p>
<div class="sourceCode" id="lst:6-8" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:6-8-1"><a href="#lst:6-8-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:6-8-2"><a href="#lst:6-8-2"></a></span>
<span id="lst:6-8-3"><a href="#lst:6-8-3"></a>main()<span class="op">;</span></span>
<span id="lst:6-8-4"><a href="#lst:6-8-4"></a></span>
<span id="lst:6-8-5"><a href="#lst:6-8-5"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:6-8-6"><a href="#lst:6-8-6"></a>    <span class="kw">var</span> length <span class="op">=</span> input(<span class="st">&#39;一辺の長さ？&#39;</span>)<span class="op">;</span></span>
<span id="lst:6-8-7"><a href="#lst:6-8-7"></a>    drawRectangle(length)<span class="op">;</span></span>
<span id="lst:6-8-8"><a href="#lst:6-8-8"></a>}</span>
<span id="lst:6-8-9"><a href="#lst:6-8-9"></a></span>
<span id="lst:6-8-10"><a href="#lst:6-8-10"></a><span class="kw">function</span> <span class="fu">drawRectangle</span>(length){</span>
<span id="lst:6-8-11"><a href="#lst:6-8-11"></a>    <span class="cf">for</span>(<span class="kw">var</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span><span class="dv">4</span><span class="op">;</span>i<span class="op">++</span>){</span>
<span id="lst:6-8-12"><a href="#lst:6-8-12"></a>        t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span></span>
<span id="lst:6-8-13"><a href="#lst:6-8-13"></a>        t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-8-14"><a href="#lst:6-8-14"></a>    }</span>
<span id="lst:6-8-15"><a href="#lst:6-8-15"></a>}</span></code></pre></div>
<!-- ```                    
29: void drawRectangle(int length){
30:     for (int i =0; i < 4; i++) {
31:         fd(length);
32:         rt(90);
33:     }
34: }
``` 

```                 
24: drawRectangle(inputLength);//入力された長さを一辺の長さとして四角形を描く
```  -->
</section>
</section>
<section id="関数の設計あるいはプログラムの構造化" data-number="7.6">
<h2 data-number="6.6"><span class="header-section-number">6.6</span> 関数の設計．あるいはプログラムの構造化</h2>
<p>関数から関数を呼ぶことが出来るため，関数の連鎖を用いてプログラムを作ることができます． これは「構造化プログラミング」という，複雑さを制御するための基本的設計技法です．</p>
<p>複雑になると，関数の呼び出し関係が混乱してくるので，まず以下のような関数構成図を書き， プログラムを書いていくと良いでしょう．</p>
<div class="CJPictureL">
<figure>
<img src="img/chapter06/design3.png" alt="" /><figcaption>関数の設計</figcaption>
</figure>
</div>
<p>この設計を実装したものを下に載せます．</p>
<section id="窓付きの家を描くプログラム引数を用いた多角形を描く関数の抽象化" data-number="7.6.1">
<h3 data-number="6.6.1"><span class="header-section-number">6.6.1</span> 窓付きの家を描くプログラム（引数を用いた，多角形を描く関数の抽象化）</h3>
<!-- リスト 12.5.1.1 House05.js -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:6-9&#39;)">c</span></p>
<div class="sourceCode" id="lst:6-9" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:6-9-1"><a href="#lst:6-9-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:6-9-2"><a href="#lst:6-9-2"></a></span>
<span id="lst:6-9-3"><a href="#lst:6-9-3"></a>main()<span class="op">;</span></span>
<span id="lst:6-9-4"><a href="#lst:6-9-4"></a></span>
<span id="lst:6-9-5"><a href="#lst:6-9-5"></a><span class="co">// 家を描く</span></span>
<span id="lst:6-9-6"><a href="#lst:6-9-6"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:6-9-7"><a href="#lst:6-9-7"></a>    drawRoof()<span class="op">;</span> <span class="co">// 屋根を描く</span></span>
<span id="lst:6-9-8"><a href="#lst:6-9-8"></a>    drawWall()<span class="op">;</span> <span class="co">// 壁を描く</span></span>
<span id="lst:6-9-9"><a href="#lst:6-9-9"></a>    drawWindow()<span class="op">;</span> <span class="co">// 窓を描く</span></span>
<span id="lst:6-9-10"><a href="#lst:6-9-10"></a>}</span>
<span id="lst:6-9-11"><a href="#lst:6-9-11"></a></span>
<span id="lst:6-9-12"><a href="#lst:6-9-12"></a><span class="co">// 屋根を描く</span></span>
<span id="lst:6-9-13"><a href="#lst:6-9-13"></a><span class="kw">function</span> <span class="fu">drawRoof</span>() {</span>
<span id="lst:6-9-14"><a href="#lst:6-9-14"></a>    drawRegularPolygon(<span class="dv">3</span><span class="op">,</span> <span class="dv">80</span>)<span class="op">;</span> <span class="co">// 三角形を描く</span></span>
<span id="lst:6-9-15"><a href="#lst:6-9-15"></a>}</span>
<span id="lst:6-9-16"><a href="#lst:6-9-16"></a></span>
<span id="lst:6-9-17"><a href="#lst:6-9-17"></a><span class="co">// 壁を描く</span></span>
<span id="lst:6-9-18"><a href="#lst:6-9-18"></a><span class="kw">function</span> <span class="fu">drawWall</span>() {</span>
<span id="lst:6-9-19"><a href="#lst:6-9-19"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span> <span class="co">// 向きを調節する</span></span>
<span id="lst:6-9-20"><a href="#lst:6-9-20"></a>    drawRegularPolygon(<span class="dv">4</span><span class="op">,</span> <span class="dv">80</span>)<span class="op">;</span><span class="co">// 四角形を描く</span></span>
<span id="lst:6-9-21"><a href="#lst:6-9-21"></a>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span><span class="co">// 向きを上向きに戻す</span></span>
<span id="lst:6-9-22"><a href="#lst:6-9-22"></a>}</span>
<span id="lst:6-9-23"><a href="#lst:6-9-23"></a></span>
<span id="lst:6-9-24"><a href="#lst:6-9-24"></a><span class="co">// 窓を描く</span></span>
<span id="lst:6-9-25"><a href="#lst:6-9-25"></a><span class="kw">function</span> <span class="fu">drawWindow</span>() {</span>
<span id="lst:6-9-26"><a href="#lst:6-9-26"></a>    <span class="co">// 窓を描く位置まで移動する</span></span>
<span id="lst:6-9-27"><a href="#lst:6-9-27"></a>    moveToWindowLocation(<span class="dv">22</span>)<span class="op">;</span></span>
<span id="lst:6-9-28"><a href="#lst:6-9-28"></a></span>
<span id="lst:6-9-29"><a href="#lst:6-9-29"></a>    <span class="co">// 窓を描く</span></span>
<span id="lst:6-9-30"><a href="#lst:6-9-30"></a>    t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-9-31"><a href="#lst:6-9-31"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:6-9-32"><a href="#lst:6-9-32"></a>        drawRegularPolygon(<span class="dv">4</span><span class="op">,</span> <span class="dv">16</span>)<span class="op">;</span></span>
<span id="lst:6-9-33"><a href="#lst:6-9-33"></a>        t<span class="op">.</span><span class="fu">fd</span>(<span class="dv">16</span> <span class="op">*</span> <span class="dv">2</span> <span class="op">+</span> <span class="dv">4</span>)<span class="op">;</span></span>
<span id="lst:6-9-34"><a href="#lst:6-9-34"></a>        t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-9-35"><a href="#lst:6-9-35"></a>    }</span>
<span id="lst:6-9-36"><a href="#lst:6-9-36"></a>    t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-9-37"><a href="#lst:6-9-37"></a>}</span>
<span id="lst:6-9-38"><a href="#lst:6-9-38"></a></span>
<span id="lst:6-9-39"><a href="#lst:6-9-39"></a><span class="co">// 指定された角数の正多角形を描く</span></span>
<span id="lst:6-9-40"><a href="#lst:6-9-40"></a><span class="kw">function</span> <span class="fu">drawRegularPolygon</span>(n<span class="op">,</span> size) {</span>
<span id="lst:6-9-41"><a href="#lst:6-9-41"></a>    <span class="co">// 向きを調節する</span></span>
<span id="lst:6-9-42"><a href="#lst:6-9-42"></a>    <span class="kw">var</span> angle <span class="op">=</span> <span class="dv">360</span> <span class="op">/</span> n<span class="op">;</span></span>
<span id="lst:6-9-43"><a href="#lst:6-9-43"></a>    t<span class="op">.</span><span class="fu">rt</span>(angle <span class="op">-</span> <span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-9-44"><a href="#lst:6-9-44"></a></span>
<span id="lst:6-9-45"><a href="#lst:6-9-45"></a>    <span class="co">// 多角形を描く</span></span>
<span id="lst:6-9-46"><a href="#lst:6-9-46"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:6-9-47"><a href="#lst:6-9-47"></a>        t<span class="op">.</span><span class="fu">fd</span>(size)<span class="op">;</span></span>
<span id="lst:6-9-48"><a href="#lst:6-9-48"></a>        t<span class="op">.</span><span class="fu">rt</span>(angle)<span class="op">;</span></span>
<span id="lst:6-9-49"><a href="#lst:6-9-49"></a>    }</span>
<span id="lst:6-9-50"><a href="#lst:6-9-50"></a></span>
<span id="lst:6-9-51"><a href="#lst:6-9-51"></a>    <span class="co">// 向きを上向きに戻す</span></span>
<span id="lst:6-9-52"><a href="#lst:6-9-52"></a>    t<span class="op">.</span><span class="fu">lt</span>(angle <span class="op">-</span> <span class="dv">90</span>)<span class="op">;</span></span>
<span id="lst:6-9-53"><a href="#lst:6-9-53"></a>}</span>
<span id="lst:6-9-54"><a href="#lst:6-9-54"></a></span>
<span id="lst:6-9-55"><a href="#lst:6-9-55"></a><span class="co">// 窓を描く位置まで移動する</span></span>
<span id="lst:6-9-56"><a href="#lst:6-9-56"></a><span class="kw">function</span> <span class="fu">moveToWindowLocation</span>(length) {</span>
<span id="lst:6-9-57"><a href="#lst:6-9-57"></a>    moveTurtle(<span class="dv">90</span><span class="op">,</span> <span class="dv">22</span>)<span class="op">;</span><span class="co">// 右へ</span></span>
<span id="lst:6-9-58"><a href="#lst:6-9-58"></a>    moveTurtle(<span class="dv">180</span><span class="op">,</span> <span class="dv">22</span>)<span class="op">;</span><span class="co">// 下へ</span></span>
<span id="lst:6-9-59"><a href="#lst:6-9-59"></a>}</span>
<span id="lst:6-9-60"><a href="#lst:6-9-60"></a></span>
<span id="lst:6-9-61"><a href="#lst:6-9-61"></a><span class="co">// 指定された方向に（ペンを上げて）移動する</span></span>
<span id="lst:6-9-62"><a href="#lst:6-9-62"></a><span class="kw">function</span> <span class="fu">moveTurtle</span>(direction<span class="op">,</span> distance) {</span>
<span id="lst:6-9-63"><a href="#lst:6-9-63"></a>    t<span class="op">.</span><span class="fu">up</span>()<span class="op">;</span></span>
<span id="lst:6-9-64"><a href="#lst:6-9-64"></a>    t<span class="op">.</span><span class="fu">rt</span>(direction)<span class="op">;</span></span>
<span id="lst:6-9-65"><a href="#lst:6-9-65"></a>    t<span class="op">.</span><span class="fu">fd</span>(distance)<span class="op">;</span></span>
<span id="lst:6-9-66"><a href="#lst:6-9-66"></a>    t<span class="op">.</span><span class="fu">lt</span>(direction)<span class="op">;</span></span>
<span id="lst:6-9-67"><a href="#lst:6-9-67"></a>    t<span class="op">.</span><span class="fu">down</span>()<span class="op">;</span></span>
<span id="lst:6-9-68"><a href="#lst:6-9-68"></a>}</span></code></pre></div>
</section>
</section>
<section id="コラムライブラリ" class="unnumbered" data-number="">
<h2 class="unnumbered" data-number="-1">コラム：ライブラリ</h2>
<p>実は今まで使っていたfd，rtという命令は，以下のような関数として定義されていたのでした．</p>
<ul>
<li><code>function fd(length){...省略...}</code></li>
<li><code>function rt(angle){...省略...}</code></li>
</ul>
<p>ある目的のために使う関数の集まりを作り，関数群を再利用します． この関数の集まりのことを「ライブラリ」といいます． fd, rtなどのタートルに使う命令は「タートルライブラリ」としてライブラリに定義されているのです．</p>
<p>皆さんの利用しているfdプログラムの実際の中身は以下のようになります．ちょっと難しいかもしれませんが，プログラムの構文としてはここまでにおおよそ学習してきたものを使っていることが感じられるのではないかと思います．タートルシステムもSumatraもJavascript言語で書かれています．たった数週間で学習した要素の組み合わせ次第で，複雑なプログラムも作ることができることを感じていただければと思います．</p>
<pre><code>    t.fd = function (d) {
        if (d &lt; 0) {
            t.bk(-d);
        } else {
            if (jsCRiPS.withKame) {
                jsCRiPS.th = Thread.create(function (d, t) {
                    var xx = t.x,
                        yy = t.y;
                    var dx = Math.cos(deg2rad(t.angle));
                    var dy = Math.sin(deg2rad(t.angle));
                    t.setRxRy();
                    for (var i = jsCRiPS.moveStep; i &lt; d; i += jsCRiPS.moveStep) {
                        t.x = xx + dx * i;
                        t.y = yy + dy * i;
                        jsCRiPS.draw(t);
                        t.setRxRy();
                        Thread.sleep(jsCRiPS.sleepTime);
                    }
                    t.x = xx + dx * d;
                    t.y = yy + dy * d;
                    jsCRiPS.draw(t);
                }, d, t);
            } else {
                var xx = t.x,
                    yy = t.y;
                var dx = Math.cos(deg2rad(t.angle));
                var dy = Math.sin(deg2rad(t.angle));
                t.setRxRy();
                t.x = xx + dx * d;
                t.y = yy + dy * d;
                jsCRiPS.draw(t);
            }
        }
    };</code></pre>
<!-- ## コラム：亀に命令を追加する{.unnumbered}
Javascriptで関数の定義をする方法には，次のような書き方もあります．

```
var drawRectangle = function(length){
    for(var i=0;i<4;i++){
        t.fd(length);
        t.rt(90);
    }
}
```

この例では関数を定義して，drawRectangle変数に代入しています．
この書法を利用して，亀に命令を追加することができます． -->
</section>
<section id="練習問題-5" data-number="7.7">
<h2 data-number="6.7"><span class="header-section-number">6.7</span> 練習問題</h2>
<!-- ### 円を描く関数を作ろう
円を描く関数「function drawCircle()」を作ってください． できたら，start関数から2回以上呼び出して，うまく動作するか確かめてみよう．

ファイル名は「circle2.js」とすること． -->
<section id="四角形を横に並べて１０個描くプログラム関数を使って" data-number="7.7.1">
<h3 data-number="6.7.1"><span class="header-section-number">6.7.1</span> 四角形を横に並べて１０個描くプログラム(関数を使って)</h3>
<p>四角形を横に並べて１０個描くプログラム</p>
<figure>
<img src="img/chapter05/q_tenboxes.jpg" alt="" /><figcaption>10個描くプログラム</figcaption>
</figure>
<p>について，四角形を描く以下の関数を定義し，これを利用することで描いてみよう．</p>
<pre><code>function drawRectangle(length){
    for(var i=0;i&lt;4;i++){
        t.fd(length);
        t.rt(90);
    }
}</code></pre>
<p>ファイル名は「tenboxes2.js」とすること．</p>
</section>
<section id="四角形を横に並べてn個描くプログラム引数付関数を使って" data-number="7.7.2">
<h3 data-number="6.7.2"><span class="header-section-number">6.7.2</span> 四角形を横に並べてN個描くプログラム(引数付関数を使って)</h3>
<p>上の問題について，プログラム全体を関数にして引数n（四角形の個数）をとるようにし，</p>
<pre><code>drawBoxes(10);</code></pre>
<p>とすると，１０個の四角形を描き，</p>
<pre><code>drawBoxes(5);</code></pre>
<p>とすると，５個の四角形を描くプログラムを書きなさい．</p>
<p>ファイル名は「tenboxes3.js」とすること．</p>
<!-- ### 四角形を100個描くプログラム
四角形を１００個を１０ｘ１０に並べて描くプログラムを作ってみよう
![四角形を100個描くプログラム](img/chapter05/q_hundredboxes.jpg) -->
</section>
<section id="大きさが変わる家を描くプログラム" data-number="7.7.3">
<h3 data-number="6.7.3"><span class="header-section-number">6.7.3</span> 大きさが変わる家を描くプログラム</h3>
<p>大きさを指定して家を描く関数（窓はなくて良い）「function drawHouse(size)」を作ってください． できたら，2回以上呼び出して，うまく動作するか確かめてみよう．</p>
<p>ファイル名は「twohouses.js」とすること．</p>
</section>
<section id="中心角を指定して円弧を描くプログラム" data-number="7.7.4">
<h3 data-number="6.7.4"><span class="header-section-number">6.7.4</span> 中心角を指定して円弧を描くプログラム</h3>
<p>中心角を指定して円弧を描く関数「function drawArc(angle)」を作成しなさい． main関数を作成し，作成したdrawArc関数をいくつか呼び出して(angleを変えて)テストしてください．</p>
<p>(ヒント：中心角が３６０ならば円に，１８０ならば半円に，１ならば点のようになります．以下に，120度の場合と，300度の場合の例を示します）</p>
<figure>
<img src="img/chapter06/q_drawarc.png" alt="" /><figcaption>円弧を描く関数</figcaption>
</figure>
<figure>
<img src="img/chapter06/q_drawarc2.png" alt="" /><figcaption>円弧を描く関数2</figcaption>
</figure>
<p>ファイル名は「drawarc.js」とすること．</p>
</section>
<section id="レモンを描くプログラム" data-number="7.7.5">
<h3 data-number="6.7.5"><span class="header-section-number">6.7.5</span> レモンを描くプログラム</h3>
<p>前の問題で作ったdrawArc(angle)を利用してレモン型の図形を描く関数「function drawLemon()」を作ってください．</p>
<ul>
<li>drawArc(angle)関数は，前の問題で作ったものをコピーします．<u>drawArc(angle)関数は書き換えない</u>でください．</li>
<li>drawArc関数を何回か呼び出しながら，レモン型の図形を描く関数「function drawLemon()」を作成しなさい．</li>
<li>main関数を作成し，作成したdrawLemon関数をいくつか呼び出してテストしてください．</li>
</ul>
<p>ファイル名は「drawlemon.js」とすること．</p>
<figure>
<img src="img/chapter06/q_drawlemon.png" alt="" /><figcaption>レモン型の図形を描く関数</figcaption>
</figure>
</section>
<section id="花を描くプログラム関数の再利用" data-number="7.7.6">
<h3 data-number="6.7.6"><span class="header-section-number">6.7.6</span> 花を描くプログラム（関数の再利用）</h3>
<p>前の問題で作成したdrawLemon()を利用して，花を描く関数drawFlower()を作ってください．</p>
<p>＜条件＞ - 前の問題で作成したdrawLemon()をコピーして<u>書き換えずに使う</u>こと．（注：drawLemon関数を使うには，drawArcも必要であるのでコピーすること） - main()関数を作り，main関数からdrawFlower()を呼び出してテストすること</p>
<figure>
<img src="img/chapter06/q_drawflower.png" alt="" /><figcaption>花を描く関数</figcaption>
</figure>
<p>ファイル名は「flower.js」とすること．</p>
</section>
<section id="ちょうちょを描くプログラム関数の多段呼び出しの練習" data-number="7.7.7">
<h3 data-number="6.7.7"><span class="header-section-number">6.7.7</span> ちょうちょを描くプログラム（関数の多段呼び出しの練習）</h3>
<p>前の問題で作成したdrawLemon()を利用して，蝶を描く関数drawButterfly()を作ってください．</p>
<p>＜条件＞ - 前の問題で作成したdrawLemon()をコピーして<u>書き換えずに使う</u>こと．（注：drawLemon関数を使うには，drawArcも必要であるのでコピーすること） - main()関数を作り，main関数からdrawButterfly()を呼び出してテストすること</p>
<figure>
<img src="img/chapter06/q_drawbutterfly.png" alt="" /><figcaption>蝶を描く関数</figcaption>
</figure>
<p>ファイル名は「butterfly.js」とすること．</p>
</section>
<section id="マス目を描くプログラム" data-number="7.7.8">
<h3 data-number="6.7.8"><span class="header-section-number">6.7.8</span> マス目を描くプログラム</h3>
<p>x行y列のマス目を書く関数を作ってください．以下のような定義を持つ</p>
<pre><code>function drawMasume(row, col, size) {
    ．．．なかみ．．．
}</code></pre>
<p>出力例を以下に示す．</p>
<p><code>drawMasume(2, 3, 50);</code></p>
<p><img src="img/chapter06/q_masume_23.jpg" /></p>
<p><code>drawMasume(5, 7, 20);</code></p>
<p><img src="img/chapter06/q_masume_57.jpg" /></p>
<p>ファイル名は「masume.js」とすること．</p>
</section>
<section id="構造化プログラミングによる自由作品" data-number="7.7.9">
<h3 data-number="6.7.9"><span class="header-section-number">6.7.9</span> 構造化プログラミングによる自由作品</h3>
<p>「１関数１０行以内！」というルールで，図形を書くプログラムを作ろう．</p>
<p>ファイル名は「structured.js」とすること．</p>
</section>
</section>
</section>
<section id="命令をつくる２戻り値付き関数" data-number="8">
<h1 data-number="7"><span class="header-section-number">7</span> 命令をつくる（２）：戻り値付き関数</h1>
<section id="学習目標-6" data-number="8.1">
<h2 data-number="7.1"><span class="header-section-number">7.1</span> 学習目標</h2>
<ul>
<li>戻り値を持つ関数を使ったプログラムを作れるようになる</li>
<li>関数を作ることによって，プログラムの汎用化や構造化をすることができる．</li>
<li>関数に対応した単体テストを作れるようになる．</li>
</ul>
</section>
<section id="戻り値付関数" data-number="8.2">
<h2 data-number="7.2"><span class="header-section-number">7.2</span> 戻り値付関数</h2>
<section id="戻り値とは" data-number="8.2.1">
<h3 data-number="7.2.1"><span class="header-section-number">7.2.1</span> 戻り値とは</h3>
<p>引数は，呼び出し元の関数から呼び出した関数に，データを受け渡したいという要求をかなえる仕組みでした． 逆に，呼び出された関数が処理した結果を呼び出し元に受け渡したい，という場合もあります． これをかなえる仕組みが，戻り値です．</p>
</section>
<section id="相性占い1" data-number="8.2.2">
<h3 data-number="7.2.2"><span class="header-section-number">7.2.2</span> 相性占い1</h3>
<p><span class="CopyButton" onclick="copycode(&#39;lst:7-1&#39;)">c</span></p>
<div class="sourceCode" id="lst:7-1" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:7-1-1"><a href="#lst:7-1-1"></a>main()<span class="op">;</span></span>
<span id="lst:7-1-2"><a href="#lst:7-1-2"></a></span>
<span id="lst:7-1-3"><a href="#lst:7-1-3"></a><span class="kw">function</span> <span class="fu">main</span>() {</span>
<span id="lst:7-1-4"><a href="#lst:7-1-4"></a>  <span class="kw">var</span> aishow <span class="op">=</span> judge(<span class="st">&#39;木村拓哉&#39;</span><span class="op">,</span> <span class="st">&#39;工藤静香&#39;</span>)<span class="op">;</span></span>
<span id="lst:7-1-5"><a href="#lst:7-1-5"></a>  println(<span class="st">&#39;相性は&#39;</span> <span class="op">+</span> aishow <span class="op">+</span> <span class="st">&#39;です&#39;</span>)<span class="op">;</span></span>
<span id="lst:7-1-6"><a href="#lst:7-1-6"></a>}</span>
<span id="lst:7-1-7"><a href="#lst:7-1-7"></a></span>
<span id="lst:7-1-8"><a href="#lst:7-1-8"></a><span class="kw">function</span> <span class="fu">judge</span>(name1<span class="op">,</span> name2) {</span>
<span id="lst:7-1-9"><a href="#lst:7-1-9"></a>  <span class="kw">var</span> x <span class="op">=</span> name1<span class="op">.</span><span class="fu">hashCode</span>() <span class="op">+</span> name2<span class="op">.</span><span class="fu">hashCode</span>()<span class="op">;</span></span>
<span id="lst:7-1-10"><a href="#lst:7-1-10"></a>  x <span class="op">=</span> x <span class="op">%</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="lst:7-1-11"><a href="#lst:7-1-11"></a>  <span class="cf">return</span> x<span class="op">;</span></span>
<span id="lst:7-1-12"><a href="#lst:7-1-12"></a>}</span></code></pre></div>
<p>上記のプログラムでは，２つの名前を引数として受け取り，２人の相性を計算し，0から99までの数値で返す関数judgeを定義し，呼び出しています．文字列型変数が持つ関数hashCode()は，文字列をハッシュコードと呼ばれる数値に変換し，その値を返す関数です．２名の名前のハッシュコードを足し合わせて，100で割った余りを求めることで，0-99までの相性を求めています．（ハッシュコードを足したものが実際の相性となるわけではないのですが，そこはご愛嬌．）</p>
</section>
<section id="戻り値を返す関数の定義方法" data-number="8.2.3">
<h3 data-number="7.2.3"><span class="header-section-number">7.2.3</span> 戻り値を返す関数の定義方法</h3>
<p>戻り値を戻す関数の定義の仕方は，次の通りです．</p>
<pre><code>[関数名]([仮引数名]){
    return [戻り値];
}</code></pre>
<p>戻り値あり関数の呼び出し方は，次の通りです（引数あり関数と同じです）．ただし，戻り値を受け取る変数を用意して，戻り値を保存する必要があります．</p>
<pre><code>var [戻り値を受け取る変数名] = [関数名]([実引数]);</code></pre>
<p>引数は，複数指定することができますが，戻り値は必ずひとつです． 複数の戻り値を戻したい場合，配列，リストやクラス等を使ってデータを合成し，一つのデータの形にする必要があります．</p>
</section>
</section>
<section id="コラム戻り値返り値" class="unnumbered" data-number="">
<h2 class="unnumbered" data-number="-1">コラム：戻り値？返り値？</h2>
<p>戻り値は他の教科書では返り値と呼ばれていたりします．元々の英語「return value」の訳は定まっていないように思われます． 昔，いろいろな教科書を調べたかぎりでは，「戻り値」，「返り値」，「リターン値」が各1/3くらいずつ分布していました．</p>
<section id="相性占い2" data-number="8.2.4">
<h3 data-number="7.2.4"><span class="header-section-number">7.2.4</span> 相性占い2</h3>
<p><span class="CopyButton" onclick="copycode(&#39;lst:7-2&#39;)">c</span></p>
<div class="sourceCode" id="lst:7-2" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:7-2-1"><a href="#lst:7-2-1"></a>main()<span class="op">;</span></span>
<span id="lst:7-2-2"><a href="#lst:7-2-2"></a></span>
<span id="lst:7-2-3"><a href="#lst:7-2-3"></a><span class="kw">function</span> <span class="fu">main</span>() {</span>
<span id="lst:7-2-4"><a href="#lst:7-2-4"></a>  <span class="kw">var</span> aishow <span class="op">=</span> judge(<span class="st">&#39;木村拓哉&#39;</span><span class="op">,</span> <span class="st">&#39;工藤静香&#39;</span>)<span class="op">;</span></span>
<span id="lst:7-2-5"><a href="#lst:7-2-5"></a>  println(<span class="st">&#39;相性は&#39;</span> <span class="op">+</span> aishow <span class="op">+</span> <span class="st">&#39;です&#39;</span>)<span class="op">;</span></span>
<span id="lst:7-2-6"><a href="#lst:7-2-6"></a>}</span>
<span id="lst:7-2-7"><a href="#lst:7-2-7"></a></span>
<span id="lst:7-2-8"><a href="#lst:7-2-8"></a><span class="kw">function</span> <span class="fu">judge</span>(name1<span class="op">,</span> name2) {</span>
<span id="lst:7-2-9"><a href="#lst:7-2-9"></a>  <span class="kw">var</span> x <span class="op">=</span> name1<span class="op">.</span><span class="fu">hashCode</span>() <span class="op">+</span> name2<span class="op">.</span><span class="fu">hashCode</span>()<span class="op">;</span></span>
<span id="lst:7-2-10"><a href="#lst:7-2-10"></a>  x <span class="op">=</span> x <span class="op">%</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="lst:7-2-11"><a href="#lst:7-2-11"></a>  <span class="cf">if</span> (x <span class="op">&gt;</span> <span class="dv">80</span>) {</span>
<span id="lst:7-2-12"><a href="#lst:7-2-12"></a>    <span class="cf">return</span> <span class="st">&#39;ばっちり&#39;</span><span class="op">;</span></span>
<span id="lst:7-2-13"><a href="#lst:7-2-13"></a>  } <span class="cf">else</span> {</span>
<span id="lst:7-2-14"><a href="#lst:7-2-14"></a>    <span class="cf">return</span> <span class="st">&#39;そこそこ&#39;</span><span class="op">;</span></span>
<span id="lst:7-2-15"><a href="#lst:7-2-15"></a>  }</span>
<span id="lst:7-2-16"><a href="#lst:7-2-16"></a>}</span></code></pre></div>
<p>このプログラムでは，judgeプログラムを改造して，相性を数字ではなく，‘ばっちり’，’そこそこ’のような文字列で返すようにしたプログラムです．return文が複数ありますが，問題ありません．なぜなら，戻り値付き関数では，return文を書いたところで関数の出力は決まり，関数の処理を終了するからです．逆に，return文の後に命令を書いても，その後の命令は実行されることはなく，制御（実行行）は関数の呼び出し元に戻ります．</p>
</section>
</section>
<section id="再利用可能な関数の作成" data-number="8.3">
<h2 data-number="7.3"><span class="header-section-number">7.3</span> 再利用可能な関数の作成</h2>
<p>前章では，引数を利用して抽象度の高いプログラムを作る例（正多角形を描く）を説明しました．戻り値を利用できるようになると，更に幅広く再利用可能な部品（＝関数）を作ることができるようになります．</p>
<p>例えば，random(X)関数は，Xを引数として，0以上X未満の乱数を作り出す関数でしたが，最小値と最大値を指定して乱数を作ることができる，以下のような関数があると便利です．</p>
<pre><code>function makeRandom(min, max){．．．}</code></pre>
<p>minは最小値，maxは最大値を入力する引数で，生成された乱数（最小値から最大値の間に入ること！）を戻り値として出力します．</p>
<p>この関数を実装し，１０回呼び出してテストをしてみます．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:7-3&#39;)">c</span></p>
<div class="sourceCode" id="lst:7-3" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:7-3-1"><a href="#lst:7-3-1"></a>main()<span class="op">;</span></span>
<span id="lst:7-3-2"><a href="#lst:7-3-2"></a></span>
<span id="lst:7-3-3"><a href="#lst:7-3-3"></a><span class="kw">function</span> <span class="fu">main</span>() {</span>
<span id="lst:7-3-4"><a href="#lst:7-3-4"></a>  <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:7-3-5"><a href="#lst:7-3-5"></a>    <span class="kw">var</span> n <span class="op">=</span> makeRandom(<span class="dv">20</span><span class="op">,</span> <span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:7-3-6"><a href="#lst:7-3-6"></a>    println(n)<span class="op">;</span></span>
<span id="lst:7-3-7"><a href="#lst:7-3-7"></a>  }</span>
<span id="lst:7-3-8"><a href="#lst:7-3-8"></a>}</span>
<span id="lst:7-3-9"><a href="#lst:7-3-9"></a></span>
<span id="lst:7-3-10"><a href="#lst:7-3-10"></a><span class="kw">function</span> <span class="fu">makeRandom</span>(min<span class="op">,</span> max) {</span>
<span id="lst:7-3-11"><a href="#lst:7-3-11"></a>  <span class="kw">var</span> generated <span class="op">=</span> random(max <span class="op">-</span> min <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> min<span class="op">;</span></span>
<span id="lst:7-3-12"><a href="#lst:7-3-12"></a>  <span class="cf">return</span> generated<span class="op">;</span></span>
<span id="lst:7-3-13"><a href="#lst:7-3-13"></a>}</span></code></pre></div>
</section>
<section id="入出力を持つ関数を用いたプログラムの構造化" data-number="8.4">
<h2 data-number="7.4"><span class="header-section-number">7.4</span> 入出力を持つ関数を用いたプログラムの構造化</h2>
<p>関数を使って西暦和暦変換プログラムを構造化してみましょう．</p>
<p>はじめに，以下に構造化されていない西暦和暦変換プログラムを示します．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:7-4&#39;)">c</span></p>
<div class="sourceCode" id="lst:7-4" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:7-4-1"><a href="#lst:7-4-1"></a> <span class="co">// 西暦を入力する</span></span>
<span id="lst:7-4-2"><a href="#lst:7-4-2"></a> <span class="kw">var</span> year <span class="op">=</span> input(<span class="st">&#39;西暦を入力してください&#39;</span>)<span class="op">;</span></span>
<span id="lst:7-4-3"><a href="#lst:7-4-3"></a></span>
<span id="lst:7-4-4"><a href="#lst:7-4-4"></a> <span class="co">// 西暦を和暦に変換する</span></span>
<span id="lst:7-4-5"><a href="#lst:7-4-5"></a> <span class="kw">var</span> japaneseYear<span class="op">;</span></span>
<span id="lst:7-4-6"><a href="#lst:7-4-6"></a> <span class="cf">if</span> (year <span class="op">&gt;=</span> <span class="dv">2019</span>) {</span>
<span id="lst:7-4-7"><a href="#lst:7-4-7"></a>   japaneseYear <span class="op">=</span> <span class="st">&#39;令和&#39;</span> <span class="op">+</span> (year <span class="op">-</span> <span class="dv">2018</span>)<span class="op">;</span></span>
<span id="lst:7-4-8"><a href="#lst:7-4-8"></a> } <span class="cf">else</span> <span class="cf">if</span> (year <span class="op">&gt;=</span> <span class="dv">1989</span>) {</span>
<span id="lst:7-4-9"><a href="#lst:7-4-9"></a>   japaneseYear <span class="op">=</span> <span class="st">&#39;平成&#39;</span> <span class="op">+</span> (year <span class="op">-</span> <span class="dv">1988</span>)<span class="op">;</span></span>
<span id="lst:7-4-10"><a href="#lst:7-4-10"></a> } <span class="cf">else</span> <span class="cf">if</span> (year <span class="op">&gt;=</span> <span class="dv">1926</span>) {</span>
<span id="lst:7-4-11"><a href="#lst:7-4-11"></a>   japaneseYear <span class="op">=</span> <span class="st">&#39;昭和&#39;</span> <span class="op">+</span> (year <span class="op">-</span> <span class="dv">1925</span>)<span class="op">;</span></span>
<span id="lst:7-4-12"><a href="#lst:7-4-12"></a> } <span class="cf">else</span> {</span>
<span id="lst:7-4-13"><a href="#lst:7-4-13"></a>   japaneseYear <span class="op">=</span> <span class="st">&#39;不明&#39;</span><span class="op">;</span></span>
<span id="lst:7-4-14"><a href="#lst:7-4-14"></a> }</span>
<span id="lst:7-4-15"><a href="#lst:7-4-15"></a></span>
<span id="lst:7-4-16"><a href="#lst:7-4-16"></a> <span class="co">// 変換結果を出力する</span></span>
<span id="lst:7-4-17"><a href="#lst:7-4-17"></a> println(year <span class="op">+</span> <span class="st">&#39;年は&#39;</span> <span class="op">+</span> japaneseYear <span class="op">+</span> <span class="st">&#39;年です.&#39;</span>)<span class="op">;</span></span></code></pre></div>
<section id="構造化された西暦変換プログラム" data-number="8.4.1">
<h3 data-number="7.4.1"><span class="header-section-number">7.4.1</span> 構造化された西暦変換プログラム</h3>
<p>西暦から和暦を変換するプログラムは，西暦を入力，和暦を出力と考えることができるので，関数を使って構造化することができます．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:7-5&#39;)">c</span></p>
<div class="sourceCode" id="lst:7-5" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:7-5-1"><a href="#lst:7-5-1"></a> main()<span class="op">;</span></span>
<span id="lst:7-5-2"><a href="#lst:7-5-2"></a></span>
<span id="lst:7-5-3"><a href="#lst:7-5-3"></a> <span class="kw">function</span> <span class="fu">main</span>() {</span>
<span id="lst:7-5-4"><a href="#lst:7-5-4"></a>   <span class="co">// 西暦を入力する</span></span>
<span id="lst:7-5-5"><a href="#lst:7-5-5"></a>   <span class="kw">var</span> year <span class="op">=</span> input(<span class="st">&#39;西暦を入力してください&#39;</span>)<span class="op">;</span></span>
<span id="lst:7-5-6"><a href="#lst:7-5-6"></a></span>
<span id="lst:7-5-7"><a href="#lst:7-5-7"></a>   <span class="co">// 西暦を和暦に変換する</span></span>
<span id="lst:7-5-8"><a href="#lst:7-5-8"></a>   <span class="kw">var</span> japaneseYear <span class="op">=</span> convertToJapaneseYear(year)<span class="op">;</span></span>
<span id="lst:7-5-9"><a href="#lst:7-5-9"></a></span>
<span id="lst:7-5-10"><a href="#lst:7-5-10"></a>   <span class="co">// 変換結果を出力する</span></span>
<span id="lst:7-5-11"><a href="#lst:7-5-11"></a>   println(year <span class="op">+</span> <span class="st">&#39;年は&#39;</span> <span class="op">+</span> japaneseYear <span class="op">+</span> <span class="st">&#39;年です.&#39;</span>)<span class="op">;</span></span>
<span id="lst:7-5-12"><a href="#lst:7-5-12"></a> }</span>
<span id="lst:7-5-13"><a href="#lst:7-5-13"></a></span>
<span id="lst:7-5-14"><a href="#lst:7-5-14"></a> <span class="co">// 西暦を和暦に変換する</span></span>
<span id="lst:7-5-15"><a href="#lst:7-5-15"></a> <span class="kw">function</span> <span class="fu">convertToJapaneseYear</span>(year) {</span>
<span id="lst:7-5-16"><a href="#lst:7-5-16"></a>   <span class="kw">var</span> japaneseYear<span class="op">;</span></span>
<span id="lst:7-5-17"><a href="#lst:7-5-17"></a>   <span class="cf">if</span> (year <span class="op">&gt;=</span> <span class="dv">2019</span>) {</span>
<span id="lst:7-5-18"><a href="#lst:7-5-18"></a>     japaneseYear <span class="op">=</span> <span class="st">&#39;令和&#39;</span> <span class="op">+</span> (year <span class="op">-</span> <span class="dv">2018</span>)<span class="op">;</span></span>
<span id="lst:7-5-19"><a href="#lst:7-5-19"></a>   } <span class="cf">else</span> <span class="cf">if</span> (year <span class="op">&gt;=</span> <span class="dv">1989</span>) {</span>
<span id="lst:7-5-20"><a href="#lst:7-5-20"></a>     japaneseYear <span class="op">=</span> <span class="st">&#39;平成&#39;</span> <span class="op">+</span> (year <span class="op">-</span> <span class="dv">1988</span>)<span class="op">;</span></span>
<span id="lst:7-5-21"><a href="#lst:7-5-21"></a>   } <span class="cf">else</span> <span class="cf">if</span> (year <span class="op">&gt;=</span> <span class="dv">1926</span>) {</span>
<span id="lst:7-5-22"><a href="#lst:7-5-22"></a>     japaneseYear <span class="op">=</span> <span class="st">&#39;昭和&#39;</span> <span class="op">+</span> (year <span class="op">-</span> <span class="dv">1925</span>)<span class="op">;</span></span>
<span id="lst:7-5-23"><a href="#lst:7-5-23"></a>   } <span class="cf">else</span> {</span>
<span id="lst:7-5-24"><a href="#lst:7-5-24"></a>     japaneseYear <span class="op">=</span> <span class="st">&#39;不明&#39;</span><span class="op">;</span></span>
<span id="lst:7-5-25"><a href="#lst:7-5-25"></a>   }</span>
<span id="lst:7-5-26"><a href="#lst:7-5-26"></a>   <span class="cf">return</span> japaneseYear<span class="op">;</span></span>
<span id="lst:7-5-27"><a href="#lst:7-5-27"></a> }</span></code></pre></div>
<!-- 関数を使って構造化された，西暦変換プログラムの完全版を読んでみましょう．

```{#lst:7-4 .javascript .numberLines caption="House"}
 // アプリケーションの開始を知らせる
 println('西暦和暦変換プログラムを開始します');

 // 西暦を和暦に変換する
 var year;
 var japaneseYear;

 // 西暦を入力する
 year = input('西暦を入力してください');

 // 西暦を和暦に変換する
 if (year >= 2019) {
   japaneseYear = '令和' + (year - 2018);
 } else if (year >= 1989) {
   japaneseYear = '平成' + (year - 1988);
 } else if (year >= 1926) {
   japaneseYear = '昭和' + (year - 1925);
 } else {
   japaneseYear = '不明';
 }

 // 変換結果を出力する
 println(year + '年は' + japaneseYear + '年です.');

 // アプリケーションの終了を知らせる
 println('西暦和暦変換プログラムを終了します');
```

<span class="CopyButton" onclick="copycode('lst:7-5')">c</span>

```{#lst:7-5 .javascript .numberLines caption="House"}
// 西暦を和暦に変換する
main();

function main() {
  showTitle();
  convertYear();
  showEndTitle();
}

// 西暦を和暦に変換する
function convertYear() {
  var year = inputYear();
  var japaneseYear = convertToJapaneseYear(year);
  showResult(year, japaneseYear);
}

// 西暦を入力する
function inputYear() {
  var year = input('西暦を入力してください');
  return year;
}

// 西暦を和暦に変換する
function convertToJapaneseYear(year) {
  var japaneseYear;
  if (year >= 2019) {
    japaneseYear = '令和' + (year - 2018);
  } else if (year >= 1989) {
    japaneseYear = '平成' + (year - 1988);
  } else if (year >= 1926) {
    japaneseYear = '昭和' + (year - 1925);
  } else {
    japaneseYear = '不明';
  }
  return japaneseYear;
}

// 変換結果を出力する
function showResult(year, japaneseYear) {
  println(year + '年は' + japaneseYear + '年です.');
}

// アプリケーションの開始を知らせる
function showTitle() {
  println('西暦和暦変換プログラムを開始します');
}

// アプリケーションの終了を知らせる
function showEndTitle() {
  println('西暦和暦変換プログラムを終了します');
}
``` -->
</section>
</section>
<section id="関数の単体テスト" data-number="8.5">
<h2 data-number="7.5"><span class="header-section-number">7.5</span> 関数の単体テスト</h2>
<section id="結果の出力" data-number="8.5.1">
<h3 data-number="7.5.1"><span class="header-section-number">7.5.1</span> 結果の出力</h3>
<p>本節では，ユーザから底と指数の入力を受け取り，累乗を計算するプログラムの例を利用して，関数の単体テストの作り方について説明します．</p>
<p>関数をテストするのに，いちいち入力していたのでは手間がかかりますし，どのテストをやったのかを忘れてしまいます． さらには，プログラムを一行だけ修正したとしても，どの箇所が動かなくなるかは予測できないため，全てのテストをやり直す必要があります． したがって，テストはテストプログラムを作って自動化するのがよいです．具体的には，次のプログラムのように列挙して呼び出し，出力すると良いでしょう.</p>
<p>この方法を「テスト方法A」と名付けます．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:7-6&#39;)">c</span></p>
<div class="sourceCode" id="lst:7-6" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:7-6-1"><a href="#lst:7-6-1"></a>main()<span class="op">;</span></span>
<span id="lst:7-6-2"><a href="#lst:7-6-2"></a></span>
<span id="lst:7-6-3"><a href="#lst:7-6-3"></a><span class="kw">function</span> <span class="fu">main</span>() {</span>
<span id="lst:7-6-4"><a href="#lst:7-6-4"></a>  <span class="kw">var</span> answer1 <span class="op">=</span> calculatePower(<span class="dv">2</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:7-6-5"><a href="#lst:7-6-5"></a>  println(<span class="st">&#39;calculatePower(&#39;</span> <span class="op">+</span> <span class="dv">2</span> <span class="op">+</span> <span class="st">&#39;, &#39;</span> <span class="op">+</span> <span class="dv">2</span> <span class="op">+</span> <span class="st">&#39;) = &#39;</span> <span class="op">+</span> answer1)<span class="op">;</span></span>
<span id="lst:7-6-6"><a href="#lst:7-6-6"></a>  <span class="kw">var</span> answer2 <span class="op">=</span> calculatePower(<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="lst:7-6-7"><a href="#lst:7-6-7"></a>  println(<span class="st">&#39;calculatePower(&#39;</span> <span class="op">+</span> <span class="dv">2</span> <span class="op">+</span> <span class="st">&#39;, &#39;</span> <span class="op">+</span> <span class="dv">3</span> <span class="op">+</span> <span class="st">&#39;) = &#39;</span> <span class="op">+</span> answer2)<span class="op">;</span></span>
<span id="lst:7-6-8"><a href="#lst:7-6-8"></a>  <span class="kw">var</span> answer3 <span class="op">=</span> calculatePower(<span class="dv">2</span><span class="op">,</span> <span class="dv">4</span>)<span class="op">;</span></span>
<span id="lst:7-6-9"><a href="#lst:7-6-9"></a>  println(<span class="st">&#39;calculatePower(&#39;</span> <span class="op">+</span> <span class="dv">2</span> <span class="op">+</span> <span class="st">&#39;, &#39;</span> <span class="op">+</span> <span class="dv">4</span> <span class="op">+</span> <span class="st">&#39;) = &#39;</span> <span class="op">+</span> answer3)<span class="op">;</span></span>
<span id="lst:7-6-10"><a href="#lst:7-6-10"></a>  <span class="kw">var</span> answer4 <span class="op">=</span> calculatePower(<span class="dv">3</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="lst:7-6-11"><a href="#lst:7-6-11"></a>  println(<span class="st">&#39;calculatePower(&#39;</span> <span class="op">+</span> <span class="dv">3</span> <span class="op">+</span> <span class="st">&#39;, &#39;</span> <span class="op">+</span> <span class="dv">3</span> <span class="op">+</span> <span class="st">&#39;) = &#39;</span> <span class="op">+</span> answer4)<span class="op">;</span></span>
<span id="lst:7-6-12"><a href="#lst:7-6-12"></a>}</span>
<span id="lst:7-6-13"><a href="#lst:7-6-13"></a></span>
<span id="lst:7-6-14"><a href="#lst:7-6-14"></a><span class="co">// 累乗を計算する</span></span>
<span id="lst:7-6-15"><a href="#lst:7-6-15"></a><span class="kw">function</span> <span class="fu">calculatePower</span>(base<span class="op">,</span> exponent) {</span>
<span id="lst:7-6-16"><a href="#lst:7-6-16"></a>  <span class="kw">var</span> power <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// 累乗数の初期値を，数の0乗（1）に設定する</span></span>
<span id="lst:7-6-17"><a href="#lst:7-6-17"></a></span>
<span id="lst:7-6-18"><a href="#lst:7-6-18"></a>  <span class="co">// 累乗を計算する</span></span>
<span id="lst:7-6-19"><a href="#lst:7-6-19"></a>  <span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="lst:7-6-20"><a href="#lst:7-6-20"></a>  <span class="cf">while</span> (i <span class="op">&lt;</span> exponent) {</span>
<span id="lst:7-6-21"><a href="#lst:7-6-21"></a>    power <span class="op">=</span> power <span class="op">*</span> base<span class="op">;</span></span>
<span id="lst:7-6-22"><a href="#lst:7-6-22"></a>    i<span class="op">++;</span></span>
<span id="lst:7-6-23"><a href="#lst:7-6-23"></a>  }</span>
<span id="lst:7-6-24"><a href="#lst:7-6-24"></a></span>
<span id="lst:7-6-25"><a href="#lst:7-6-25"></a>  <span class="cf">return</span> power<span class="op">;</span></span>
<span id="lst:7-6-26"><a href="#lst:7-6-26"></a>}</span></code></pre></div>
</section>
<section id="テストの関数化" data-number="8.5.2">
<h3 data-number="7.5.2"><span class="header-section-number">7.5.2</span> テストの関数化</h3>
<p>テストの表示部分が冗長で，変更が大変です．テストは関数にしましょう．</p>
<p>この方法を「テスト方法B」と名付けます．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:7-7&#39;)">c</span></p>
<div class="sourceCode" id="lst:7-7" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:7-7-1"><a href="#lst:7-7-1"></a>main()<span class="op">;</span></span>
<span id="lst:7-7-2"><a href="#lst:7-7-2"></a></span>
<span id="lst:7-7-3"><a href="#lst:7-7-3"></a><span class="kw">function</span> <span class="fu">main</span>() {</span>
<span id="lst:7-7-4"><a href="#lst:7-7-4"></a>  test(<span class="dv">2</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:7-7-5"><a href="#lst:7-7-5"></a>  test(<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="lst:7-7-6"><a href="#lst:7-7-6"></a>  test(<span class="dv">2</span><span class="op">,</span> <span class="dv">4</span>)<span class="op">;</span></span>
<span id="lst:7-7-7"><a href="#lst:7-7-7"></a>  test(<span class="dv">3</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="lst:7-7-8"><a href="#lst:7-7-8"></a>}</span>
<span id="lst:7-7-9"><a href="#lst:7-7-9"></a></span>
<span id="lst:7-7-10"><a href="#lst:7-7-10"></a><span class="kw">function</span> <span class="fu">test</span>(base<span class="op">,</span> exp) {</span>
<span id="lst:7-7-11"><a href="#lst:7-7-11"></a>  <span class="kw">var</span> answer <span class="op">=</span> calculatePower(base<span class="op">,</span> exp)<span class="op">;</span></span>
<span id="lst:7-7-12"><a href="#lst:7-7-12"></a>  println(<span class="st">&#39;calculatePower(&#39;</span> <span class="op">+</span> base <span class="op">+</span> <span class="st">&#39;, &#39;</span> <span class="op">+</span> exp <span class="op">+</span> <span class="st">&#39;) = &#39;</span> <span class="op">+</span> answer)<span class="op">;</span></span>
<span id="lst:7-7-13"><a href="#lst:7-7-13"></a>}</span>
<span id="lst:7-7-14"><a href="#lst:7-7-14"></a></span>
<span id="lst:7-7-15"><a href="#lst:7-7-15"></a><span class="co">// 累乗を計算する</span></span>
<span id="lst:7-7-16"><a href="#lst:7-7-16"></a><span class="kw">function</span> <span class="fu">calculatePower</span>(base<span class="op">,</span> exponent) {</span>
<span id="lst:7-7-17"><a href="#lst:7-7-17"></a>  <span class="kw">var</span> power <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// 累乗数の初期値を，数の0乗（1）に設定する</span></span>
<span id="lst:7-7-18"><a href="#lst:7-7-18"></a></span>
<span id="lst:7-7-19"><a href="#lst:7-7-19"></a>  <span class="co">// 累乗を計算する</span></span>
<span id="lst:7-7-20"><a href="#lst:7-7-20"></a>  <span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="lst:7-7-21"><a href="#lst:7-7-21"></a>  <span class="cf">while</span> (i <span class="op">&lt;</span> exponent) {</span>
<span id="lst:7-7-22"><a href="#lst:7-7-22"></a>    power <span class="op">=</span> power <span class="op">*</span> base<span class="op">;</span></span>
<span id="lst:7-7-23"><a href="#lst:7-7-23"></a>    i<span class="op">++;</span></span>
<span id="lst:7-7-24"><a href="#lst:7-7-24"></a>  }</span>
<span id="lst:7-7-25"><a href="#lst:7-7-25"></a></span>
<span id="lst:7-7-26"><a href="#lst:7-7-26"></a>  <span class="cf">return</span> power<span class="op">;</span></span>
<span id="lst:7-7-27"><a href="#lst:7-7-27"></a>}</span></code></pre></div>
</section>
<section id="期待値とテスト正否の出力" data-number="8.5.3">
<h3 data-number="7.5.3"><span class="header-section-number">7.5.3</span> 期待値とテスト正否の出力</h3>
<p>Power02のプログラムでもテストできていますが，答えが合っているかを毎回目視で確認する必要があります．プログラムに答え（「期待値」といいます）を書いておき，照合結果も出力できるといいですね！</p>
<p>この方法を「テスト方法C」と名付けます．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:7-8&#39;)">c</span></p>
<div class="sourceCode" id="lst:7-8" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:7-8-1"><a href="#lst:7-8-1"></a>main()<span class="op">;</span></span>
<span id="lst:7-8-2"><a href="#lst:7-8-2"></a></span>
<span id="lst:7-8-3"><a href="#lst:7-8-3"></a><span class="kw">function</span> <span class="fu">main</span>() {</span>
<span id="lst:7-8-4"><a href="#lst:7-8-4"></a>  test(<span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">4</span>)<span class="op">;</span></span>
<span id="lst:7-8-5"><a href="#lst:7-8-5"></a>  test(<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">8</span>)<span class="op">;</span></span>
<span id="lst:7-8-6"><a href="#lst:7-8-6"></a>  test(<span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">16</span>)<span class="op">;</span></span>
<span id="lst:7-8-7"><a href="#lst:7-8-7"></a>  test(<span class="dv">3</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">27</span>)<span class="op">;</span></span>
<span id="lst:7-8-8"><a href="#lst:7-8-8"></a>}</span>
<span id="lst:7-8-9"><a href="#lst:7-8-9"></a></span>
<span id="lst:7-8-10"><a href="#lst:7-8-10"></a><span class="kw">function</span> <span class="fu">test</span>(base<span class="op">,</span> exp<span class="op">,</span> expected) {</span>
<span id="lst:7-8-11"><a href="#lst:7-8-11"></a>  <span class="kw">var</span> answer <span class="op">=</span> calculatePower(base<span class="op">,</span> exp)<span class="op">;</span></span>
<span id="lst:7-8-12"><a href="#lst:7-8-12"></a>  <span class="kw">var</span> result <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></span>
<span id="lst:7-8-13"><a href="#lst:7-8-13"></a>  <span class="cf">if</span> (answer <span class="op">==</span> expected) {</span>
<span id="lst:7-8-14"><a href="#lst:7-8-14"></a>    result <span class="op">=</span> <span class="st">&#39;PASS&#39;</span><span class="op">;</span></span>
<span id="lst:7-8-15"><a href="#lst:7-8-15"></a>  } <span class="cf">else</span> {</span>
<span id="lst:7-8-16"><a href="#lst:7-8-16"></a>    result <span class="op">=</span> <span class="st">&#39;FAIL&#39;</span><span class="op">;</span></span>
<span id="lst:7-8-17"><a href="#lst:7-8-17"></a>  }</span>
<span id="lst:7-8-18"><a href="#lst:7-8-18"></a>  println(<span class="st">&#39;calculatePower(&#39;</span> <span class="op">+</span> base <span class="op">+</span> <span class="st">&#39;, &#39;</span> <span class="op">+</span> exp <span class="op">+</span> <span class="st">&#39;) = &#39;</span> <span class="op">+</span> answer <span class="op">+</span> <span class="st">&#39;, 判定: &#39;</span> <span class="op">+</span> result)<span class="op">;</span></span>
<span id="lst:7-8-19"><a href="#lst:7-8-19"></a>}</span>
<span id="lst:7-8-20"><a href="#lst:7-8-20"></a></span>
<span id="lst:7-8-21"><a href="#lst:7-8-21"></a><span class="co">// 累乗を計算する</span></span>
<span id="lst:7-8-22"><a href="#lst:7-8-22"></a><span class="kw">function</span> <span class="fu">calculatePower</span>(base<span class="op">,</span> exponent) {</span>
<span id="lst:7-8-23"><a href="#lst:7-8-23"></a>  <span class="kw">var</span> power <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// 累乗数の初期値を，数の0乗（1）に設定する</span></span>
<span id="lst:7-8-24"><a href="#lst:7-8-24"></a></span>
<span id="lst:7-8-25"><a href="#lst:7-8-25"></a>  <span class="co">// 累乗を計算する</span></span>
<span id="lst:7-8-26"><a href="#lst:7-8-26"></a>  <span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="lst:7-8-27"><a href="#lst:7-8-27"></a>  <span class="cf">while</span> (i <span class="op">&lt;</span> exponent) {</span>
<span id="lst:7-8-28"><a href="#lst:7-8-28"></a>    power <span class="op">=</span> power <span class="op">*</span> base<span class="op">;</span></span>
<span id="lst:7-8-29"><a href="#lst:7-8-29"></a>    i<span class="op">++;</span></span>
<span id="lst:7-8-30"><a href="#lst:7-8-30"></a>  }</span>
<span id="lst:7-8-31"><a href="#lst:7-8-31"></a></span>
<span id="lst:7-8-32"><a href="#lst:7-8-32"></a>  <span class="cf">return</span> power<span class="op">;</span></span>
<span id="lst:7-8-33"><a href="#lst:7-8-33"></a>}</span></code></pre></div>
</section>
</section>
<section id="練習問題-6" data-number="8.6">
<h2 data-number="7.6"><span class="header-section-number">7.6</span> 練習問題</h2>
<section id="年齢計算" data-number="8.6.1">
<h3 data-number="7.6.1"><span class="header-section-number">7.6.1</span> 年齢計算</h3>
<p>年齢を計算する次の関数を作り，テストしてください． （以下，「テストする」とは，テスト方法A〜テスト方法Cのいずれかの方法でテストすることを意味する．input()関数を使ってユーザから入力を受け付ける<u>必要はない</u>．）</p>
<pre><code>function getAge(year){．．．}</code></pre>
<p>yearは西暦で生まれた年を入力する引数で，今年の年齢を戻り値として出力する．（本年のみ使えればよい．例えば本年が2020年だとすると，2020から引数で与えられたyearを引けば，2020年時点での年齢を求めることができる．）</p>
<p>ファイル名は「howold.js」とすること．</p>
</section>
<section id="税込み価格計算" data-number="8.6.2">
<h3 data-number="7.6.2"><span class="header-section-number">7.6.2</span> 税込み価格計算</h3>
<p>税込み価格を計算する次の関数を作り，テストしてください．</p>
<pre><code>function calculateWithTax(withoutTax){．．．}</code></pre>
<p>withoutTaxは税抜きの価格を入力する引数で，消費税込の価格を戻り値として出力する．（日本の税率で計算すること．軽減税率などを考慮した場合は加点）</p>
<p>（端数の処理では，四捨五入などの処理をする必要がある．その処理は，２章で学習した数学関数を参考にすること）</p>
<p>ファイル名は「tax.js」とすること．</p>
</section>
<section id="勝率計算" data-number="8.6.3">
<h3 data-number="7.6.3"><span class="header-section-number">7.6.3</span> 勝率計算</h3>
<p>勝率を計算する次の関数を作り，テストしてください．</p>
<pre><code>function getWinningRate(win, lose){．．．}</code></pre>
<p>winは勝数, loseは敗数をそれぞれ入力する引数で，勝率（単位％）を戻り値として出力する．（小数第一位以下切り捨て，もしくは四捨五入のいずれかでよい）</p>
<p>ファイル名は「winningrate.js」とすること．</p>
</section>
<section id="bmi" data-number="8.6.4">
<h3 data-number="7.6.4"><span class="header-section-number">7.6.4</span> BMI</h3>
<p>BMIを計算する次の関数を作り，テストしてください．</p>
<pre><code>function bmi(height, weight){．．．}</code></pre>
<p>heightは身長(cm)，weightは体重を入力する引数で，BMI値を戻り値として出力する．BMIの計算方法は，Webなどを参考にすること</p>
<p>ファイル名は「bmi.js」とすること．</p>
</section>
<section id="総和" data-number="8.6.5">
<h3 data-number="7.6.5"><span class="header-section-number">7.6.5</span> 総和</h3>
<p>１からnまでの総和（1からnまでの数を全部足した数）を計算する次の関数を作り，テストしてください．</p>
<pre><code>function sum(n){．．．}</code></pre>
<p>nはいくつまでの総和を求めるか入力する引数で，計算された総和を戻り値として出力する．</p>
<p>ファイル名は「sum.js」とすること．</p>
<!-- ### ランダム
最小値と最大値を考慮してランダムな数値を作りだす以下の関数を作り，テストしてください．

```                     
function makeRandom(min, max){．．．}
```
                
minは最小値，maxは最大値を入力する引数で，生成されたランダムな数（最小値から最大値の間に入ること！）を戻り値として出力する．

ファイル名は「MyRandom.js」とすること． -->
</section>
<section id="じゃんけん" data-number="8.6.6">
<h3 data-number="7.6.6"><span class="header-section-number">7.6.6</span> じゃんけん</h3>
<p>じゃんけんの判定をする次の関数を作り，テストしてください．</p>
<pre><code>function jankenJudge(hand1, hand2){．．．}</code></pre>
<p>hand1はplayer１の手（0-グー, 1-チョキ, 2-パー），hand2はplayer2の手（数字の割り当てはplayer1と同じ）を表現する引数で， player1からみた結果(1-勝ち，0-あいこ, (-1)-負け)を戻り値として出力する．</p>
<p>ファイル名は「janken.js」とすること．</p>
</section>
<section id="コイン投げのシミュレーション" data-number="8.6.7">
<h3 data-number="7.6.7"><span class="header-section-number">7.6.7</span> コイン投げのシミュレーション</h3>
<p>まず次の関数を作ってください．この関数は，コイン投げをシミュレートします．0か1を生成する乱数を生成し，表を1，裏を0とする数をそれぞれ二分の一の確率で戻します．</p>
<pre><code>function flip(){．．．}</code></pre>
<p>次に，次の関数を作ってください．この関数は引数で与えられたn回flip関数を呼び，表が出た回数を数えて戻り値とします．</p>
<pre><code>function simulate(n){．．．}</code></pre>
<p>最後に，この関数をテストし，実際の確率を計算してみてください．（できる人は，試行回数が増えるにつれて 1/2に近くなることを表現する出力を考えてみよう．）</p>
<p>ファイル名は「coin.js」とすること．</p>
</section>
</section>
</section>
<section id="挑戦関数の再帰呼び出しとフラクタル図形" data-number="9">
<h1 data-number="8"><span class="header-section-number">8</span> 挑戦：関数の再帰呼び出しとフラクタル図形</h1>
<section id="学習目標-7" data-number="9.1">
<h2 data-number="8.1"><span class="header-section-number">8.1</span> 学習目標</h2>
<ul>
<li>関数の再帰呼出しとその実行過程を理解する</li>
<li>再帰プログラム，フラクタル図形の美しさを楽しむ</li>
</ul>
</section>
<section id="再帰呼び出し" data-number="9.2">
<h2 data-number="8.2"><span class="header-section-number">8.2</span> 再帰呼び出し</h2>
<section id="あらまし" data-number="9.2.1">
<h3 data-number="8.2.1"><span class="header-section-number">8.2.1</span> あらまし</h3>
<p>関数が自分自身を呼び出す処理を，再帰関数呼び出しと言います．</p>
</section>
<section id="階乗計算" data-number="9.2.2">
<h3 data-number="8.2.2"><span class="header-section-number">8.2.2</span> 階乗計算</h3>
<p>数学で使う概念の一つに階乗があります．</p>
<p>nの階乗は１からnまでの数を掛け合わせたもので，n!と書きます．</p>
<pre><code>2! = 2 * 1 = 2
3! = 3 * 2 * 1 = 6
4! = 4 * 3 * 2 * 1 = 12</code></pre>
<p>nの階乗は以下の式で求められます．</p>
<pre><code>n! = n * (n-1)!</code></pre>
<p>つまり，n-1の階乗が求められれば，それにnをかけることでnの階乗が求められます．</p>
<p>この式を応用し，再帰を使うことで，次のように階乗を求めるプログラムが書けます．</p>
<!-- リスト 14.2.2.1 Factorial.js -->
<p><span class="CopyButton" onclick="copycode(&#39;lst:8-1&#39;)">c</span></p>
<div class="sourceCode" id="lst:8-1" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:8-1-1"><a href="#lst:8-1-1"></a>main()<span class="op">;</span></span>
<span id="lst:8-1-2"><a href="#lst:8-1-2"></a></span>
<span id="lst:8-1-3"><a href="#lst:8-1-3"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:8-1-4"><a href="#lst:8-1-4"></a>    println(<span class="st">&#39;factorial(1) = &#39;</span> <span class="op">+</span> factorial(<span class="dv">1</span>))<span class="op">;</span></span>
<span id="lst:8-1-5"><a href="#lst:8-1-5"></a>    println(<span class="st">&#39;factorial(2) = &#39;</span> <span class="op">+</span> factorial(<span class="dv">2</span>))<span class="op">;</span></span>
<span id="lst:8-1-6"><a href="#lst:8-1-6"></a>    println(<span class="st">&#39;factorial(3) = &#39;</span> <span class="op">+</span> factorial(<span class="dv">3</span>))<span class="op">;</span></span>
<span id="lst:8-1-7"><a href="#lst:8-1-7"></a>    println(<span class="st">&#39;factorial(4) = &#39;</span> <span class="op">+</span> factorial(<span class="dv">4</span>))<span class="op">;</span></span>
<span id="lst:8-1-8"><a href="#lst:8-1-8"></a>    println(<span class="st">&#39;factorial(5) = &#39;</span> <span class="op">+</span> factorial(<span class="dv">5</span>))<span class="op">;</span></span>
<span id="lst:8-1-9"><a href="#lst:8-1-9"></a>}</span>
<span id="lst:8-1-10"><a href="#lst:8-1-10"></a></span>
<span id="lst:8-1-11"><a href="#lst:8-1-11"></a><span class="kw">function</span> <span class="fu">factorial</span>(n) {</span>
<span id="lst:8-1-12"><a href="#lst:8-1-12"></a>    <span class="kw">var</span> result<span class="op">;</span></span>
<span id="lst:8-1-13"><a href="#lst:8-1-13"></a>    <span class="cf">if</span> (n <span class="op">==</span> <span class="dv">1</span>) {</span>
<span id="lst:8-1-14"><a href="#lst:8-1-14"></a>        result <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst:8-1-15"><a href="#lst:8-1-15"></a>    } <span class="cf">else</span> {</span>
<span id="lst:8-1-16"><a href="#lst:8-1-16"></a>        result <span class="op">=</span> n <span class="op">*</span> factorial(n <span class="op">-</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:8-1-17"><a href="#lst:8-1-17"></a>    }</span>
<span id="lst:8-1-18"><a href="#lst:8-1-18"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="lst:8-1-19"><a href="#lst:8-1-19"></a>}</span></code></pre></div>
</section>
<section id="再帰の終点" class="unnumbered" data-number="">
<h3 class="unnumbered" data-number="-1">再帰の終点</h3>
<p>上記の例ではfactorial()関数からfactorial()関数を呼んでいるので，再帰の終点を作らないと呼出しが無限に続いて，プログラムが止まらなくなってしまいます．実際には，呼び出すごとに関数がスタックと呼ばれるメモリに読み込まれるので，そのメモリがいっぱいになってStackOverFlowErrorというエラーを出して止まります．</p>
<p>したがって，どこかで止めるプログラムを書く必要があります．上記の例では，</p>
<pre><code>if (n == 1) {
    result = 1;
}</code></pre>
<p>の部分がそれにあたります．</p>
<p>再帰のプログラムは関数の中で自分自身の関数を呼び出しているのが特徴ですが，自分自身に見えるけれども実は新たなコピーを作り，呼び出しています．</p>
<p>このコピーの様子を視覚化して理解するために，呼出し過程を図示してみましょう．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:8-2&#39;)">c</span></p>
<!-- リスト 14.2.2.2 FactorialWithPrint.js -->
<div class="sourceCode" id="lst:8-2" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:8-2-1"><a href="#lst:8-2-1"></a>main()<span class="op">;</span></span>
<span id="lst:8-2-2"><a href="#lst:8-2-2"></a></span>
<span id="lst:8-2-3"><a href="#lst:8-2-3"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:8-2-4"><a href="#lst:8-2-4"></a>    print(<span class="st">&#39;factorial(5, 0) = &#39;</span> <span class="op">+</span> factorial(<span class="dv">5</span><span class="op">,</span> <span class="dv">0</span>))<span class="op">;</span></span>
<span id="lst:8-2-5"><a href="#lst:8-2-5"></a>}</span>
<span id="lst:8-2-6"><a href="#lst:8-2-6"></a></span>
<span id="lst:8-2-7"><a href="#lst:8-2-7"></a><span class="kw">function</span> <span class="fu">factorial</span>(n<span class="op">,</span> indentCount) {</span>
<span id="lst:8-2-8"><a href="#lst:8-2-8"></a>    printStart(n<span class="op">,</span> indentCount)<span class="op">;</span></span>
<span id="lst:8-2-9"><a href="#lst:8-2-9"></a>    <span class="kw">var</span> result<span class="op">;</span></span>
<span id="lst:8-2-10"><a href="#lst:8-2-10"></a>    <span class="cf">if</span> (n <span class="op">==</span> <span class="dv">1</span>) {</span>
<span id="lst:8-2-11"><a href="#lst:8-2-11"></a>        result <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst:8-2-12"><a href="#lst:8-2-12"></a>    } <span class="cf">else</span> {</span>
<span id="lst:8-2-13"><a href="#lst:8-2-13"></a>        result <span class="op">=</span> n <span class="op">*</span> factorial(n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> indentCount <span class="op">+</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:8-2-14"><a href="#lst:8-2-14"></a>    }</span>
<span id="lst:8-2-15"><a href="#lst:8-2-15"></a>    printEnd(result<span class="op">,</span> indentCount)<span class="op">;</span></span>
<span id="lst:8-2-16"><a href="#lst:8-2-16"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="lst:8-2-17"><a href="#lst:8-2-17"></a>}</span>
<span id="lst:8-2-18"><a href="#lst:8-2-18"></a></span>
<span id="lst:8-2-19"><a href="#lst:8-2-19"></a><span class="kw">function</span> <span class="fu">printStart</span>(length<span class="op">,</span> indentCount) {</span>
<span id="lst:8-2-20"><a href="#lst:8-2-20"></a>    makeIndent(indentCount)<span class="op">;</span></span>
<span id="lst:8-2-21"><a href="#lst:8-2-21"></a>    println(<span class="st">&#39;factorial(&#39;</span> <span class="op">+</span> length <span class="op">+</span> <span class="st">&#39;, &#39;</span> <span class="op">+</span> indentCount <span class="op">+</span> <span class="st">&#39;)&#39;</span>)<span class="op">;</span></span>
<span id="lst:8-2-22"><a href="#lst:8-2-22"></a>}</span>
<span id="lst:8-2-23"><a href="#lst:8-2-23"></a></span>
<span id="lst:8-2-24"><a href="#lst:8-2-24"></a><span class="kw">function</span> <span class="fu">printEnd</span>(result<span class="op">,</span> indentCount) {</span>
<span id="lst:8-2-25"><a href="#lst:8-2-25"></a>    makeIndent(indentCount)<span class="op">;</span></span>
<span id="lst:8-2-26"><a href="#lst:8-2-26"></a>    println(<span class="st">&#39;// return &#39;</span> <span class="op">+</span> result)<span class="op">;</span></span>
<span id="lst:8-2-27"><a href="#lst:8-2-27"></a>}</span>
<span id="lst:8-2-28"><a href="#lst:8-2-28"></a></span>
<span id="lst:8-2-29"><a href="#lst:8-2-29"></a><span class="kw">function</span> <span class="fu">makeIndent</span>(indentCount) {</span>
<span id="lst:8-2-30"><a href="#lst:8-2-30"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> indentCount<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:8-2-31"><a href="#lst:8-2-31"></a>        print(<span class="st">&#39;</span><span class="sc">\t</span><span class="st">&#39;</span>)<span class="op">;</span></span>
<span id="lst:8-2-32"><a href="#lst:8-2-32"></a>    }</span>
<span id="lst:8-2-33"><a href="#lst:8-2-33"></a>}</span></code></pre></div>
<pre><code>factorial(5, 0)
    factorial(4, 1)
        factorial(3, 2)
            factorial(2, 3)
                factorial(1, 4)
                // return 1
            // return 2
        // return 6
    // return 24
// return 120           </code></pre>
<p>異なる引数で関数が呼ばれている様子を観察することができました．</p>
<p>（ちなみに，階乗の計算は総和と同じように繰り返しでも書くことができます．）</p>
</section>
<section id="フィボナッチ数列" data-number="9.2.3">
<h3 data-number="8.2.3"><span class="header-section-number">8.2.3</span> フィボナッチ数列</h3>
<p>フィボナッチ数列という自然界にもみられる不思議な数列があります．</p>
<p>fib(n)は次の式で求められる．</p>
<pre><code>fib(n) = fib(n-1) + fib(n-2)</code></pre>
<p>以下が具体例である．</p>
<pre><code>fib(1) = 1
fib(2) = 2
fib(3) = fib(2) + fib(1) = 3
fib(4) = fib(3) + fib(2) = 5
fib(5) = fib(4) + fib(3) = 8
fib(6) = fib(5) + fib(4) = 13</code></pre>
<p>フィボナッチ数列も再帰の例でよく出てくる例で，再帰を使うことでフィボナッチ数列を求めるプログラムを次のように書けます．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:8-3&#39;)">c</span></p>
<!-- リスト 14.2.3.1 Fibonacci.js -->
<div class="sourceCode" id="lst:8-3" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:8-3-1"><a href="#lst:8-3-1"></a>main()<span class="op">;</span></span>
<span id="lst:8-3-2"><a href="#lst:8-3-2"></a></span>
<span id="lst:8-3-3"><a href="#lst:8-3-3"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:8-3-4"><a href="#lst:8-3-4"></a>    println(<span class="st">&#39;fib(1) = &#39;</span> <span class="op">+</span> fib(<span class="dv">1</span>))<span class="op">;</span></span>
<span id="lst:8-3-5"><a href="#lst:8-3-5"></a>    println(<span class="st">&#39;fib(2) = &#39;</span> <span class="op">+</span> fib(<span class="dv">2</span>))<span class="op">;</span></span>
<span id="lst:8-3-6"><a href="#lst:8-3-6"></a>    println(<span class="st">&#39;fib(3) = &#39;</span> <span class="op">+</span> fib(<span class="dv">3</span>))<span class="op">;</span></span>
<span id="lst:8-3-7"><a href="#lst:8-3-7"></a>    println(<span class="st">&#39;fib(4) = &#39;</span> <span class="op">+</span> fib(<span class="dv">4</span>))<span class="op">;</span></span>
<span id="lst:8-3-8"><a href="#lst:8-3-8"></a>    println(<span class="st">&#39;fib(5) = &#39;</span> <span class="op">+</span> fib(<span class="dv">5</span>))<span class="op">;</span></span>
<span id="lst:8-3-9"><a href="#lst:8-3-9"></a>    println(<span class="st">&#39;fib(6) = &#39;</span> <span class="op">+</span> fib(<span class="dv">6</span>))<span class="op">;</span></span>
<span id="lst:8-3-10"><a href="#lst:8-3-10"></a>    println(<span class="st">&#39;fib(7) = &#39;</span> <span class="op">+</span> fib(<span class="dv">7</span>))<span class="op">;</span></span>
<span id="lst:8-3-11"><a href="#lst:8-3-11"></a>}</span>
<span id="lst:8-3-12"><a href="#lst:8-3-12"></a></span>
<span id="lst:8-3-13"><a href="#lst:8-3-13"></a><span class="kw">function</span> <span class="fu">fib</span>(n) {</span>
<span id="lst:8-3-14"><a href="#lst:8-3-14"></a>    <span class="kw">var</span> value<span class="op">;</span></span>
<span id="lst:8-3-15"><a href="#lst:8-3-15"></a>    <span class="cf">if</span> (n <span class="op">==</span> <span class="dv">1</span>) {</span>
<span id="lst:8-3-16"><a href="#lst:8-3-16"></a>        value <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst:8-3-17"><a href="#lst:8-3-17"></a>    } <span class="cf">else</span> <span class="cf">if</span> (n <span class="op">==</span> <span class="dv">2</span>) {</span>
<span id="lst:8-3-18"><a href="#lst:8-3-18"></a>        value <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="lst:8-3-19"><a href="#lst:8-3-19"></a>    } <span class="cf">else</span> {</span>
<span id="lst:8-3-20"><a href="#lst:8-3-20"></a>        value <span class="op">=</span> fib(n <span class="op">-</span> <span class="dv">1</span>) <span class="op">+</span> fib(n <span class="op">-</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:8-3-21"><a href="#lst:8-3-21"></a>    }</span>
<span id="lst:8-3-22"><a href="#lst:8-3-22"></a>    <span class="cf">return</span> value<span class="op">;</span></span>
<span id="lst:8-3-23"><a href="#lst:8-3-23"></a>}</span></code></pre></div>
<p>これも呼出し過程を図示してみましょう．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:8-4&#39;)">c</span></p>
<!-- リスト 14.2.3.2 FibonacciWithPrint.js -->
<div class="sourceCode" id="lst:8-4" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:8-4-1"><a href="#lst:8-4-1"></a>main()<span class="op">;</span></span>
<span id="lst:8-4-2"><a href="#lst:8-4-2"></a></span>
<span id="lst:8-4-3"><a href="#lst:8-4-3"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:8-4-4"><a href="#lst:8-4-4"></a>    print(<span class="st">&#39;fib(5, 0) = &#39;</span> <span class="op">+</span> fib(<span class="dv">5</span><span class="op">,</span> <span class="dv">0</span>))<span class="op">;</span></span>
<span id="lst:8-4-5"><a href="#lst:8-4-5"></a>}</span>
<span id="lst:8-4-6"><a href="#lst:8-4-6"></a></span>
<span id="lst:8-4-7"><a href="#lst:8-4-7"></a><span class="kw">function</span> <span class="fu">fib</span>(n<span class="op">,</span> indentCount) {</span>
<span id="lst:8-4-8"><a href="#lst:8-4-8"></a>    printStart(n<span class="op">,</span> indentCount)<span class="op">;</span></span>
<span id="lst:8-4-9"><a href="#lst:8-4-9"></a>    <span class="kw">var</span> value<span class="op">;</span></span>
<span id="lst:8-4-10"><a href="#lst:8-4-10"></a>    <span class="cf">if</span> (n <span class="op">==</span> <span class="dv">1</span>) {</span>
<span id="lst:8-4-11"><a href="#lst:8-4-11"></a>        value <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst:8-4-12"><a href="#lst:8-4-12"></a>    } <span class="cf">else</span> <span class="cf">if</span> (n <span class="op">==</span> <span class="dv">2</span>) {</span>
<span id="lst:8-4-13"><a href="#lst:8-4-13"></a>        value <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="lst:8-4-14"><a href="#lst:8-4-14"></a>    } <span class="cf">else</span> {</span>
<span id="lst:8-4-15"><a href="#lst:8-4-15"></a>        value <span class="op">=</span> fib(n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> indentCount <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> fib(n <span class="op">-</span> <span class="dv">2</span><span class="op">,</span> indentCount <span class="op">+</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="lst:8-4-16"><a href="#lst:8-4-16"></a>    }</span>
<span id="lst:8-4-17"><a href="#lst:8-4-17"></a>    printEnd(value<span class="op">,</span> indentCount)<span class="op">;</span></span>
<span id="lst:8-4-18"><a href="#lst:8-4-18"></a>    <span class="cf">return</span> value<span class="op">;</span></span>
<span id="lst:8-4-19"><a href="#lst:8-4-19"></a>}</span>
<span id="lst:8-4-20"><a href="#lst:8-4-20"></a></span>
<span id="lst:8-4-21"><a href="#lst:8-4-21"></a><span class="kw">function</span> <span class="fu">printStart</span>(length<span class="op">,</span> indentCount) {</span>
<span id="lst:8-4-22"><a href="#lst:8-4-22"></a>    makeIndent(indentCount)<span class="op">;</span></span>
<span id="lst:8-4-23"><a href="#lst:8-4-23"></a>    println(<span class="st">&#39;fib(&#39;</span> <span class="op">+</span> length <span class="op">+</span> <span class="st">&#39;, &#39;</span> <span class="op">+</span> indentCount <span class="op">+</span> <span class="st">&#39;)&#39;</span>)<span class="op">;</span></span>
<span id="lst:8-4-24"><a href="#lst:8-4-24"></a>}</span>
<span id="lst:8-4-25"><a href="#lst:8-4-25"></a></span>
<span id="lst:8-4-26"><a href="#lst:8-4-26"></a><span class="kw">function</span> <span class="fu">printEnd</span>(result<span class="op">,</span> indentCount) {</span>
<span id="lst:8-4-27"><a href="#lst:8-4-27"></a>    makeIndent(indentCount)<span class="op">;</span></span>
<span id="lst:8-4-28"><a href="#lst:8-4-28"></a>    println(<span class="st">&#39;// return &#39;</span> <span class="op">+</span> result)<span class="op">;</span></span>
<span id="lst:8-4-29"><a href="#lst:8-4-29"></a>}</span>
<span id="lst:8-4-30"><a href="#lst:8-4-30"></a></span>
<span id="lst:8-4-31"><a href="#lst:8-4-31"></a><span class="kw">function</span> <span class="fu">makeIndent</span>(indentCount) {</span>
<span id="lst:8-4-32"><a href="#lst:8-4-32"></a>    <span class="cf">for</span> (i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> indentCount<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="lst:8-4-33"><a href="#lst:8-4-33"></a>        print(<span class="st">&#39;</span><span class="sc">\t</span><span class="st">&#39;</span>)<span class="op">;</span></span>
<span id="lst:8-4-34"><a href="#lst:8-4-34"></a>    }</span>
<span id="lst:8-4-35"><a href="#lst:8-4-35"></a>}</span></code></pre></div>
<pre><code>fib(5, 0)
    fib(4, 1)
        fib(3, 2)
            fib(2, 3)
            // return 2
            fib(1, 3)
            // return 1
        // return 3
        fib(2, 2)
        // return 2
    // return 5
    fib(3, 1)
        fib(2, 2)
        // return 2
        fib(1, 2)
        // return 1
    // return 3
// return 8         </code></pre>
</section>
<section id="再帰とプログラムの効率" class="unnumbered" data-number="">
<h3 class="unnumbered" data-number="-1">再帰とプログラムの効率</h3>
<p>呼出し過程をよく見るとfib(1)とかfib(2)は何回も呼ばれており，大変効率が悪いプログラムであることがわかります．上記のフィボナッチ数列のプログラムは，fib(20)くらいまでは動作しますが，fib(50)ではコンピュータはお手上げ状態（計算が終わらない）のはずです．試してみましょう．</p>
<p>実は，フィボナッチ数列は，「再帰を使ってはいけない例」として著名で，再帰プログラムでは，プログラムが計算の定義をそのまま，わかりやすく書ける代わりに，効率が悪くなることがあることの例として使われています．</p>
</section>
</section>
<section id="フラクタル図形" data-number="9.3">
<h2 data-number="8.3"><span class="header-section-number">8.3</span> フラクタル図形</h2>
<p>フラクタル図形は簡単に言えば「どんなに拡大しても複雑な図形」のことをさします(wikipedia 2011)．フラクタル図形の一種である自己相似図形は，自分自身と同じ形のミニチュアが自分の中に入れ子になっている図形をさす．自己相似図形と再帰プログラムには深い関係があり，再帰プログラムを使ってフラクタル図形を書くことができます．</p>
<p>フラクタル図形を書くには，まず繰り返される基本的な図形と変換ルールを考えます．ここでは木を描くために，以下のように「Y」に小さな「Y」を足していく プログラムを考えてみましょう．</p>
<figure>
<img src="img/chapter07/maketree.png" alt="" /><figcaption>tree</figcaption>
</figure>
<p>まず，「Y」を描くプログラムを書きます．ここで一回テストしてみることが肝要です．</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:8-5&#39;)">c</span></p>
<div class="sourceCode" id="lst:8-5" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:8-5-1"><a href="#lst:8-5-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:8-5-2"><a href="#lst:8-5-2"></a></span>
<span id="lst:8-5-3"><a href="#lst:8-5-3"></a>main()<span class="op">;</span></span>
<span id="lst:8-5-4"><a href="#lst:8-5-4"></a></span>
<span id="lst:8-5-5"><a href="#lst:8-5-5"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:8-5-6"><a href="#lst:8-5-6"></a>    canvasSize(<span class="dv">500</span><span class="op">,</span><span class="dv">500</span>)<span class="op">;</span></span>
<span id="lst:8-5-7"><a href="#lst:8-5-7"></a>    t<span class="op">.</span><span class="fu">warp</span>(<span class="dv">250</span><span class="op">,</span><span class="dv">400</span>)<span class="op">;</span></span>
<span id="lst:8-5-8"><a href="#lst:8-5-8"></a></span>
<span id="lst:8-5-9"><a href="#lst:8-5-9"></a>    drawY(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:8-5-10"><a href="#lst:8-5-10"></a>}</span>
<span id="lst:8-5-11"><a href="#lst:8-5-11"></a></span>
<span id="lst:8-5-12"><a href="#lst:8-5-12"></a><span class="kw">function</span> <span class="fu">drawY</span>(length) {</span>
<span id="lst:8-5-13"><a href="#lst:8-5-13"></a>  </span>
<span id="lst:8-5-14"><a href="#lst:8-5-14"></a>  t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span><span class="co">// 幹を描く</span></span>
<span id="lst:8-5-15"><a href="#lst:8-5-15"></a>  </span>
<span id="lst:8-5-16"><a href="#lst:8-5-16"></a>  <span class="co">// 左の枝を描く</span></span>
<span id="lst:8-5-17"><a href="#lst:8-5-17"></a>  t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:8-5-18"><a href="#lst:8-5-18"></a>  t<span class="op">.</span><span class="fu">fd</span>(length <span class="op">/</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:8-5-19"><a href="#lst:8-5-19"></a>  t<span class="op">.</span><span class="fu">bk</span>(length <span class="op">/</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:8-5-20"><a href="#lst:8-5-20"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:8-5-21"><a href="#lst:8-5-21"></a>  </span>
<span id="lst:8-5-22"><a href="#lst:8-5-22"></a>  <span class="co">// 右の枝を描く</span></span>
<span id="lst:8-5-23"><a href="#lst:8-5-23"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:8-5-24"><a href="#lst:8-5-24"></a>  t<span class="op">.</span><span class="fu">fd</span>(length <span class="op">/</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:8-5-25"><a href="#lst:8-5-25"></a>  t<span class="op">.</span><span class="fu">bk</span>(length <span class="op">/</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:8-5-26"><a href="#lst:8-5-26"></a>  t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:8-5-27"><a href="#lst:8-5-27"></a>  </span>
<span id="lst:8-5-28"><a href="#lst:8-5-28"></a>  t<span class="op">.</span><span class="fu">bk</span>(length)<span class="op">;</span><span class="co">// 幹の根元に戻る</span></span>
<span id="lst:8-5-29"><a href="#lst:8-5-29"></a>  </span>
<span id="lst:8-5-30"><a href="#lst:8-5-30"></a>}</span></code></pre></div>
<p>次に，大きな「Y」の先に小さな「Y」を書くように，再帰呼び出しを行います．再帰の終点も忘れずに記述すること！</p>
<p><span class="CopyButton" onclick="copycode(&#39;lst:8-6&#39;)">c</span></p>
<!-- リスト 14.3.2 DrawTree.js -->
<div class="sourceCode" id="lst:8-6" data-caption="House"><pre class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="lst:8-6-1"><a href="#lst:8-6-1"></a><span class="kw">var</span> t <span class="op">=</span> createTurtle()<span class="op">;</span></span>
<span id="lst:8-6-2"><a href="#lst:8-6-2"></a></span>
<span id="lst:8-6-3"><a href="#lst:8-6-3"></a>main()<span class="op">;</span></span>
<span id="lst:8-6-4"><a href="#lst:8-6-4"></a></span>
<span id="lst:8-6-5"><a href="#lst:8-6-5"></a><span class="kw">function</span> <span class="fu">main</span>(){</span>
<span id="lst:8-6-6"><a href="#lst:8-6-6"></a>    canvasSize(<span class="dv">500</span><span class="op">,</span><span class="dv">500</span>)<span class="op">;</span></span>
<span id="lst:8-6-7"><a href="#lst:8-6-7"></a>    t<span class="op">.</span><span class="fu">warp</span>(<span class="dv">250</span><span class="op">,</span><span class="dv">400</span>)<span class="op">;</span></span>
<span id="lst:8-6-8"><a href="#lst:8-6-8"></a></span>
<span id="lst:8-6-9"><a href="#lst:8-6-9"></a>    drawY(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="lst:8-6-10"><a href="#lst:8-6-10"></a>}</span>
<span id="lst:8-6-11"><a href="#lst:8-6-11"></a></span>
<span id="lst:8-6-12"><a href="#lst:8-6-12"></a><span class="kw">function</span> <span class="fu">drawY</span>(length) {</span>
<span id="lst:8-6-13"><a href="#lst:8-6-13"></a>  </span>
<span id="lst:8-6-14"><a href="#lst:8-6-14"></a>  <span class="cf">if</span> (length <span class="op">&lt;</span> <span class="dv">5</span>) {<span class="co">// 再帰の終点</span></span>
<span id="lst:8-6-15"><a href="#lst:8-6-15"></a>    <span class="cf">return</span><span class="op">;</span></span>
<span id="lst:8-6-16"><a href="#lst:8-6-16"></a>  }</span>
<span id="lst:8-6-17"><a href="#lst:8-6-17"></a>  </span>
<span id="lst:8-6-18"><a href="#lst:8-6-18"></a>  t<span class="op">.</span><span class="fu">fd</span>(length)<span class="op">;</span><span class="co">// 幹を描く</span></span>
<span id="lst:8-6-19"><a href="#lst:8-6-19"></a>  </span>
<span id="lst:8-6-20"><a href="#lst:8-6-20"></a>  <span class="co">// 左の枝を描く</span></span>
<span id="lst:8-6-21"><a href="#lst:8-6-21"></a>  t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:8-6-22"><a href="#lst:8-6-22"></a>  t<span class="op">.</span><span class="fu">fd</span>(length <span class="op">/</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:8-6-23"><a href="#lst:8-6-23"></a>  drawY(length <span class="op">/</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:8-6-24"><a href="#lst:8-6-24"></a>  t<span class="op">.</span><span class="fu">bk</span>(length <span class="op">/</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:8-6-25"><a href="#lst:8-6-25"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:8-6-26"><a href="#lst:8-6-26"></a>  </span>
<span id="lst:8-6-27"><a href="#lst:8-6-27"></a>  <span class="co">// 右の枝を描く</span></span>
<span id="lst:8-6-28"><a href="#lst:8-6-28"></a>  t<span class="op">.</span><span class="fu">rt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:8-6-29"><a href="#lst:8-6-29"></a>  t<span class="op">.</span><span class="fu">fd</span>(length <span class="op">/</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:8-6-30"><a href="#lst:8-6-30"></a>  drawY(length <span class="op">/</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:8-6-31"><a href="#lst:8-6-31"></a>  t<span class="op">.</span><span class="fu">bk</span>(length <span class="op">/</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="lst:8-6-32"><a href="#lst:8-6-32"></a>  t<span class="op">.</span><span class="fu">lt</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="lst:8-6-33"><a href="#lst:8-6-33"></a>  </span>
<span id="lst:8-6-34"><a href="#lst:8-6-34"></a>  t<span class="op">.</span><span class="fu">bk</span>(length)<span class="op">;</span><span class="co">// 幹の根元に戻る</span></span>
<span id="lst:8-6-35"><a href="#lst:8-6-35"></a>  </span>
<span id="lst:8-6-36"><a href="#lst:8-6-36"></a>}</span></code></pre></div>
<!-- このプログラムの関数の呼出し過程を表示すると，次のようになる．

リスト 14.3.3 DrawTreeWithPrint.js
                    
drawY(50, 0)
    drawY(25, 1)
        drawY(12, 2)
            drawY(6, 3)
                drawY(3, 4)
                //
                drawY(3, 4)
                //
            //
            drawY(6, 3)
                drawY(3, 4)
                //
                drawY(3, 4)
                //
            //
        //
        drawY(12, 2)
            drawY(6, 3)
                drawY(3, 4)
                //
                drawY(3, 4)
                //
            //
            drawY(6, 3)
                drawY(3, 4)
                //
                drawY(3, 4)
                //
            //
        //
    //
    drawY(25, 1)
        drawY(12, 2)
            drawY(6, 3)
                drawY(3, 4)
                //
                drawY(3, 4)
                //
            //
            drawY(6, 3)
                drawY(3, 4)
                //
                drawY(3, 4)
                //
            //
        //
        drawY(12, 2)
            drawY(6, 3)
                drawY(3, 4)
                //
                drawY(3, 4)
                //
            //
            drawY(6, 3)
                drawY(3, 4)
                //
                drawY(3, 4)
                //
            //
        //
    //
//          
（呼び出し過程もフラクタル図形になっているところが印象的である．） -->
</section>
<section id="練習問題-7" data-number="9.4">
<h2 data-number="8.4"><span class="header-section-number">8.4</span> 練習問題</h2>
<section id="自然な木を描こう" data-number="9.4.1">
<h3 data-number="8.4.1"><span class="header-section-number">8.4.1</span> 自然な木を描こう</h3>
<p>木を描くサンプルプログラムを改造して，自然な木を描くプログラムにしよう・</p>
<p>【自然な木に見せるためのヒント】</p>
<ul>
<li>小さい枝の生える角度と長さを乱数を使って決めるようにする・</li>
<li>角度は-45度から45度の間にする・</li>
<li>長さは元の枝の長さの0.6から0.9倍くらいの長さにする・</li>
<li>枝から生える枝の数を，2本から3本にする．</li>
</ul>
<p>ファイル名は「naturaltree.js」とすること．</p>
<!-- 図 14.4.1.1 cooltree -->
<figure>
<img src="img/chapter07/q_cooltree.jpg" alt="" /><figcaption>NaturalTree</figcaption>
</figure>
</section>
<section id="トーナメント表を描いてみよう" data-number="9.4.2">
<h3 data-number="8.4.2"><span class="header-section-number">8.4.2</span> トーナメント表を描いてみよう</h3>
<p>関数の再帰呼出しを応用して，下記の図を書いてみましょう．</p>
<figure>
<img src="img/chapter07/q_tournament.jpg" alt="" /><figcaption>tournament</figcaption>
</figure>
<p>ファイル名は「tournament.js」とすること．</p>
</section>
<section id="ギャスケットを描いてみよう" data-number="9.4.3">
<h3 data-number="8.4.3"><span class="header-section-number">8.4.3</span> ギャスケットを描いてみよう</h3>
<p>関数の再帰呼出しを応用して，下記の図を書いてみましょう．</p>
<figure>
<img src="img/chapter07/q_gasket.jpg" alt="" /><figcaption>gasket</figcaption>
</figure>
<p>ファイル名は「gasket.js」とすること．</p>
</section>
<section id="スーパースターを描いてみよう" data-number="9.4.4">
<h3 data-number="8.4.4"><span class="header-section-number">8.4.4</span> スーパースターを描いてみよう</h3>
<p>関数の再帰呼出しを応用して，下記の図を書いてみましょう．</p>
<figure>
<img src="img/chapter07/q_superstar.jpg" alt="" /><figcaption>superstar</figcaption>
</figure>
<p>ファイル名は「superstar.js」とすること．</p>
</section>
<section id="コッホ曲線を描いてみよう" data-number="9.4.5">
<h3 data-number="8.4.5"><span class="header-section-number">8.4.5</span> コッホ曲線を描いてみよう</h3>
<p>関数の再帰呼出しを応用して，下記の図を書いてみましょう．</p>
<figure>
<img src="img/chapter07/q_koch.png" alt="" /><figcaption>koch</figcaption>
</figure>
<p>ファイル名は「koch.js」とすること．</p>
<!-- ### ひまわりの絵を描こう
このサイトを参考にして，ひまわりの絵を描いてみましょう．

ファイル名は「Sunflower.js」とすること．

### 葉っぱの絵を描こう
このサイトを参考にして，葉っぱの絵を描いてみましょう．

ファイル名は「Leaf.js」とすること． -->
</section>
</section>
</section>
</body>
</html>
